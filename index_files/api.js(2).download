/*! For license information please see api.js.LICENSE.txt */
!function(t){function webpackJsonpCallback(n){for(var u,l,d=n[0],h=n[1],g=0,v=[];g<d.length;g++)l=d[g],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&v.push(i[l][0]),i[l]=0;for(u in h)Object.prototype.hasOwnProperty.call(h,u)&&(t[u]=h[u]);for(p&&p(n);v.length;)v.shift()()}var n={},i={10:0};function __webpack_require__(i){if(n[i])return n[i].exports;var u=n[i]={i:i,l:!1,exports:{}};return t[i].call(u.exports,u,u.exports,__webpack_require__),u.l=!0,u.exports}__webpack_require__.e=function requireEnsure(t){var n=[],u=i[t];if(0!==u)if(u)n.push(u[2]);else{var l=new Promise((function(n,l){u=i[t]=[n,l]}));n.push(u[2]=l);var d,p=document.createElement("script");p.charset="utf-8",p.timeout=120,__webpack_require__.nc&&p.setAttribute("nonce",__webpack_require__.nc),p.src=function jsonpScriptSrc(t){return __webpack_require__.p+""+({0:"default_common",1:"sub_common",2:"vendor/react",3:"vendor/d3",4:"vendor/mathjs",5:"vendor/xregexp",6:"vendor/mathcore",7:"vendor/chemcore",8:"utils/audioApi",9:"vendor/jsxgraph",11:"bundles/externalBundles/externalMathcore",12:"bundles/externalBundles/externalReactiveComponents",13:"bundles/features/audioPlayer",14:"bundles/features/counter",15:"bundles/features/customFeature",16:"bundles/features/formulaInput",17:"bundles/features/unknown",18:"bundles/features/videoPlayer",19:"bundles/questionTypes/audio",20:"bundles/questionTypes/audioAdv",21:"bundles/questionTypes/boolean",22:"bundles/questionTypes/chemistry",23:"bundles/questionTypes/chemistryEssay",24:"bundles/questionTypes/cloze",25:"bundles/questionTypes/clozeChemistry",26:"bundles/questionTypes/clozeDropdown",27:"bundles/questionTypes/clozeFormula",28:"bundles/questionTypes/clozeFormulaV2",29:"bundles/questionTypes/custom",30:"bundles/questionTypes/fileUpload",31:"bundles/questionTypes/fillshape",32:"bundles/questionTypes/formula",33:"bundles/questionTypes/formulaEssay",34:"bundles/questionTypes/formulaV2",35:"bundles/questionTypes/graphPlotting",36:"bundles/questionTypes/gridded",37:"bundles/questionTypes/hotspot",38:"bundles/questionTypes/imageUpload",39:"bundles/questionTypes/longText",40:"bundles/questionTypes/numberLine",41:"bundles/questionTypes/numberLinePlot",42:"bundles/questionTypes/plainText",43:"bundles/questionTypes/score",44:"bundles/questionTypes/simpleChart",45:"bundles/questionTypes/simpleShading",46:"bundles/questionTypes/sortList",47:"bundles/questionTypes/textHighlight",48:"bundles/questionTypes/unknown",49:"bundles/widgets/features/calculator",50:"bundles/widgets/features/imageTool",51:"bundles/widgets/features/lineReader",52:"bundles/widgets/features/scrollablePassage",53:"bundles/widgets/features/sharedPassage",54:"bundles/widgets/questions/association",55:"bundles/widgets/questions/chemistryEssayV2",56:"bundles/widgets/questions/choiceMatrix",57:"bundles/widgets/questions/classification",58:"bundles/widgets/questions/clozeAssociation",59:"bundles/widgets/questions/clozeDropdown",60:"bundles/widgets/questions/clozeText",61:"bundles/widgets/questions/drawing",62:"bundles/widgets/questions/formulaEssayV2",63:"bundles/widgets/questions/highlight",64:"bundles/widgets/questions/imageclozeassociationV2",65:"bundles/widgets/questions/longTextV2",66:"bundles/widgets/questions/mcq",67:"bundles/widgets/questions/orderList",68:"bundles/widgets/questions/rating",69:"bundles/widgets/questions/shortText",70:"bundles/widgets/questions/tokenHighlight",71:"bundles/widgets/questions/video",72:"bundles/workers/spokenmath.worker",73:"vendor/MathJax/MathJax",74:"vendor/mathquill"}[t]||t)+".js"}(t),0!==p.src.indexOf(window.location.origin+"/")&&(p.crossOrigin="anonymous");var h=new Error;d=function(n){p.onerror=p.onload=null,clearTimeout(g);var u=i[t];if(0!==u){if(u){var l=n&&("load"===n.type?"missing":n.type),d=n&&n.target&&n.target.src;h.message="Loading chunk "+t+" failed.\n("+l+": "+d+")",h.name="ChunkLoadError",h.type=l,h.request=d,u[1](h)}i[t]=void 0}};var g=setTimeout((function(){d({type:"timeout",target:p})}),12e4);p.onerror=p.onload=d,document.head.appendChild(p)}return Promise.all(n)},__webpack_require__.m=t,__webpack_require__.c=n,__webpack_require__.d=function(t,n,i){__webpack_require__.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,n){if(1&n&&(t=__webpack_require__(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(__webpack_require__.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var u in t)__webpack_require__.d(i,u,function(n){return t[n]}.bind(null,u));return i},__webpack_require__.n=function(t){var n=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(n,"a",n),n},__webpack_require__.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},__webpack_require__.p="",__webpack_require__.oe=function(t){throw console.error(t),t};var u=window.LearnosityAmd=window.LearnosityAmd||[],l=u.push.bind(u);u.push=webpackJsonpCallback,u=u.slice();for(var d=0;d<u.length;d++)webpackJsonpCallback(u[d]);var p=l;__webpack_require__(__webpack_require__.s=62)}([function(t,n,i){(function(t,i){var u;!function(){var l="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},d=l._,p=Array.prototype,h=Object.prototype,g="undefined"!=typeof Symbol?Symbol.prototype:null,v=p.push,y=p.slice,S=h.toString,E=h.hasOwnProperty,w=Array.isArray,A=Object.keys,T=Object.create,Ctor=function(){},_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};n.nodeType?l._=_:(!i.nodeType&&i.exports&&(n=i.exports=_),n._=_),_.VERSION="1.9.2";var R,optimizeCb=function(t,n,i){if(void 0===n)return t;switch(null==i?3:i){case 1:return function(i){return t.call(n,i)};case 3:return function(i,u,l){return t.call(n,i,u,l)};case 4:return function(i,u,l,d){return t.call(n,i,u,l,d)}}return function(){return t.apply(n,arguments)}},cb=function(t,n,i){return _.iteratee!==R?_.iteratee(t,n):null==t?_.identity:_.isFunction(t)?optimizeCb(t,n,i):_.isObject(t)&&!_.isArray(t)?_.matcher(t):_.property(t)};_.iteratee=R=function(t,n){return cb(t,n,1/0)};var restArguments=function(t,n){return n=null==n?t.length-1:+n,function(){for(var i=Math.max(arguments.length-n,0),u=Array(i),l=0;l<i;l++)u[l]=arguments[l+n];switch(n){case 0:return t.call(this,u);case 1:return t.call(this,arguments[0],u);case 2:return t.call(this,arguments[0],arguments[1],u)}var d=Array(n+1);for(l=0;l<n;l++)d[l]=arguments[l];return d[n]=u,t.apply(this,d)}},baseCreate=function(t){if(!_.isObject(t))return{};if(T)return T(t);Ctor.prototype=t;var n=new Ctor;return Ctor.prototype=null,n},shallowProperty=function(t){return function(n){return null==n?void 0:n[t]}},has=function(t,n){return null!=t&&E.call(t,n)},deepGet=function(t,n){for(var i=n.length,u=0;u<i;u++){if(null==t)return;t=t[n[u]]}return i?t:void 0},x=Math.pow(2,53)-1,C=shallowProperty("length"),isArrayLike=function(t){var n=C(t);return"number"==typeof n&&n>=0&&n<=x};_.each=_.forEach=function(t,n,i){var u,l;if(n=optimizeCb(n,i),isArrayLike(t))for(u=0,l=t.length;u<l;u++)n(t[u],u,t);else{var d=_.keys(t);for(u=0,l=d.length;u<l;u++)n(t[d[u]],d[u],t)}return t},_.map=_.collect=function(t,n,i){n=cb(n,i);for(var u=!isArrayLike(t)&&_.keys(t),l=(u||t).length,d=Array(l),p=0;p<l;p++){var h=u?u[p]:p;d[p]=n(t[h],h,t)}return d};var createReduce=function(t){var reducer=function(n,i,u,l){var d=!isArrayLike(n)&&_.keys(n),p=(d||n).length,h=t>0?0:p-1;for(l||(u=n[d?d[h]:h],h+=t);h>=0&&h<p;h+=t){var g=d?d[h]:h;u=i(u,n[g],g,n)}return u};return function(t,n,i,u){var l=arguments.length>=3;return reducer(t,optimizeCb(n,u,4),i,l)}};_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(t,n,i){var u=(isArrayLike(t)?_.findIndex:_.findKey)(t,n,i);if(void 0!==u&&-1!==u)return t[u]},_.filter=_.select=function(t,n,i){var u=[];return n=cb(n,i),_.each(t,(function(t,i,l){n(t,i,l)&&u.push(t)})),u},_.reject=function(t,n,i){return _.filter(t,_.negate(cb(n)),i)},_.every=_.all=function(t,n,i){n=cb(n,i);for(var u=!isArrayLike(t)&&_.keys(t),l=(u||t).length,d=0;d<l;d++){var p=u?u[d]:d;if(!n(t[p],p,t))return!1}return!0},_.some=_.any=function(t,n,i){n=cb(n,i);for(var u=!isArrayLike(t)&&_.keys(t),l=(u||t).length,d=0;d<l;d++){var p=u?u[d]:d;if(n(t[p],p,t))return!0}return!1},_.contains=_.includes=_.include=function(t,n,i,u){return isArrayLike(t)||(t=_.values(t)),("number"!=typeof i||u)&&(i=0),_.indexOf(t,n,i)>=0},_.invoke=restArguments((function(t,n,i){var u,l;return _.isFunction(n)?l=n:_.isArray(n)&&(u=n.slice(0,-1),n=n[n.length-1]),_.map(t,(function(t){var d=l;if(!d){if(u&&u.length&&(t=deepGet(t,u)),null==t)return;d=t[n]}return null==d?d:d.apply(t,i)}))})),_.pluck=function(t,n){return _.map(t,_.property(n))},_.where=function(t,n){return _.filter(t,_.matcher(n))},_.findWhere=function(t,n){return _.find(t,_.matcher(n))},_.max=function(t,n,i){var u,l,d=-1/0,p=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var h=0,g=(t=isArrayLike(t)?t:_.values(t)).length;h<g;h++)null!=(u=t[h])&&u>d&&(d=u);else n=cb(n,i),_.each(t,(function(t,i,u){((l=n(t,i,u))>p||l===-1/0&&d===-1/0)&&(d=t,p=l)}));return d},_.min=function(t,n,i){var u,l,d=1/0,p=1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var h=0,g=(t=isArrayLike(t)?t:_.values(t)).length;h<g;h++)null!=(u=t[h])&&u<d&&(d=u);else n=cb(n,i),_.each(t,(function(t,i,u){((l=n(t,i,u))<p||l===1/0&&d===1/0)&&(d=t,p=l)}));return d},_.shuffle=function(t){return _.sample(t,1/0)},_.sample=function(t,n,i){if(null==n||i)return isArrayLike(t)||(t=_.values(t)),t[_.random(t.length-1)];var u=isArrayLike(t)?_.clone(t):_.values(t),l=C(u);n=Math.max(Math.min(n,l),0);for(var d=l-1,p=0;p<n;p++){var h=_.random(p,d),g=u[p];u[p]=u[h],u[h]=g}return u.slice(0,n)},_.sortBy=function(t,n,i){var u=0;return n=cb(n,i),_.pluck(_.map(t,(function(t,i,l){return{value:t,index:u++,criteria:n(t,i,l)}})).sort((function(t,n){var i=t.criteria,u=n.criteria;if(i!==u){if(i>u||void 0===i)return 1;if(i<u||void 0===u)return-1}return t.index-n.index})),"value")};var group=function(t,n){return function(i,u,l){var d=n?[[],[]]:{};return u=cb(u,l),_.each(i,(function(n,l){var p=u(n,l,i);t(d,n,p)})),d}};_.groupBy=group((function(t,n,i){has(t,i)?t[i].push(n):t[i]=[n]})),_.indexBy=group((function(t,n,i){t[i]=n})),_.countBy=group((function(t,n,i){has(t,i)?t[i]++:t[i]=1}));var I=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(t){return t?_.isArray(t)?y.call(t):_.isString(t)?t.match(I):isArrayLike(t)?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:isArrayLike(t)?t.length:_.keys(t).length},_.partition=group((function(t,n,i){t[i?0:1].push(n)}),!0),_.first=_.head=_.take=function(t,n,i){return null==t||t.length<1?null==n?void 0:[]:null==n||i?t[0]:_.initial(t,t.length-n)},_.initial=function(t,n,i){return y.call(t,0,Math.max(0,t.length-(null==n||i?1:n)))},_.last=function(t,n,i){return null==t||t.length<1?null==n?void 0:[]:null==n||i?t[t.length-1]:_.rest(t,Math.max(0,t.length-n))},_.rest=_.tail=_.drop=function(t,n,i){return y.call(t,null==n||i?1:n)},_.compact=function(t){return _.filter(t,Boolean)};var flatten=function(t,n,i,u){for(var l=(u=u||[]).length,d=0,p=C(t);d<p;d++){var h=t[d];if(isArrayLike(h)&&(_.isArray(h)||_.isArguments(h)))if(n)for(var g=0,v=h.length;g<v;)u[l++]=h[g++];else flatten(h,n,i,u),l=u.length;else i||(u[l++]=h)}return u};_.flatten=function(t,n){return flatten(t,n,!1)},_.without=restArguments((function(t,n){return _.difference(t,n)})),_.uniq=_.unique=function(t,n,i,u){_.isBoolean(n)||(u=i,i=n,n=!1),null!=i&&(i=cb(i,u));for(var l=[],d=[],p=0,h=C(t);p<h;p++){var g=t[p],v=i?i(g,p,t):g;n&&!i?(p&&d===v||l.push(g),d=v):i?_.contains(d,v)||(d.push(v),l.push(g)):_.contains(l,g)||l.push(g)}return l},_.union=restArguments((function(t){return _.uniq(flatten(t,!0,!0))})),_.intersection=function(t){for(var n=[],i=arguments.length,u=0,l=C(t);u<l;u++){var d=t[u];if(!_.contains(n,d)){var p;for(p=1;p<i&&_.contains(arguments[p],d);p++);p===i&&n.push(d)}}return n},_.difference=restArguments((function(t,n){return n=flatten(n,!0,!0),_.filter(t,(function(t){return!_.contains(n,t)}))})),_.unzip=function(t){for(var n=t&&_.max(t,C).length||0,i=Array(n),u=0;u<n;u++)i[u]=_.pluck(t,u);return i},_.zip=restArguments(_.unzip),_.object=function(t,n){for(var i={},u=0,l=C(t);u<l;u++)n?i[t[u]]=n[u]:i[t[u][0]]=t[u][1];return i};var createPredicateIndexFinder=function(t){return function(n,i,u){i=cb(i,u);for(var l=C(n),d=t>0?0:l-1;d>=0&&d<l;d+=t)if(i(n[d],d,n))return d;return-1}};_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(t,n,i,u){for(var l=(i=cb(i,u,1))(n),d=0,p=C(t);d<p;){var h=Math.floor((d+p)/2);i(t[h])<l?d=h+1:p=h}return d};var createIndexFinder=function(t,n,i){return function(u,l,d){var p=0,h=C(u);if("number"==typeof d)t>0?p=d>=0?d:Math.max(d+h,p):h=d>=0?Math.min(d+1,h):d+h+1;else if(i&&d&&h)return u[d=i(u,l)]===l?d:-1;if(l!=l)return(d=n(y.call(u,p,h),_.isNaN))>=0?d+p:-1;for(d=t>0?p:h-1;d>=0&&d<h;d+=t)if(u[d]===l)return d;return-1}};_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(t,n,i){null==n&&(n=t||0,t=0),i||(i=n<t?-1:1);for(var u=Math.max(Math.ceil((n-t)/i),0),l=Array(u),d=0;d<u;d++,t+=i)l[d]=t;return l},_.chunk=function(t,n){if(null==n||n<1)return[];for(var i=[],u=0,l=t.length;u<l;)i.push(y.call(t,u,u+=n));return i};var executeBound=function(t,n,i,u,l){if(!(u instanceof n))return t.apply(i,l);var d=baseCreate(t.prototype),p=t.apply(d,l);return _.isObject(p)?p:d};_.bind=restArguments((function(t,n,i){if(!_.isFunction(t))throw new TypeError("Bind must be called on a function");var u=restArguments((function(l){return executeBound(t,u,n,this,i.concat(l))}));return u})),_.partial=restArguments((function(t,n){var i=_.partial.placeholder,bound=function(){for(var u=0,l=n.length,d=Array(l),p=0;p<l;p++)d[p]=n[p]===i?arguments[u++]:n[p];for(;u<arguments.length;)d.push(arguments[u++]);return executeBound(t,bound,this,this,d)};return bound})),_.partial.placeholder=_,_.bindAll=restArguments((function(t,n){var i=(n=flatten(n,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var u=n[i];t[u]=_.bind(t[u],t)}})),_.memoize=function(t,n){var memoize=function(i){var u=memoize.cache,l=""+(n?n.apply(this,arguments):i);return has(u,l)||(u[l]=t.apply(this,arguments)),u[l]};return memoize.cache={},memoize},_.delay=restArguments((function(t,n,i){return setTimeout((function(){return t.apply(null,i)}),n)})),_.defer=_.partial(_.delay,_,1),_.throttle=function(t,n,i){var u,l,d,p,h=0;i||(i={});var later=function(){h=!1===i.leading?0:_.now(),u=null,p=t.apply(l,d),u||(l=d=null)},throttled=function(){var g=_.now();h||!1!==i.leading||(h=g);var v=n-(g-h);return l=this,d=arguments,v<=0||v>n?(u&&(clearTimeout(u),u=null),h=g,p=t.apply(l,d),u||(l=d=null)):u||!1===i.trailing||(u=setTimeout(later,v)),p};return throttled.cancel=function(){clearTimeout(u),h=0,u=l=d=null},throttled},_.debounce=function(t,n,i){var u,l,later=function(n,i){u=null,i&&(l=t.apply(n,i))},d=restArguments((function(d){if(u&&clearTimeout(u),i){var p=!u;u=setTimeout(later,n),p&&(l=t.apply(this,d))}else u=_.delay(later,n,this,d);return l}));return d.cancel=function(){clearTimeout(u),u=null},d},_.wrap=function(t,n){return _.partial(n,t)},_.negate=function(t){return function(){return!t.apply(this,arguments)}},_.compose=function(){var t=arguments,n=t.length-1;return function(){for(var i=n,u=t[n].apply(this,arguments);i--;)u=t[i].call(this,u);return u}},_.after=function(t,n){return function(){if(--t<1)return n.apply(this,arguments)}},_.before=function(t,n){var i;return function(){return--t>0&&(i=n.apply(this,arguments)),t<=1&&(n=null),i}},_.once=_.partial(_.before,2),_.restArguments=restArguments;var M=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],collectNonEnumProps=function(t,n){var i=O.length,u=t.constructor,l=_.isFunction(u)&&u.prototype||h,d="constructor";for(has(t,d)&&!_.contains(n,d)&&n.push(d);i--;)(d=O[i])in t&&t[d]!==l[d]&&!_.contains(n,d)&&n.push(d)};_.keys=function(t){if(!_.isObject(t))return[];if(A)return A(t);var n=[];for(var i in t)has(t,i)&&n.push(i);return M&&collectNonEnumProps(t,n),n},_.allKeys=function(t){if(!_.isObject(t))return[];var n=[];for(var i in t)n.push(i);return M&&collectNonEnumProps(t,n),n},_.values=function(t){for(var n=_.keys(t),i=n.length,u=Array(i),l=0;l<i;l++)u[l]=t[n[l]];return u},_.mapObject=function(t,n,i){n=cb(n,i);for(var u=_.keys(t),l=u.length,d={},p=0;p<l;p++){var h=u[p];d[h]=n(t[h],h,t)}return d},_.pairs=function(t){for(var n=_.keys(t),i=n.length,u=Array(i),l=0;l<i;l++)u[l]=[n[l],t[n[l]]];return u},_.invert=function(t){for(var n={},i=_.keys(t),u=0,l=i.length;u<l;u++)n[t[i[u]]]=i[u];return n},_.functions=_.methods=function(t){var n=[];for(var i in t)_.isFunction(t[i])&&n.push(i);return n.sort()};var createAssigner=function(t,n){return function(i){var u=arguments.length;if(n&&(i=Object(i)),u<2||null==i)return i;for(var l=1;l<u;l++)for(var d=arguments[l],p=t(d),h=p.length,g=0;g<h;g++){var v=p[g];n&&void 0!==i[v]||(i[v]=d[v])}return i}};_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(t,n,i){n=cb(n,i);for(var u,l=_.keys(t),d=0,p=l.length;d<p;d++)if(n(t[u=l[d]],u,t))return u};var P,N,keyInObj=function(t,n,i){return n in i};_.pick=restArguments((function(t,n){var i={},u=n[0];if(null==t)return i;_.isFunction(u)?(n.length>1&&(u=optimizeCb(u,n[1])),n=_.allKeys(t)):(u=keyInObj,n=flatten(n,!1,!1),t=Object(t));for(var l=0,d=n.length;l<d;l++){var p=n[l],h=t[p];u(h,p,t)&&(i[p]=h)}return i})),_.omit=restArguments((function(t,n){var i,u=n[0];return _.isFunction(u)?(u=_.negate(u),n.length>1&&(i=n[1])):(n=_.map(flatten(n,!1,!1),String),u=function(t,i){return!_.contains(n,i)}),_.pick(t,u,i)})),_.defaults=createAssigner(_.allKeys,!0),_.create=function(t,n){var i=baseCreate(t);return n&&_.extendOwn(i,n),i},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,n){return n(t),t},_.isMatch=function(t,n){var i=_.keys(n),u=i.length;if(null==t)return!u;for(var l=Object(t),d=0;d<u;d++){var p=i[d];if(n[p]!==l[p]||!(p in l))return!1}return!0},P=function(t,n,i,u){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var l=typeof t;return("function"===l||"object"===l||"object"==typeof n)&&N(t,n,i,u)},N=function(t,n,i,u){t instanceof _&&(t=t._wrapped),n instanceof _&&(n=n._wrapped);var l=S.call(t);if(l!==S.call(n))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return g.valueOf.call(t)===g.valueOf.call(n)}var d="[object Array]"===l;if(!d){if("object"!=typeof t||"object"!=typeof n)return!1;var p=t.constructor,h=n.constructor;if(p!==h&&!(_.isFunction(p)&&p instanceof p&&_.isFunction(h)&&h instanceof h)&&"constructor"in t&&"constructor"in n)return!1}u=u||[];for(var v=(i=i||[]).length;v--;)if(i[v]===t)return u[v]===n;if(i.push(t),u.push(n),d){if((v=t.length)!==n.length)return!1;for(;v--;)if(!P(t[v],n[v],i,u))return!1}else{var y,E=_.keys(t);if(v=E.length,_.keys(n).length!==v)return!1;for(;v--;)if(y=E[v],!has(n,y)||!P(t[y],n[y],i,u))return!1}return i.pop(),u.pop(),!0},_.isEqual=function(t,n){return P(t,n)},_.isEmpty=function(t){return null==t||(isArrayLike(t)&&(_.isArray(t)||_.isString(t)||_.isArguments(t))?0===t.length:0===_.keys(t).length)},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=w||function(t){return"[object Array]"===S.call(t)},_.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){_["is"+t]=function(n){return S.call(n)==="[object "+t+"]"}})),_.isArguments(arguments)||(_.isArguments=function(t){return has(t,"callee")});var L=l.document&&l.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof L&&(_.isFunction=function(t){return"function"==typeof t||!1}),_.isFinite=function(t){return!_.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&isNaN(t)},_.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===S.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,n){if(!_.isArray(n))return has(t,n);for(var i=n.length,u=0;u<i;u++){var l=n[u];if(null==t||!E.call(t,l))return!1;t=t[l]}return!!i},_.noConflict=function(){return l._=d,this},_.identity=function(t){return t},_.constant=function(t){return function(){return t}},_.noop=function(){},_.property=function(t){return _.isArray(t)?function(n){return deepGet(n,t)}:shallowProperty(t)},_.propertyOf=function(t){return null==t?function(){}:function(n){return _.isArray(n)?deepGet(t,n):t[n]}},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(n){return _.isMatch(n,t)}},_.times=function(t,n,i){var u=Array(Math.max(0,t));n=optimizeCb(n,i,1);for(var l=0;l<t;l++)u[l]=n(l);return u},_.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},_.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=_.invert(D),createEscaper=function(t){var escaper=function(n){return t[n]},n="(?:"+_.keys(t).join("|")+")",i=RegExp(n),u=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(u,escaper):t}};_.escape=createEscaper(D),_.unescape=createEscaper(q),_.result=function(t,n,i){_.isArray(n)||(n=[n]);var u=n.length;if(!u)return _.isFunction(i)?i.call(t):i;for(var l=0;l<u;l++){var d=null==t?void 0:t[n[l]];void 0===d&&(d=i,l=u),t=_.isFunction(d)?d.call(t):d}return t};var V=0;_.uniqueId=function(t){var n=++V+"";return t?t+n:n},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(t){return"\\"+j[t]};_.template=function(t,n,i){!n&&i&&(n=i),n=_.defaults({},n,_.templateSettings);var u,l=RegExp([(n.escape||U).source,(n.interpolate||U).source,(n.evaluate||U).source].join("|")+"|$","g"),d=0,p="__p+='";t.replace(l,(function(n,i,u,l,h){return p+=t.slice(d,h).replace(B,escapeChar),d=h+n.length,i?p+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":u?p+="'+\n((__t=("+u+"))==null?'':__t)+\n'":l&&(p+="';\n"+l+"\n__p+='"),n})),p+="';\n",n.variable||(p="with(obj||{}){\n"+p+"}\n"),p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+p+"return __p;\n";try{u=new Function(n.variable||"obj","_",p)}catch(t){throw t.source=p,t}var template=function(t){return u.call(this,t,_)},h=n.variable||"obj";return template.source="function("+h+"){\n"+p+"}",template},_.chain=function(t){var n=_(t);return n._chain=!0,n};var chainResult=function(t,n){return t._chain?_(n).chain():n};_.mixin=function(t){return _.each(_.functions(t),(function(n){var i=_[n]=t[n];_.prototype[n]=function(){var t=[this._wrapped];return v.apply(t,arguments),chainResult(this,i.apply(_,t))}})),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=p[t];_.prototype[t]=function(){var i=this._wrapped;return n.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],chainResult(this,i)}})),_.each(["concat","join","slice"],(function(t){var n=p[t];_.prototype[t]=function(){return chainResult(this,n.apply(this._wrapped,arguments))}})),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)},void 0===(u=function(){return _}.apply(n,[]))||(i.exports=u)}()}).call(this,i(39),i(59)(t))},function(t,n,i){var u;!function(n,i){"use strict";"object"==typeof t.exports?t.exports=n.document?i(n,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(n)}("undefined"!=typeof window?window:this,(function(i,l){"use strict";var d=[],p=Object.getPrototypeOf,h=d.slice,g=d.flat?function(t){return d.flat.call(t)}:function(t){return d.concat.apply([],t)},v=d.push,y=d.indexOf,S={},E=S.toString,w=S.hasOwnProperty,A=w.toString,T=A.call(Object),R={},x=function isFunction(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},C=function isWindow(t){return null!=t&&t===t.window},I=i.document,M={type:!0,src:!0,nonce:!0,noModule:!0};function DOMEval(t,n,i){var u,l,d=(i=i||I).createElement("script");if(d.text=t,n)for(u in M)(l=n[u]||n.getAttribute&&n.getAttribute(u))&&d.setAttribute(u,l);i.head.appendChild(d).parentNode.removeChild(d)}function toType(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?S[E.call(t)]||"object":typeof t}var jQuery=function(t,n){return new jQuery.fn.init(t,n)};function isArrayLike(t){var n=!!t&&"length"in t&&t.length,i=toType(t);return!x(t)&&!C(t)&&("array"===i||0===n||"number"==typeof n&&n>0&&n-1 in t)}jQuery.fn=jQuery.prototype={jquery:"3.6.0",constructor:jQuery,length:0,toArray:function(){return h.call(this)},get:function(t){return null==t?h.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var n=jQuery.merge(this.constructor(),t);return n.prevObject=this,n},each:function(t){return jQuery.each(this,t)},map:function(t){return this.pushStack(jQuery.map(this,(function(n,i){return t.call(n,i,n)})))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(jQuery.grep(this,(function(t,n){return(n+1)%2})))},odd:function(){return this.pushStack(jQuery.grep(this,(function(t,n){return n%2})))},eq:function(t){var n=this.length,i=+t+(t<0?n:0);return this.pushStack(i>=0&&i<n?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:v,sort:d.sort,splice:d.splice},jQuery.extend=jQuery.fn.extend=function(){var t,n,i,u,l,d,p=arguments[0]||{},h=1,g=arguments.length,v=!1;for("boolean"==typeof p&&(v=p,p=arguments[h]||{},h++),"object"==typeof p||x(p)||(p={}),h===g&&(p=this,h--);h<g;h++)if(null!=(t=arguments[h]))for(n in t)u=t[n],"__proto__"!==n&&p!==u&&(v&&u&&(jQuery.isPlainObject(u)||(l=Array.isArray(u)))?(i=p[n],d=l&&!Array.isArray(i)?[]:l||jQuery.isPlainObject(i)?i:{},l=!1,p[n]=jQuery.extend(v,d,u)):void 0!==u&&(p[n]=u));return p},jQuery.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var n,i;return!(!t||"[object Object]"!==E.call(t))&&(!(n=p(t))||"function"==typeof(i=w.call(n,"constructor")&&n.constructor)&&A.call(i)===T)},isEmptyObject:function(t){var n;for(n in t)return!1;return!0},globalEval:function(t,n,i){DOMEval(t,{nonce:n&&n.nonce},i)},each:function(t,n){var i,u=0;if(isArrayLike(t))for(i=t.length;u<i&&!1!==n.call(t[u],u,t[u]);u++);else for(u in t)if(!1===n.call(t[u],u,t[u]))break;return t},makeArray:function(t,n){var i=n||[];return null!=t&&(isArrayLike(Object(t))?jQuery.merge(i,"string"==typeof t?[t]:t):v.call(i,t)),i},inArray:function(t,n,i){return null==n?-1:y.call(n,t,i)},merge:function(t,n){for(var i=+n.length,u=0,l=t.length;u<i;u++)t[l++]=n[u];return t.length=l,t},grep:function(t,n,i){for(var u=[],l=0,d=t.length,p=!i;l<d;l++)!n(t[l],l)!==p&&u.push(t[l]);return u},map:function(t,n,i){var u,l,d=0,p=[];if(isArrayLike(t))for(u=t.length;d<u;d++)null!=(l=n(t[d],d,i))&&p.push(l);else for(d in t)null!=(l=n(t[d],d,i))&&p.push(l);return g(p)},guid:1,support:R}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=d[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,n){S["[object "+n+"]"]=n.toLowerCase()}));var O=function(t){var n,i,u,l,d,p,h,g,v,y,S,E,w,A,T,R,x,C,I,M="sizzle"+1*new Date,O=t.document,P=0,N=0,L=createCache(),D=createCache(),q=createCache(),V=createCache(),sortOrder=function(t,n){return t===n&&(S=!0),0},U={}.hasOwnProperty,j=[],B=j.pop,H=j.push,Q=j.push,z=j.slice,indexOf=function(t,n){for(var i=0,u=t.length;i<u;i++)if(t[i]===n)return i;return-1},G="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",W="[\\x20\\t\\r\\n\\f]",$="(?:\\\\[\\da-fA-F]{1,6}"+W+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Y="\\["+W+"*("+$+")(?:"+W+"*([*^$|!~]?=)"+W+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+W+"*\\]",J=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Y+")*)|.*)\\)|)",X=new RegExp(W+"+","g"),K=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Z=new RegExp("^"+W+"*,"+W+"*"),ee=new RegExp("^"+W+"*([>+~]|"+W+")"+W+"*"),te=new RegExp(W+"|>"),ne=new RegExp(J),ie=new RegExp("^"+$+"$"),re={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+Y),PSEUDO:new RegExp("^"+J),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),bool:new RegExp("^(?:"+G+")$","i"),needsContext:new RegExp("^"+W+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)","i")},ae=/HTML$/i,se=/^(?:input|select|textarea|button)$/i,oe=/^h\d$/i,ue=/^[^{]+\{\s*\[native \w/,le=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ce=/[+~]/,de=new RegExp("\\\\[\\da-fA-F]{1,6}"+W+"?|\\\\([^\\r\\n\\f])","g"),funescape=function(t,n){var i="0x"+t.slice(1)-65536;return n||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},pe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(t,n){return n?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},unloadHandler=function(){E()},he=addCombinator((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{Q.apply(j=z.call(O.childNodes),O.childNodes),j[O.childNodes.length].nodeType}catch(t){Q={apply:j.length?function(t,n){H.apply(t,z.call(n))}:function(t,n){for(var i=t.length,u=0;t[i++]=n[u++];);t.length=i-1}}}function Sizzle(t,n,u,l){var d,h,v,y,S,A,x,C=n&&n.ownerDocument,O=n?n.nodeType:9;if(u=u||[],"string"!=typeof t||!t||1!==O&&9!==O&&11!==O)return u;if(!l&&(E(n),n=n||w,T)){if(11!==O&&(S=le.exec(t)))if(d=S[1]){if(9===O){if(!(v=n.getElementById(d)))return u;if(v.id===d)return u.push(v),u}else if(C&&(v=C.getElementById(d))&&I(n,v)&&v.id===d)return u.push(v),u}else{if(S[2])return Q.apply(u,n.getElementsByTagName(t)),u;if((d=S[3])&&i.getElementsByClassName&&n.getElementsByClassName)return Q.apply(u,n.getElementsByClassName(d)),u}if(i.qsa&&!V[t+" "]&&(!R||!R.test(t))&&(1!==O||"object"!==n.nodeName.toLowerCase())){if(x=t,C=n,1===O&&(te.test(t)||ee.test(t))){for((C=ce.test(t)&&testContext(n.parentNode)||n)===n&&i.scope||((y=n.getAttribute("id"))?y=y.replace(pe,fcssescape):n.setAttribute("id",y=M)),h=(A=p(t)).length;h--;)A[h]=(y?"#"+y:":scope")+" "+toSelector(A[h]);x=A.join(",")}try{return Q.apply(u,C.querySelectorAll(x)),u}catch(n){V(t,!0)}finally{y===M&&n.removeAttribute("id")}}}return g(t.replace(K,"$1"),n,u,l)}function createCache(){var t=[];return function cache(n,i){return t.push(n+" ")>u.cacheLength&&delete cache[t.shift()],cache[n+" "]=i}}function markFunction(t){return t[M]=!0,t}function assert(t){var n=w.createElement("fieldset");try{return!!t(n)}catch(t){return!1}finally{n.parentNode&&n.parentNode.removeChild(n),n=null}}function addHandle(t,n){for(var i=t.split("|"),l=i.length;l--;)u.attrHandle[i[l]]=n}function siblingCheck(t,n){var i=n&&t,u=i&&1===t.nodeType&&1===n.nodeType&&t.sourceIndex-n.sourceIndex;if(u)return u;if(i)for(;i=i.nextSibling;)if(i===n)return-1;return t?1:-1}function createInputPseudo(t){return function(n){return"input"===n.nodeName.toLowerCase()&&n.type===t}}function createButtonPseudo(t){return function(n){var i=n.nodeName.toLowerCase();return("input"===i||"button"===i)&&n.type===t}}function createDisabledPseudo(t){return function(n){return"form"in n?n.parentNode&&!1===n.disabled?"label"in n?"label"in n.parentNode?n.parentNode.disabled===t:n.disabled===t:n.isDisabled===t||n.isDisabled!==!t&&he(n)===t:n.disabled===t:"label"in n&&n.disabled===t}}function createPositionalPseudo(t){return markFunction((function(n){return n=+n,markFunction((function(i,u){for(var l,d=t([],i.length,n),p=d.length;p--;)i[l=d[p]]&&(i[l]=!(u[l]=i[l]))}))}))}function testContext(t){return t&&void 0!==t.getElementsByTagName&&t}for(n in i=Sizzle.support={},d=Sizzle.isXML=function(t){var n=t&&t.namespaceURI,i=t&&(t.ownerDocument||t).documentElement;return!ae.test(n||i&&i.nodeName||"HTML")},E=Sizzle.setDocument=function(t){var n,l,p=t?t.ownerDocument||t:O;return p!=w&&9===p.nodeType&&p.documentElement?(A=(w=p).documentElement,T=!d(w),O!=w&&(l=w.defaultView)&&l.top!==l&&(l.addEventListener?l.addEventListener("unload",unloadHandler,!1):l.attachEvent&&l.attachEvent("onunload",unloadHandler)),i.scope=assert((function(t){return A.appendChild(t).appendChild(w.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=assert((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=assert((function(t){return t.appendChild(w.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=ue.test(w.getElementsByClassName),i.getById=assert((function(t){return A.appendChild(t).id=M,!w.getElementsByName||!w.getElementsByName(M).length})),i.getById?(u.filter.ID=function(t){var n=t.replace(de,funescape);return function(t){return t.getAttribute("id")===n}},u.find.ID=function(t,n){if(void 0!==n.getElementById&&T){var i=n.getElementById(t);return i?[i]:[]}}):(u.filter.ID=function(t){var n=t.replace(de,funescape);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===n}},u.find.ID=function(t,n){if(void 0!==n.getElementById&&T){var i,u,l,d=n.getElementById(t);if(d){if((i=d.getAttributeNode("id"))&&i.value===t)return[d];for(l=n.getElementsByName(t),u=0;d=l[u++];)if((i=d.getAttributeNode("id"))&&i.value===t)return[d]}return[]}}),u.find.TAG=i.getElementsByTagName?function(t,n){return void 0!==n.getElementsByTagName?n.getElementsByTagName(t):i.qsa?n.querySelectorAll(t):void 0}:function(t,n){var i,u=[],l=0,d=n.getElementsByTagName(t);if("*"===t){for(;i=d[l++];)1===i.nodeType&&u.push(i);return u}return d},u.find.CLASS=i.getElementsByClassName&&function(t,n){if(void 0!==n.getElementsByClassName&&T)return n.getElementsByClassName(t)},x=[],R=[],(i.qsa=ue.test(w.querySelectorAll))&&(assert((function(t){var n;A.appendChild(t).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+W+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+W+"*(?:value|"+G+")"),t.querySelectorAll("[id~="+M+"-]").length||R.push("~="),(n=w.createElement("input")).setAttribute("name",""),t.appendChild(n),t.querySelectorAll("[name='']").length||R.push("\\["+W+"*name"+W+"*="+W+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+M+"+*").length||R.push(".#.+[+~]"),t.querySelectorAll("\\\f"),R.push("[\\r\\n\\f]")})),assert((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var n=w.createElement("input");n.setAttribute("type","hidden"),t.appendChild(n).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+W+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),A.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")}))),(i.matchesSelector=ue.test(C=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&assert((function(t){i.disconnectedMatch=C.call(t,"*"),C.call(t,"[s!='']:x"),x.push("!=",J)})),R=R.length&&new RegExp(R.join("|")),x=x.length&&new RegExp(x.join("|")),n=ue.test(A.compareDocumentPosition),I=n||ue.test(A.contains)?function(t,n){var i=9===t.nodeType?t.documentElement:t,u=n&&n.parentNode;return t===u||!(!u||1!==u.nodeType||!(i.contains?i.contains(u):t.compareDocumentPosition&&16&t.compareDocumentPosition(u)))}:function(t,n){if(n)for(;n=n.parentNode;)if(n===t)return!0;return!1},sortOrder=n?function(t,n){if(t===n)return S=!0,0;var u=!t.compareDocumentPosition-!n.compareDocumentPosition;return u||(1&(u=(t.ownerDocument||t)==(n.ownerDocument||n)?t.compareDocumentPosition(n):1)||!i.sortDetached&&n.compareDocumentPosition(t)===u?t==w||t.ownerDocument==O&&I(O,t)?-1:n==w||n.ownerDocument==O&&I(O,n)?1:y?indexOf(y,t)-indexOf(y,n):0:4&u?-1:1)}:function(t,n){if(t===n)return S=!0,0;var i,u=0,l=t.parentNode,d=n.parentNode,p=[t],h=[n];if(!l||!d)return t==w?-1:n==w?1:l?-1:d?1:y?indexOf(y,t)-indexOf(y,n):0;if(l===d)return siblingCheck(t,n);for(i=t;i=i.parentNode;)p.unshift(i);for(i=n;i=i.parentNode;)h.unshift(i);for(;p[u]===h[u];)u++;return u?siblingCheck(p[u],h[u]):p[u]==O?-1:h[u]==O?1:0},w):w},Sizzle.matches=function(t,n){return Sizzle(t,null,null,n)},Sizzle.matchesSelector=function(t,n){if(E(t),i.matchesSelector&&T&&!V[n+" "]&&(!x||!x.test(n))&&(!R||!R.test(n)))try{var u=C.call(t,n);if(u||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return u}catch(t){V(n,!0)}return Sizzle(n,w,null,[t]).length>0},Sizzle.contains=function(t,n){return(t.ownerDocument||t)!=w&&E(t),I(t,n)},Sizzle.attr=function(t,n){(t.ownerDocument||t)!=w&&E(t);var l=u.attrHandle[n.toLowerCase()],d=l&&U.call(u.attrHandle,n.toLowerCase())?l(t,n,!T):void 0;return void 0!==d?d:i.attributes||!T?t.getAttribute(n):(d=t.getAttributeNode(n))&&d.specified?d.value:null},Sizzle.escape=function(t){return(t+"").replace(pe,fcssescape)},Sizzle.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},Sizzle.uniqueSort=function(t){var n,u=[],l=0,d=0;if(S=!i.detectDuplicates,y=!i.sortStable&&t.slice(0),t.sort(sortOrder),S){for(;n=t[d++];)n===t[d]&&(l=u.push(d));for(;l--;)t.splice(u[l],1)}return y=null,t},l=Sizzle.getText=function(t){var n,i="",u=0,d=t.nodeType;if(d){if(1===d||9===d||11===d){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=l(t)}else if(3===d||4===d)return t.nodeValue}else for(;n=t[u++];)i+=l(n);return i},(u=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:re,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(de,funescape),t[3]=(t[3]||t[4]||t[5]||"").replace(de,funescape),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Sizzle.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Sizzle.error(t[0]),t},PSEUDO:function(t){var n,i=!t[6]&&t[2];return re.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ne.test(i)&&(n=p(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var n=t.replace(de,funescape).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===n}},CLASS:function(t){var n=L[t+" "];return n||(n=new RegExp("(^|"+W+")"+t+"("+W+"|$)"))&&L(t,(function(t){return n.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,n,i){return function(u){var l=Sizzle.attr(u,t);return null==l?"!="===n:!n||(l+="","="===n?l===i:"!="===n?l!==i:"^="===n?i&&0===l.indexOf(i):"*="===n?i&&l.indexOf(i)>-1:"$="===n?i&&l.slice(-i.length)===i:"~="===n?(" "+l.replace(X," ")+" ").indexOf(i)>-1:"|="===n&&(l===i||l.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,n,i,u,l){var d="nth"!==t.slice(0,3),p="last"!==t.slice(-4),h="of-type"===n;return 1===u&&0===l?function(t){return!!t.parentNode}:function(n,i,g){var v,y,S,E,w,A,T=d!==p?"nextSibling":"previousSibling",R=n.parentNode,x=h&&n.nodeName.toLowerCase(),C=!g&&!h,I=!1;if(R){if(d){for(;T;){for(E=n;E=E[T];)if(h?E.nodeName.toLowerCase()===x:1===E.nodeType)return!1;A=T="only"===t&&!A&&"nextSibling"}return!0}if(A=[p?R.firstChild:R.lastChild],p&&C){for(I=(w=(v=(y=(S=(E=R)[M]||(E[M]={}))[E.uniqueID]||(S[E.uniqueID]={}))[t]||[])[0]===P&&v[1])&&v[2],E=w&&R.childNodes[w];E=++w&&E&&E[T]||(I=w=0)||A.pop();)if(1===E.nodeType&&++I&&E===n){y[t]=[P,w,I];break}}else if(C&&(I=w=(v=(y=(S=(E=n)[M]||(E[M]={}))[E.uniqueID]||(S[E.uniqueID]={}))[t]||[])[0]===P&&v[1]),!1===I)for(;(E=++w&&E&&E[T]||(I=w=0)||A.pop())&&((h?E.nodeName.toLowerCase()!==x:1!==E.nodeType)||!++I||(C&&((y=(S=E[M]||(E[M]={}))[E.uniqueID]||(S[E.uniqueID]={}))[t]=[P,I]),E!==n)););return(I-=l)===u||I%u==0&&I/u>=0}}},PSEUDO:function(t,n){var i,l=u.pseudos[t]||u.setFilters[t.toLowerCase()]||Sizzle.error("unsupported pseudo: "+t);return l[M]?l(n):l.length>1?(i=[t,t,"",n],u.setFilters.hasOwnProperty(t.toLowerCase())?markFunction((function(t,i){for(var u,d=l(t,n),p=d.length;p--;)t[u=indexOf(t,d[p])]=!(i[u]=d[p])})):function(t){return l(t,0,i)}):l}},pseudos:{not:markFunction((function(t){var n=[],i=[],u=h(t.replace(K,"$1"));return u[M]?markFunction((function(t,n,i,l){for(var d,p=u(t,null,l,[]),h=t.length;h--;)(d=p[h])&&(t[h]=!(n[h]=d))})):function(t,l,d){return n[0]=t,u(n,null,d,i),n[0]=null,!i.pop()}})),has:markFunction((function(t){return function(n){return Sizzle(t,n).length>0}})),contains:markFunction((function(t){return t=t.replace(de,funescape),function(n){return(n.textContent||l(n)).indexOf(t)>-1}})),lang:markFunction((function(t){return ie.test(t||"")||Sizzle.error("unsupported lang: "+t),t=t.replace(de,funescape).toLowerCase(),function(n){var i;do{if(i=T?n.lang:n.getAttribute("xml:lang")||n.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((n=n.parentNode)&&1===n.nodeType);return!1}})),target:function(n){var i=t.location&&t.location.hash;return i&&i.slice(1)===n.id},root:function(t){return t===A},focus:function(t){return t===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(t){var n=t.nodeName.toLowerCase();return"input"===n&&!!t.checked||"option"===n&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!u.pseudos.empty(t)},header:function(t){return oe.test(t.nodeName)},input:function(t){return se.test(t.nodeName)},button:function(t){var n=t.nodeName.toLowerCase();return"input"===n&&"button"===t.type||"button"===n},text:function(t){var n;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(n=t.getAttribute("type"))||"text"===n.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(t,n){return[n-1]})),eq:createPositionalPseudo((function(t,n,i){return[i<0?i+n:i]})),even:createPositionalPseudo((function(t,n){for(var i=0;i<n;i+=2)t.push(i);return t})),odd:createPositionalPseudo((function(t,n){for(var i=1;i<n;i+=2)t.push(i);return t})),lt:createPositionalPseudo((function(t,n,i){for(var u=i<0?i+n:i>n?n:i;--u>=0;)t.push(u);return t})),gt:createPositionalPseudo((function(t,n,i){for(var u=i<0?i+n:i;++u<n;)t.push(u);return t}))}}).pseudos.nth=u.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})u.pseudos[n]=createInputPseudo(n);for(n in{submit:!0,reset:!0})u.pseudos[n]=createButtonPseudo(n);function setFilters(){}function toSelector(t){for(var n=0,i=t.length,u="";n<i;n++)u+=t[n].value;return u}function addCombinator(t,n,i){var u=n.dir,l=n.next,d=l||u,p=i&&"parentNode"===d,h=N++;return n.first?function(n,i,l){for(;n=n[u];)if(1===n.nodeType||p)return t(n,i,l);return!1}:function(n,i,g){var v,y,S,E=[P,h];if(g){for(;n=n[u];)if((1===n.nodeType||p)&&t(n,i,g))return!0}else for(;n=n[u];)if(1===n.nodeType||p)if(y=(S=n[M]||(n[M]={}))[n.uniqueID]||(S[n.uniqueID]={}),l&&l===n.nodeName.toLowerCase())n=n[u]||n;else{if((v=y[d])&&v[0]===P&&v[1]===h)return E[2]=v[2];if(y[d]=E,E[2]=t(n,i,g))return!0}return!1}}function elementMatcher(t){return t.length>1?function(n,i,u){for(var l=t.length;l--;)if(!t[l](n,i,u))return!1;return!0}:t[0]}function condense(t,n,i,u,l){for(var d,p=[],h=0,g=t.length,v=null!=n;h<g;h++)(d=t[h])&&(i&&!i(d,u,l)||(p.push(d),v&&n.push(h)));return p}function setMatcher(t,n,i,u,l,d){return u&&!u[M]&&(u=setMatcher(u)),l&&!l[M]&&(l=setMatcher(l,d)),markFunction((function(d,p,h,g){var v,y,S,E=[],w=[],A=p.length,T=d||function multipleContexts(t,n,i){for(var u=0,l=n.length;u<l;u++)Sizzle(t,n[u],i);return i}(n||"*",h.nodeType?[h]:h,[]),R=!t||!d&&n?T:condense(T,E,t,h,g),x=i?l||(d?t:A||u)?[]:p:R;if(i&&i(R,x,h,g),u)for(v=condense(x,w),u(v,[],h,g),y=v.length;y--;)(S=v[y])&&(x[w[y]]=!(R[w[y]]=S));if(d){if(l||t){if(l){for(v=[],y=x.length;y--;)(S=x[y])&&v.push(R[y]=S);l(null,x=[],v,g)}for(y=x.length;y--;)(S=x[y])&&(v=l?indexOf(d,S):E[y])>-1&&(d[v]=!(p[v]=S))}}else x=condense(x===p?x.splice(A,x.length):x),l?l(null,p,x,g):Q.apply(p,x)}))}function matcherFromTokens(t){for(var n,i,l,d=t.length,p=u.relative[t[0].type],h=p||u.relative[" "],g=p?1:0,y=addCombinator((function(t){return t===n}),h,!0),S=addCombinator((function(t){return indexOf(n,t)>-1}),h,!0),E=[function(t,i,u){var l=!p&&(u||i!==v)||((n=i).nodeType?y(t,i,u):S(t,i,u));return n=null,l}];g<d;g++)if(i=u.relative[t[g].type])E=[addCombinator(elementMatcher(E),i)];else{if((i=u.filter[t[g].type].apply(null,t[g].matches))[M]){for(l=++g;l<d&&!u.relative[t[l].type];l++);return setMatcher(g>1&&elementMatcher(E),g>1&&toSelector(t.slice(0,g-1).concat({value:" "===t[g-2].type?"*":""})).replace(K,"$1"),i,g<l&&matcherFromTokens(t.slice(g,l)),l<d&&matcherFromTokens(t=t.slice(l)),l<d&&toSelector(t))}E.push(i)}return elementMatcher(E)}return setFilters.prototype=u.filters=u.pseudos,u.setFilters=new setFilters,p=Sizzle.tokenize=function(t,n){var i,l,d,p,h,g,v,y=D[t+" "];if(y)return n?0:y.slice(0);for(h=t,g=[],v=u.preFilter;h;){for(p in i&&!(l=Z.exec(h))||(l&&(h=h.slice(l[0].length)||h),g.push(d=[])),i=!1,(l=ee.exec(h))&&(i=l.shift(),d.push({value:i,type:l[0].replace(K," ")}),h=h.slice(i.length)),u.filter)!(l=re[p].exec(h))||v[p]&&!(l=v[p](l))||(i=l.shift(),d.push({value:i,type:p,matches:l}),h=h.slice(i.length));if(!i)break}return n?h.length:h?Sizzle.error(t):D(t,g).slice(0)},h=Sizzle.compile=function(t,n){var i,l=[],d=[],h=q[t+" "];if(!h){for(n||(n=p(t)),i=n.length;i--;)(h=matcherFromTokens(n[i]))[M]?l.push(h):d.push(h);(h=q(t,function matcherFromGroupMatchers(t,n){var i=n.length>0,l=t.length>0,superMatcher=function(d,p,h,g,y){var S,A,R,x=0,C="0",I=d&&[],M=[],O=v,N=d||l&&u.find.TAG("*",y),L=P+=null==O?1:Math.random()||.1,D=N.length;for(y&&(v=p==w||p||y);C!==D&&null!=(S=N[C]);C++){if(l&&S){for(A=0,p||S.ownerDocument==w||(E(S),h=!T);R=t[A++];)if(R(S,p||w,h)){g.push(S);break}y&&(P=L)}i&&((S=!R&&S)&&x--,d&&I.push(S))}if(x+=C,i&&C!==x){for(A=0;R=n[A++];)R(I,M,p,h);if(d){if(x>0)for(;C--;)I[C]||M[C]||(M[C]=B.call(g));M=condense(M)}Q.apply(g,M),y&&!d&&M.length>0&&x+n.length>1&&Sizzle.uniqueSort(g)}return y&&(P=L,v=O),I};return i?markFunction(superMatcher):superMatcher}(d,l))).selector=t}return h},g=Sizzle.select=function(t,n,i,l){var d,g,v,y,S,E="function"==typeof t&&t,w=!l&&p(t=E.selector||t);if(i=i||[],1===w.length){if((g=w[0]=w[0].slice(0)).length>2&&"ID"===(v=g[0]).type&&9===n.nodeType&&T&&u.relative[g[1].type]){if(!(n=(u.find.ID(v.matches[0].replace(de,funescape),n)||[])[0]))return i;E&&(n=n.parentNode),t=t.slice(g.shift().value.length)}for(d=re.needsContext.test(t)?0:g.length;d--&&(v=g[d],!u.relative[y=v.type]);)if((S=u.find[y])&&(l=S(v.matches[0].replace(de,funescape),ce.test(g[0].type)&&testContext(n.parentNode)||n))){if(g.splice(d,1),!(t=l.length&&toSelector(g)))return Q.apply(i,l),i;break}}return(E||h(t,w))(l,n,!T,i,!n||ce.test(t)&&testContext(n.parentNode)||n),i},i.sortStable=M.split("").sort(sortOrder).join("")===M,i.detectDuplicates=!!S,E(),i.sortDetached=assert((function(t){return 1&t.compareDocumentPosition(w.createElement("fieldset"))})),assert((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(t,n,i){if(!i)return t.getAttribute(n,"type"===n.toLowerCase()?1:2)})),i.attributes&&assert((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||addHandle("value",(function(t,n,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),assert((function(t){return null==t.getAttribute("disabled")}))||addHandle(G,(function(t,n,i){var u;if(!i)return!0===t[n]?n.toLowerCase():(u=t.getAttributeNode(n))&&u.specified?u.value:null})),Sizzle}(i);jQuery.find=O,jQuery.expr=O.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=O.uniqueSort,jQuery.text=O.getText,jQuery.isXMLDoc=O.isXML,jQuery.contains=O.contains,jQuery.escapeSelector=O.escape;var dir=function(t,n,i){for(var u=[],l=void 0!==i;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(l&&jQuery(t).is(i))break;u.push(t)}return u},siblings=function(t,n){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==n&&i.push(t);return i},P=jQuery.expr.match.needsContext;function nodeName(t,n){return t.nodeName&&t.nodeName.toLowerCase()===n.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function winnow(t,n,i){return x(n)?jQuery.grep(t,(function(t,u){return!!n.call(t,u,t)!==i})):n.nodeType?jQuery.grep(t,(function(t){return t===n!==i})):"string"!=typeof n?jQuery.grep(t,(function(t){return y.call(n,t)>-1!==i})):jQuery.filter(n,t,i)}jQuery.filter=function(t,n,i){var u=n[0];return i&&(t=":not("+t+")"),1===n.length&&1===u.nodeType?jQuery.find.matchesSelector(u,t)?[u]:[]:jQuery.find.matches(t,jQuery.grep(n,(function(t){return 1===t.nodeType})))},jQuery.fn.extend({find:function(t){var n,i,u=this.length,l=this;if("string"!=typeof t)return this.pushStack(jQuery(t).filter((function(){for(n=0;n<u;n++)if(jQuery.contains(l[n],this))return!0})));for(i=this.pushStack([]),n=0;n<u;n++)jQuery.find(t,l[n],i);return u>1?jQuery.uniqueSort(i):i},filter:function(t){return this.pushStack(winnow(this,t||[],!1))},not:function(t){return this.pushStack(winnow(this,t||[],!0))},is:function(t){return!!winnow(this,"string"==typeof t&&P.test(t)?jQuery(t):t||[],!1).length}});var L,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(jQuery.fn.init=function(t,n,i){var u,l;if(!t)return this;if(i=i||L,"string"==typeof t){if(!(u="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t))||!u[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(u[1]){if(n=n instanceof jQuery?n[0]:n,jQuery.merge(this,jQuery.parseHTML(u[1],n&&n.nodeType?n.ownerDocument||n:I,!0)),N.test(u[1])&&jQuery.isPlainObject(n))for(u in n)x(this[u])?this[u](n[u]):this.attr(u,n[u]);return this}return(l=I.getElementById(u[2]))&&(this[0]=l,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):x(t)?void 0!==i.ready?i.ready(t):t(jQuery):jQuery.makeArray(t,this)}).prototype=jQuery.fn,L=jQuery(I);var q=/^(?:parents|prev(?:Until|All))/,V={children:!0,contents:!0,next:!0,prev:!0};function sibling(t,n){for(;(t=t[n])&&1!==t.nodeType;);return t}jQuery.fn.extend({has:function(t){var n=jQuery(t,this),i=n.length;return this.filter((function(){for(var t=0;t<i;t++)if(jQuery.contains(this,n[t]))return!0}))},closest:function(t,n){var i,u=0,l=this.length,d=[],p="string"!=typeof t&&jQuery(t);if(!P.test(t))for(;u<l;u++)for(i=this[u];i&&i!==n;i=i.parentNode)if(i.nodeType<11&&(p?p.index(i)>-1:1===i.nodeType&&jQuery.find.matchesSelector(i,t))){d.push(i);break}return this.pushStack(d.length>1?jQuery.uniqueSort(d):d)},index:function(t){return t?"string"==typeof t?y.call(jQuery(t),this[0]):y.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,n){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(t,n))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),jQuery.each({parent:function(t){var n=t.parentNode;return n&&11!==n.nodeType?n:null},parents:function(t){return dir(t,"parentNode")},parentsUntil:function(t,n,i){return dir(t,"parentNode",i)},next:function(t){return sibling(t,"nextSibling")},prev:function(t){return sibling(t,"previousSibling")},nextAll:function(t){return dir(t,"nextSibling")},prevAll:function(t){return dir(t,"previousSibling")},nextUntil:function(t,n,i){return dir(t,"nextSibling",i)},prevUntil:function(t,n,i){return dir(t,"previousSibling",i)},siblings:function(t){return siblings((t.parentNode||{}).firstChild,t)},children:function(t){return siblings(t.firstChild)},contents:function(t){return null!=t.contentDocument&&p(t.contentDocument)?t.contentDocument:(nodeName(t,"template")&&(t=t.content||t),jQuery.merge([],t.childNodes))}},(function(t,n){jQuery.fn[t]=function(i,u){var l=jQuery.map(this,n,i);return"Until"!==t.slice(-5)&&(u=i),u&&"string"==typeof u&&(l=jQuery.filter(u,l)),this.length>1&&(V[t]||jQuery.uniqueSort(l),q.test(t)&&l.reverse()),this.pushStack(l)}}));var U=/[^\x20\t\r\n\f]+/g;function Identity(t){return t}function Thrower(t){throw t}function adoptValue(t,n,i,u){var l;try{t&&x(l=t.promise)?l.call(t).done(n).fail(i):t&&x(l=t.then)?l.call(t,n,i):n.apply(void 0,[t].slice(u))}catch(t){i.apply(void 0,[t])}}jQuery.Callbacks=function(t){t="string"==typeof t?function createOptions(t){var n={};return jQuery.each(t.match(U)||[],(function(t,i){n[i]=!0})),n}(t):jQuery.extend({},t);var n,i,u,l,d=[],p=[],h=-1,fire=function(){for(l=l||t.once,u=n=!0;p.length;h=-1)for(i=p.shift();++h<d.length;)!1===d[h].apply(i[0],i[1])&&t.stopOnFalse&&(h=d.length,i=!1);t.memory||(i=!1),n=!1,l&&(d=i?[]:"")},g={add:function(){return d&&(i&&!n&&(h=d.length-1,p.push(i)),function add(n){jQuery.each(n,(function(n,i){x(i)?t.unique&&g.has(i)||d.push(i):i&&i.length&&"string"!==toType(i)&&add(i)}))}(arguments),i&&!n&&fire()),this},remove:function(){return jQuery.each(arguments,(function(t,n){for(var i;(i=jQuery.inArray(n,d,i))>-1;)d.splice(i,1),i<=h&&h--})),this},has:function(t){return t?jQuery.inArray(t,d)>-1:d.length>0},empty:function(){return d&&(d=[]),this},disable:function(){return l=p=[],d=i="",this},disabled:function(){return!d},lock:function(){return l=p=[],i||n||(d=i=""),this},locked:function(){return!!l},fireWith:function(t,i){return l||(i=[t,(i=i||[]).slice?i.slice():i],p.push(i),n||fire()),this},fire:function(){return g.fireWith(this,arguments),this},fired:function(){return!!u}};return g},jQuery.extend({Deferred:function(t){var n=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],u="pending",l={state:function(){return u},always:function(){return d.done(arguments).fail(arguments),this},catch:function(t){return l.then(null,t)},pipe:function(){var t=arguments;return jQuery.Deferred((function(i){jQuery.each(n,(function(n,u){var l=x(t[u[4]])&&t[u[4]];d[u[1]]((function(){var t=l&&l.apply(this,arguments);t&&x(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[u[0]+"With"](this,l?[t]:arguments)}))})),t=null})).promise()},then:function(t,u,l){var d=0;function resolve(t,n,u,l){return function(){var p=this,h=arguments,mightThrow=function(){var i,g;if(!(t<d)){if((i=u.apply(p,h))===n.promise())throw new TypeError("Thenable self-resolution");g=i&&("object"==typeof i||"function"==typeof i)&&i.then,x(g)?l?g.call(i,resolve(d,n,Identity,l),resolve(d,n,Thrower,l)):(d++,g.call(i,resolve(d,n,Identity,l),resolve(d,n,Thrower,l),resolve(d,n,Identity,n.notifyWith))):(u!==Identity&&(p=void 0,h=[i]),(l||n.resolveWith)(p,h))}},g=l?mightThrow:function(){try{mightThrow()}catch(i){jQuery.Deferred.exceptionHook&&jQuery.Deferred.exceptionHook(i,g.stackTrace),t+1>=d&&(u!==Thrower&&(p=void 0,h=[i]),n.rejectWith(p,h))}};t?g():(jQuery.Deferred.getStackHook&&(g.stackTrace=jQuery.Deferred.getStackHook()),i.setTimeout(g))}}return jQuery.Deferred((function(i){n[0][3].add(resolve(0,i,x(l)?l:Identity,i.notifyWith)),n[1][3].add(resolve(0,i,x(t)?t:Identity)),n[2][3].add(resolve(0,i,x(u)?u:Thrower))})).promise()},promise:function(t){return null!=t?jQuery.extend(t,l):l}},d={};return jQuery.each(n,(function(t,i){var p=i[2],h=i[5];l[i[1]]=p.add,h&&p.add((function(){u=h}),n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),p.add(i[3].fire),d[i[0]]=function(){return d[i[0]+"With"](this===d?void 0:this,arguments),this},d[i[0]+"With"]=p.fireWith})),l.promise(d),t&&t.call(d,d),d},when:function(t){var n=arguments.length,i=n,u=Array(i),l=h.call(arguments),d=jQuery.Deferred(),updateFunc=function(t){return function(i){u[t]=this,l[t]=arguments.length>1?h.call(arguments):i,--n||d.resolveWith(u,l)}};if(n<=1&&(adoptValue(t,d.done(updateFunc(i)).resolve,d.reject,!n),"pending"===d.state()||x(l[i]&&l[i].then)))return d.then();for(;i--;)adoptValue(l[i],updateFunc(i),d.reject);return d.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(t,n){i.console&&i.console.warn&&t&&j.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},jQuery.readyException=function(t){i.setTimeout((function(){throw t}))};var B=jQuery.Deferred();function completed(){I.removeEventListener("DOMContentLoaded",completed),i.removeEventListener("load",completed),jQuery.ready()}jQuery.fn.ready=function(t){return B.then(t).catch((function(t){jQuery.readyException(t)})),this},jQuery.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==t&&--jQuery.readyWait>0||B.resolveWith(I,[jQuery]))}}),jQuery.ready.then=B.then,"complete"===I.readyState||"loading"!==I.readyState&&!I.documentElement.doScroll?i.setTimeout(jQuery.ready):(I.addEventListener("DOMContentLoaded",completed),i.addEventListener("load",completed));var access=function(t,n,i,u,l,d,p){var h=0,g=t.length,v=null==i;if("object"===toType(i))for(h in l=!0,i)access(t,n,h,i[h],!0,d,p);else if(void 0!==u&&(l=!0,x(u)||(p=!0),v&&(p?(n.call(t,u),n=null):(v=n,n=function(t,n,i){return v.call(jQuery(t),i)})),n))for(;h<g;h++)n(t[h],i,p?u:u.call(t[h],h,n(t[h],i)));return l?t:v?n.call(t):g?n(t[0],i):d},H=/^-ms-/,Q=/-([a-z])/g;function fcamelCase(t,n){return n.toUpperCase()}function camelCase(t){return t.replace(H,"ms-").replace(Q,fcamelCase)}var acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1,Data.prototype={cache:function(t){var n=t[this.expando];return n||(n={},acceptData(t)&&(t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,configurable:!0}))),n},set:function(t,n,i){var u,l=this.cache(t);if("string"==typeof n)l[camelCase(n)]=i;else for(u in n)l[camelCase(u)]=n[u];return l},get:function(t,n){return void 0===n?this.cache(t):t[this.expando]&&t[this.expando][camelCase(n)]},access:function(t,n,i){return void 0===n||n&&"string"==typeof n&&void 0===i?this.get(t,n):(this.set(t,n,i),void 0!==i?i:n)},remove:function(t,n){var i,u=t[this.expando];if(void 0!==u){if(void 0!==n){i=(n=Array.isArray(n)?n.map(camelCase):(n=camelCase(n))in u?[n]:n.match(U)||[]).length;for(;i--;)delete u[n[i]]}(void 0===n||jQuery.isEmptyObject(u))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var n=t[this.expando];return void 0!==n&&!jQuery.isEmptyObject(n)}};var z=new Data,G=new Data,W=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,$=/[A-Z]/g;function dataAttr(t,n,i){var u;if(void 0===i&&1===t.nodeType)if(u="data-"+n.replace($,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(u))){try{i=function getData(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:W.test(t)?JSON.parse(t):t)}(i)}catch(t){}G.set(t,n,i)}else i=void 0;return i}jQuery.extend({hasData:function(t){return G.hasData(t)||z.hasData(t)},data:function(t,n,i){return G.access(t,n,i)},removeData:function(t,n){G.remove(t,n)},_data:function(t,n,i){return z.access(t,n,i)},_removeData:function(t,n){z.remove(t,n)}}),jQuery.fn.extend({data:function(t,n){var i,u,l,d=this[0],p=d&&d.attributes;if(void 0===t){if(this.length&&(l=G.get(d),1===d.nodeType&&!z.get(d,"hasDataAttrs"))){for(i=p.length;i--;)p[i]&&0===(u=p[i].name).indexOf("data-")&&(u=camelCase(u.slice(5)),dataAttr(d,u,l[u]));z.set(d,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each((function(){G.set(this,t)})):access(this,(function(n){var i;if(d&&void 0===n)return void 0!==(i=G.get(d,t))||void 0!==(i=dataAttr(d,t))?i:void 0;this.each((function(){G.set(this,t,n)}))}),null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){G.remove(this,t)}))}}),jQuery.extend({queue:function(t,n,i){var u;if(t)return n=(n||"fx")+"queue",u=z.get(t,n),i&&(!u||Array.isArray(i)?u=z.access(t,n,jQuery.makeArray(i)):u.push(i)),u||[]},dequeue:function(t,n){n=n||"fx";var i=jQuery.queue(t,n),u=i.length,l=i.shift(),d=jQuery._queueHooks(t,n);"inprogress"===l&&(l=i.shift(),u--),l&&("fx"===n&&i.unshift("inprogress"),delete d.stop,l.call(t,(function(){jQuery.dequeue(t,n)}),d)),!u&&d&&d.empty.fire()},_queueHooks:function(t,n){var i=n+"queueHooks";return z.get(t,i)||z.access(t,i,{empty:jQuery.Callbacks("once memory").add((function(){z.remove(t,[n+"queue",i])}))})}}),jQuery.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?jQuery.queue(this[0],t):void 0===n?this:this.each((function(){var i=jQuery.queue(this,t,n);jQuery._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&jQuery.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){jQuery.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,u=1,l=jQuery.Deferred(),d=this,p=this.length,resolve=function(){--u||l.resolveWith(d,[d])};for("string"!=typeof t&&(n=t,t=void 0),t=t||"fx";p--;)(i=z.get(d[p],t+"queueHooks"))&&i.empty&&(u++,i.empty.add(resolve));return resolve(),l.promise(n)}});var Y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,J=new RegExp("^(?:([+-])=|)("+Y+")([a-z%]*)$","i"),X=["Top","Right","Bottom","Left"],K=I.documentElement,isAttached=function(t){return jQuery.contains(t.ownerDocument,t)},Z={composed:!0};K.getRootNode&&(isAttached=function(t){return jQuery.contains(t.ownerDocument,t)||t.getRootNode(Z)===t.ownerDocument});var isHiddenWithinTree=function(t,n){return"none"===(t=n||t).style.display||""===t.style.display&&isAttached(t)&&"none"===jQuery.css(t,"display")};function adjustCSS(t,n,i,u){var l,d,p=20,h=u?function(){return u.cur()}:function(){return jQuery.css(t,n,"")},g=h(),v=i&&i[3]||(jQuery.cssNumber[n]?"":"px"),y=t.nodeType&&(jQuery.cssNumber[n]||"px"!==v&&+g)&&J.exec(jQuery.css(t,n));if(y&&y[3]!==v){for(g/=2,v=v||y[3],y=+g||1;p--;)jQuery.style(t,n,y+v),(1-d)*(1-(d=h()/g||.5))<=0&&(p=0),y/=d;y*=2,jQuery.style(t,n,y+v),i=i||[]}return i&&(y=+y||+g||0,l=i[1]?y+(i[1]+1)*i[2]:+i[2],u&&(u.unit=v,u.start=y,u.end=l)),l}var ee={};function getDefaultDisplay(t){var n,i=t.ownerDocument,u=t.nodeName,l=ee[u];return l||(n=i.body.appendChild(i.createElement(u)),l=jQuery.css(n,"display"),n.parentNode.removeChild(n),"none"===l&&(l="block"),ee[u]=l,l)}function showHide(t,n){for(var i,u,l=[],d=0,p=t.length;d<p;d++)(u=t[d]).style&&(i=u.style.display,n?("none"===i&&(l[d]=z.get(u,"display")||null,l[d]||(u.style.display="")),""===u.style.display&&isHiddenWithinTree(u)&&(l[d]=getDefaultDisplay(u))):"none"!==i&&(l[d]="none",z.set(u,"display",i)));for(d=0;d<p;d++)null!=l[d]&&(t[d].style.display=l[d]);return t}jQuery.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){isHiddenWithinTree(this)?jQuery(this).show():jQuery(this).hide()}))}});var te,ne,ie=/^(?:checkbox|radio)$/i,re=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ae=/^$|^module$|\/(?:java|ecma)script/i;te=I.createDocumentFragment().appendChild(I.createElement("div")),(ne=I.createElement("input")).setAttribute("type","radio"),ne.setAttribute("checked","checked"),ne.setAttribute("name","t"),te.appendChild(ne),R.checkClone=te.cloneNode(!0).cloneNode(!0).lastChild.checked,te.innerHTML="<textarea>x</textarea>",R.noCloneChecked=!!te.cloneNode(!0).lastChild.defaultValue,te.innerHTML="<option></option>",R.option=!!te.lastChild;var se={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function getAll(t,n){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(n||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(n||"*"):[],void 0===n||n&&nodeName(t,n)?jQuery.merge([t],i):i}function setGlobalEval(t,n){for(var i=0,u=t.length;i<u;i++)z.set(t[i],"globalEval",!n||z.get(n[i],"globalEval"))}se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,R.option||(se.optgroup=se.option=[1,"<select multiple='multiple'>","</select>"]);var oe=/<|&#?\w+;/;function buildFragment(t,n,i,u,l){for(var d,p,h,g,v,y,S=n.createDocumentFragment(),E=[],w=0,A=t.length;w<A;w++)if((d=t[w])||0===d)if("object"===toType(d))jQuery.merge(E,d.nodeType?[d]:d);else if(oe.test(d)){for(p=p||S.appendChild(n.createElement("div")),h=(re.exec(d)||["",""])[1].toLowerCase(),g=se[h]||se._default,p.innerHTML=g[1]+jQuery.htmlPrefilter(d)+g[2],y=g[0];y--;)p=p.lastChild;jQuery.merge(E,p.childNodes),(p=S.firstChild).textContent=""}else E.push(n.createTextNode(d));for(S.textContent="",w=0;d=E[w++];)if(u&&jQuery.inArray(d,u)>-1)l&&l.push(d);else if(v=isAttached(d),p=getAll(S.appendChild(d),"script"),v&&setGlobalEval(p),i)for(y=0;d=p[y++];)ae.test(d.type||"")&&i.push(d);return S}var ue=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function expectSync(t,n){return t===function safeActiveElement(){try{return I.activeElement}catch(t){}}()==("focus"===n)}function on(t,n,i,u,l,d){var p,h;if("object"==typeof n){for(h in"string"!=typeof i&&(u=u||i,i=void 0),n)on(t,h,i,u,n[h],d);return t}if(null==u&&null==l?(l=i,u=i=void 0):null==l&&("string"==typeof i?(l=u,u=void 0):(l=u,u=i,i=void 0)),!1===l)l=returnFalse;else if(!l)return t;return 1===d&&(p=l,(l=function(t){return jQuery().off(t),p.apply(this,arguments)}).guid=p.guid||(p.guid=jQuery.guid++)),t.each((function(){jQuery.event.add(this,n,l,u,i)}))}function leverageNative(t,n,i){i?(z.set(t,n,!1),jQuery.event.add(t,n,{namespace:!1,handler:function(t){var u,l,d=z.get(this,n);if(1&t.isTrigger&&this[n]){if(d.length)(jQuery.event.special[n]||{}).delegateType&&t.stopPropagation();else if(d=h.call(arguments),z.set(this,n,d),u=i(this,n),this[n](),d!==(l=z.get(this,n))||u?z.set(this,n,!1):l={},d!==l)return t.stopImmediatePropagation(),t.preventDefault(),l&&l.value}else d.length&&(z.set(this,n,{value:jQuery.event.trigger(jQuery.extend(d[0],jQuery.Event.prototype),d.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===z.get(t,n)&&jQuery.event.add(t,n,returnTrue)}jQuery.event={global:{},add:function(t,n,i,u,l){var d,p,h,g,v,y,S,E,w,A,T,R=z.get(t);if(acceptData(t))for(i.handler&&(i=(d=i).handler,l=d.selector),l&&jQuery.find.matchesSelector(K,l),i.guid||(i.guid=jQuery.guid++),(g=R.events)||(g=R.events=Object.create(null)),(p=R.handle)||(p=R.handle=function(n){return void 0!==jQuery&&jQuery.event.triggered!==n.type?jQuery.event.dispatch.apply(t,arguments):void 0}),v=(n=(n||"").match(U)||[""]).length;v--;)w=T=(h=ue.exec(n[v])||[])[1],A=(h[2]||"").split(".").sort(),w&&(S=jQuery.event.special[w]||{},w=(l?S.delegateType:S.bindType)||w,S=jQuery.event.special[w]||{},y=jQuery.extend({type:w,origType:T,data:u,handler:i,guid:i.guid,selector:l,needsContext:l&&jQuery.expr.match.needsContext.test(l),namespace:A.join(".")},d),(E=g[w])||((E=g[w]=[]).delegateCount=0,S.setup&&!1!==S.setup.call(t,u,A,p)||t.addEventListener&&t.addEventListener(w,p)),S.add&&(S.add.call(t,y),y.handler.guid||(y.handler.guid=i.guid)),l?E.splice(E.delegateCount++,0,y):E.push(y),jQuery.event.global[w]=!0)},remove:function(t,n,i,u,l){var d,p,h,g,v,y,S,E,w,A,T,R=z.hasData(t)&&z.get(t);if(R&&(g=R.events)){for(v=(n=(n||"").match(U)||[""]).length;v--;)if(w=T=(h=ue.exec(n[v])||[])[1],A=(h[2]||"").split(".").sort(),w){for(S=jQuery.event.special[w]||{},E=g[w=(u?S.delegateType:S.bindType)||w]||[],h=h[2]&&new RegExp("(^|\\.)"+A.join("\\.(?:.*\\.|)")+"(\\.|$)"),p=d=E.length;d--;)y=E[d],!l&&T!==y.origType||i&&i.guid!==y.guid||h&&!h.test(y.namespace)||u&&u!==y.selector&&("**"!==u||!y.selector)||(E.splice(d,1),y.selector&&E.delegateCount--,S.remove&&S.remove.call(t,y));p&&!E.length&&(S.teardown&&!1!==S.teardown.call(t,A,R.handle)||jQuery.removeEvent(t,w,R.handle),delete g[w])}else for(w in g)jQuery.event.remove(t,w+n[v],i,u,!0);jQuery.isEmptyObject(g)&&z.remove(t,"handle events")}},dispatch:function(t){var n,i,u,l,d,p,h=new Array(arguments.length),g=jQuery.event.fix(t),v=(z.get(this,"events")||Object.create(null))[g.type]||[],y=jQuery.event.special[g.type]||{};for(h[0]=g,n=1;n<arguments.length;n++)h[n]=arguments[n];if(g.delegateTarget=this,!y.preDispatch||!1!==y.preDispatch.call(this,g)){for(p=jQuery.event.handlers.call(this,g,v),n=0;(l=p[n++])&&!g.isPropagationStopped();)for(g.currentTarget=l.elem,i=0;(d=l.handlers[i++])&&!g.isImmediatePropagationStopped();)g.rnamespace&&!1!==d.namespace&&!g.rnamespace.test(d.namespace)||(g.handleObj=d,g.data=d.data,void 0!==(u=((jQuery.event.special[d.origType]||{}).handle||d.handler).apply(l.elem,h))&&!1===(g.result=u)&&(g.preventDefault(),g.stopPropagation()));return y.postDispatch&&y.postDispatch.call(this,g),g.result}},handlers:function(t,n){var i,u,l,d,p,h=[],g=n.delegateCount,v=t.target;if(g&&v.nodeType&&!("click"===t.type&&t.button>=1))for(;v!==this;v=v.parentNode||this)if(1===v.nodeType&&("click"!==t.type||!0!==v.disabled)){for(d=[],p={},i=0;i<g;i++)void 0===p[l=(u=n[i]).selector+" "]&&(p[l]=u.needsContext?jQuery(l,this).index(v)>-1:jQuery.find(l,this,null,[v]).length),p[l]&&d.push(u);d.length&&h.push({elem:v,handlers:d})}return v=this,g<n.length&&h.push({elem:v,handlers:n.slice(g)}),h},addProp:function(t,n){Object.defineProperty(jQuery.Event.prototype,t,{enumerable:!0,configurable:!0,get:x(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(n){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:n})}})},fix:function(t){return t[jQuery.expando]?t:new jQuery.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var n=this||t;return ie.test(n.type)&&n.click&&nodeName(n,"input")&&leverageNative(n,"click",returnTrue),!1},trigger:function(t){var n=this||t;return ie.test(n.type)&&n.click&&nodeName(n,"input")&&leverageNative(n,"click"),!0},_default:function(t){var n=t.target;return ie.test(n.type)&&n.click&&nodeName(n,"input")&&z.get(n,"click")||nodeName(n,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},jQuery.removeEvent=function(t,n,i){t.removeEventListener&&t.removeEventListener(n,i)},jQuery.Event=function(t,n){if(!(this instanceof jQuery.Event))return new jQuery.Event(t,n);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?returnTrue:returnFalse,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&jQuery.extend(this,n),this.timeStamp=t&&t.timeStamp||Date.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=returnTrue,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=returnTrue,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},jQuery.event.addProp),jQuery.each({focus:"focusin",blur:"focusout"},(function(t,n){jQuery.event.special[t]={setup:function(){return leverageNative(this,t,expectSync),!1},trigger:function(){return leverageNative(this,t),!0},_default:function(){return!0},delegateType:n}})),jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,n){jQuery.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,u=this,l=t.relatedTarget,d=t.handleObj;return l&&(l===u||jQuery.contains(u,l))||(t.type=d.origType,i=d.handler.apply(this,arguments),t.type=n),i}}})),jQuery.fn.extend({on:function(t,n,i,u){return on(this,t,n,i,u)},one:function(t,n,i,u){return on(this,t,n,i,u,1)},off:function(t,n,i){var u,l;if(t&&t.preventDefault&&t.handleObj)return u=t.handleObj,jQuery(t.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof t){for(l in t)this.off(l,n,t[l]);return this}return!1!==n&&"function"!=typeof n||(i=n,n=void 0),!1===i&&(i=returnFalse),this.each((function(){jQuery.event.remove(this,t,i,n)}))}});var le=/<script|<style|<link/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(t,n){return nodeName(t,"table")&&nodeName(11!==n.nodeType?n:n.firstChild,"tr")&&jQuery(t).children("tbody")[0]||t}function disableScript(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function restoreScript(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function cloneCopyEvent(t,n){var i,u,l,d,p,h;if(1===n.nodeType){if(z.hasData(t)&&(h=z.get(t).events))for(l in z.remove(n,"handle events"),h)for(i=0,u=h[l].length;i<u;i++)jQuery.event.add(n,l,h[l][i]);G.hasData(t)&&(d=G.access(t),p=jQuery.extend({},d),G.set(n,p))}}function fixInput(t,n){var i=n.nodeName.toLowerCase();"input"===i&&ie.test(t.type)?n.checked=t.checked:"input"!==i&&"textarea"!==i||(n.defaultValue=t.defaultValue)}function domManip(t,n,i,u){n=g(n);var l,d,p,h,v,y,S=0,E=t.length,w=E-1,A=n[0],T=x(A);if(T||E>1&&"string"==typeof A&&!R.checkClone&&ce.test(A))return t.each((function(l){var d=t.eq(l);T&&(n[0]=A.call(this,l,d.html())),domManip(d,n,i,u)}));if(E&&(d=(l=buildFragment(n,t[0].ownerDocument,!1,t,u)).firstChild,1===l.childNodes.length&&(l=d),d||u)){for(h=(p=jQuery.map(getAll(l,"script"),disableScript)).length;S<E;S++)v=l,S!==w&&(v=jQuery.clone(v,!0,!0),h&&jQuery.merge(p,getAll(v,"script"))),i.call(t[S],v,S);if(h)for(y=p[p.length-1].ownerDocument,jQuery.map(p,restoreScript),S=0;S<h;S++)v=p[S],ae.test(v.type||"")&&!z.access(v,"globalEval")&&jQuery.contains(y,v)&&(v.src&&"module"!==(v.type||"").toLowerCase()?jQuery._evalUrl&&!v.noModule&&jQuery._evalUrl(v.src,{nonce:v.nonce||v.getAttribute("nonce")},y):DOMEval(v.textContent.replace(de,""),v,y))}return t}function remove(t,n,i){for(var u,l=n?jQuery.filter(n,t):t,d=0;null!=(u=l[d]);d++)i||1!==u.nodeType||jQuery.cleanData(getAll(u)),u.parentNode&&(i&&isAttached(u)&&setGlobalEval(getAll(u,"script")),u.parentNode.removeChild(u));return t}jQuery.extend({htmlPrefilter:function(t){return t},clone:function(t,n,i){var u,l,d,p,h=t.cloneNode(!0),g=isAttached(t);if(!(R.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||jQuery.isXMLDoc(t)))for(p=getAll(h),u=0,l=(d=getAll(t)).length;u<l;u++)fixInput(d[u],p[u]);if(n)if(i)for(d=d||getAll(t),p=p||getAll(h),u=0,l=d.length;u<l;u++)cloneCopyEvent(d[u],p[u]);else cloneCopyEvent(t,h);return(p=getAll(h,"script")).length>0&&setGlobalEval(p,!g&&getAll(t,"script")),h},cleanData:function(t){for(var n,i,u,l=jQuery.event.special,d=0;void 0!==(i=t[d]);d++)if(acceptData(i)){if(n=i[z.expando]){if(n.events)for(u in n.events)l[u]?jQuery.event.remove(i,u):jQuery.removeEvent(i,u,n.handle);i[z.expando]=void 0}i[G.expando]&&(i[G.expando]=void 0)}}}),jQuery.fn.extend({detach:function(t){return remove(this,t,!0)},remove:function(t){return remove(this,t)},text:function(t){return access(this,(function(t){return void 0===t?jQuery.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return domManip(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,t).appendChild(t)}))},prepend:function(){return domManip(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var n=manipulationTarget(this,t);n.insertBefore(t,n.firstChild)}}))},before:function(){return domManip(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return domManip(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,n=0;null!=(t=this[n]);n++)1===t.nodeType&&(jQuery.cleanData(getAll(t,!1)),t.textContent="");return this},clone:function(t,n){return t=null!=t&&t,n=null==n?t:n,this.map((function(){return jQuery.clone(this,t,n)}))},html:function(t){return access(this,(function(t){var n=this[0]||{},i=0,u=this.length;if(void 0===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!le.test(t)&&!se[(re.exec(t)||["",""])[1].toLowerCase()]){t=jQuery.htmlPrefilter(t);try{for(;i<u;i++)1===(n=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(n,!1)),n.innerHTML=t);n=0}catch(t){}}n&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return domManip(this,arguments,(function(n){var i=this.parentNode;jQuery.inArray(this,t)<0&&(jQuery.cleanData(getAll(this)),i&&i.replaceChild(n,this))}),t)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,n){jQuery.fn[t]=function(t){for(var i,u=[],l=jQuery(t),d=l.length-1,p=0;p<=d;p++)i=p===d?this:this.clone(!0),jQuery(l[p])[n](i),v.apply(u,i.get());return this.pushStack(u)}}));var pe=new RegExp("^("+Y+")(?!px)[a-z%]+$","i"),getStyles=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=i),n.getComputedStyle(t)},swap=function(t,n,i){var u,l,d={};for(l in n)d[l]=t.style[l],t.style[l]=n[l];for(l in u=i.call(t),n)t.style[l]=d[l];return u},he=new RegExp(X.join("|"),"i");function curCSS(t,n,i){var u,l,d,p,h=t.style;return(i=i||getStyles(t))&&(""!==(p=i.getPropertyValue(n)||i[n])||isAttached(t)||(p=jQuery.style(t,n)),!R.pixelBoxStyles()&&pe.test(p)&&he.test(n)&&(u=h.width,l=h.minWidth,d=h.maxWidth,h.minWidth=h.maxWidth=h.width=p,p=i.width,h.width=u,h.minWidth=l,h.maxWidth=d)),void 0!==p?p+"":p}function addGetHookIf(t,n){return{get:function(){if(!t())return(this.get=n).apply(this,arguments);delete this.get}}}!function(){function computeStyleTests(){if(g){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",g.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",K.appendChild(h).appendChild(g);var d=i.getComputedStyle(g);t="1%"!==d.top,p=12===roundPixelMeasures(d.marginLeft),g.style.right="60%",l=36===roundPixelMeasures(d.right),n=36===roundPixelMeasures(d.width),g.style.position="absolute",u=12===roundPixelMeasures(g.offsetWidth/3),K.removeChild(h),g=null}}function roundPixelMeasures(t){return Math.round(parseFloat(t))}var t,n,u,l,d,p,h=I.createElement("div"),g=I.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",R.clearCloneStyle="content-box"===g.style.backgroundClip,jQuery.extend(R,{boxSizingReliable:function(){return computeStyleTests(),n},pixelBoxStyles:function(){return computeStyleTests(),l},pixelPosition:function(){return computeStyleTests(),t},reliableMarginLeft:function(){return computeStyleTests(),p},scrollboxSize:function(){return computeStyleTests(),u},reliableTrDimensions:function(){var t,n,u,l;return null==d&&(t=I.createElement("table"),n=I.createElement("tr"),u=I.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",u.style.height="9px",u.style.display="block",K.appendChild(t).appendChild(n).appendChild(u),l=i.getComputedStyle(n),d=parseInt(l.height,10)+parseInt(l.borderTopWidth,10)+parseInt(l.borderBottomWidth,10)===n.offsetHeight,K.removeChild(t)),d}}))}();var fe=["Webkit","Moz","ms"],ge=I.createElement("div").style,me={};function finalPropName(t){var n=jQuery.cssProps[t]||me[t];return n||(t in ge?t:me[t]=function vendorPropName(t){for(var n=t[0].toUpperCase()+t.slice(1),i=fe.length;i--;)if((t=fe[i]+n)in ge)return t}(t)||t)}var ve=/^(none|table(?!-c[ea]).+)/,ye=/^--/,be={position:"absolute",visibility:"hidden",display:"block"},Se={letterSpacing:"0",fontWeight:"400"};function setPositiveNumber(t,n,i){var u=J.exec(n);return u?Math.max(0,u[2]-(i||0))+(u[3]||"px"):n}function boxModelAdjustment(t,n,i,u,l,d){var p="width"===n?1:0,h=0,g=0;if(i===(u?"border":"content"))return 0;for(;p<4;p+=2)"margin"===i&&(g+=jQuery.css(t,i+X[p],!0,l)),u?("content"===i&&(g-=jQuery.css(t,"padding"+X[p],!0,l)),"margin"!==i&&(g-=jQuery.css(t,"border"+X[p]+"Width",!0,l))):(g+=jQuery.css(t,"padding"+X[p],!0,l),"padding"!==i?g+=jQuery.css(t,"border"+X[p]+"Width",!0,l):h+=jQuery.css(t,"border"+X[p]+"Width",!0,l));return!u&&d>=0&&(g+=Math.max(0,Math.ceil(t["offset"+n[0].toUpperCase()+n.slice(1)]-d-g-h-.5))||0),g}function getWidthOrHeight(t,n,i){var u=getStyles(t),l=(!R.boxSizingReliable()||i)&&"border-box"===jQuery.css(t,"boxSizing",!1,u),d=l,p=curCSS(t,n,u),h="offset"+n[0].toUpperCase()+n.slice(1);if(pe.test(p)){if(!i)return p;p="auto"}return(!R.boxSizingReliable()&&l||!R.reliableTrDimensions()&&nodeName(t,"tr")||"auto"===p||!parseFloat(p)&&"inline"===jQuery.css(t,"display",!1,u))&&t.getClientRects().length&&(l="border-box"===jQuery.css(t,"boxSizing",!1,u),(d=h in t)&&(p=t[h])),(p=parseFloat(p)||0)+boxModelAdjustment(t,n,i||(l?"border":"content"),d,u,p)+"px"}function Tween(t,n,i,u,l){return new Tween.prototype.init(t,n,i,u,l)}jQuery.extend({cssHooks:{opacity:{get:function(t,n){if(n){var i=curCSS(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,n,i,u){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var l,d,p,h=camelCase(n),g=ye.test(n),v=t.style;if(g||(n=finalPropName(h)),p=jQuery.cssHooks[n]||jQuery.cssHooks[h],void 0===i)return p&&"get"in p&&void 0!==(l=p.get(t,!1,u))?l:v[n];"string"===(d=typeof i)&&(l=J.exec(i))&&l[1]&&(i=adjustCSS(t,n,l),d="number"),null!=i&&i==i&&("number"!==d||g||(i+=l&&l[3]||(jQuery.cssNumber[h]?"":"px")),R.clearCloneStyle||""!==i||0!==n.indexOf("background")||(v[n]="inherit"),p&&"set"in p&&void 0===(i=p.set(t,i,u))||(g?v.setProperty(n,i):v[n]=i))}},css:function(t,n,i,u){var l,d,p,h=camelCase(n);return ye.test(n)||(n=finalPropName(h)),(p=jQuery.cssHooks[n]||jQuery.cssHooks[h])&&"get"in p&&(l=p.get(t,!0,i)),void 0===l&&(l=curCSS(t,n,u)),"normal"===l&&n in Se&&(l=Se[n]),""===i||i?(d=parseFloat(l),!0===i||isFinite(d)?d||0:l):l}}),jQuery.each(["height","width"],(function(t,n){jQuery.cssHooks[n]={get:function(t,i,u){if(i)return!ve.test(jQuery.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?getWidthOrHeight(t,n,u):swap(t,be,(function(){return getWidthOrHeight(t,n,u)}))},set:function(t,i,u){var l,d=getStyles(t),p=!R.scrollboxSize()&&"absolute"===d.position,h=(p||u)&&"border-box"===jQuery.css(t,"boxSizing",!1,d),g=u?boxModelAdjustment(t,n,u,h,d):0;return h&&p&&(g-=Math.ceil(t["offset"+n[0].toUpperCase()+n.slice(1)]-parseFloat(d[n])-boxModelAdjustment(t,n,"border",!1,d)-.5)),g&&(l=J.exec(i))&&"px"!==(l[3]||"px")&&(t.style[n]=i,i=jQuery.css(t,n)),setPositiveNumber(0,i,g)}}})),jQuery.cssHooks.marginLeft=addGetHookIf(R.reliableMarginLeft,(function(t,n){if(n)return(parseFloat(curCSS(t,"marginLeft"))||t.getBoundingClientRect().left-swap(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),jQuery.each({margin:"",padding:"",border:"Width"},(function(t,n){jQuery.cssHooks[t+n]={expand:function(i){for(var u=0,l={},d="string"==typeof i?i.split(" "):[i];u<4;u++)l[t+X[u]+n]=d[u]||d[u-2]||d[0];return l}},"margin"!==t&&(jQuery.cssHooks[t+n].set=setPositiveNumber)})),jQuery.fn.extend({css:function(t,n){return access(this,(function(t,n,i){var u,l,d={},p=0;if(Array.isArray(n)){for(u=getStyles(t),l=n.length;p<l;p++)d[n[p]]=jQuery.css(t,n[p],!1,u);return d}return void 0!==i?jQuery.style(t,n,i):jQuery.css(t,n)}),t,n,arguments.length>1)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(t,n,i,u,l,d){this.elem=t,this.prop=i,this.easing=l||jQuery.easing._default,this.options=n,this.start=this.now=this.cur(),this.end=u,this.unit=d||(jQuery.cssNumber[i]?"":"px")},cur:function(){var t=Tween.propHooks[this.prop];return t&&t.get?t.get(this):Tween.propHooks._default.get(this)},run:function(t){var n,i=Tween.propHooks[this.prop];return this.options.duration?this.pos=n=jQuery.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=n=t,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(t){var n;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(n=jQuery.css(t.elem,t.prop,""))&&"auto"!==n?n:0},set:function(t){jQuery.fx.step[t.prop]?jQuery.fx.step[t.prop](t):1!==t.elem.nodeType||!jQuery.cssHooks[t.prop]&&null==t.elem.style[finalPropName(t.prop)]?t.elem[t.prop]=t.now:jQuery.style(t.elem,t.prop,t.now+t.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},jQuery.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var Ee,we,_e=/^(?:toggle|show|hide)$/,Ae=/queueHooks$/;function schedule(){we&&(!1===I.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(schedule):i.setTimeout(schedule,jQuery.fx.interval),jQuery.fx.tick())}function createFxNow(){return i.setTimeout((function(){Ee=void 0})),Ee=Date.now()}function genFx(t,n){var i,u=0,l={height:t};for(n=n?1:0;u<4;u+=2-n)l["margin"+(i=X[u])]=l["padding"+i]=t;return n&&(l.opacity=l.width=t),l}function createTween(t,n,i){for(var u,l=(Animation.tweeners[n]||[]).concat(Animation.tweeners["*"]),d=0,p=l.length;d<p;d++)if(u=l[d].call(i,n,t))return u}function Animation(t,n,i){var u,l,d=0,p=Animation.prefilters.length,h=jQuery.Deferred().always((function(){delete tick.elem})),tick=function(){if(l)return!1;for(var n=Ee||createFxNow(),i=Math.max(0,g.startTime+g.duration-n),u=1-(i/g.duration||0),d=0,p=g.tweens.length;d<p;d++)g.tweens[d].run(u);return h.notifyWith(t,[g,u,i]),u<1&&p?i:(p||h.notifyWith(t,[g,1,0]),h.resolveWith(t,[g]),!1)},g=h.promise({elem:t,props:jQuery.extend({},n),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},i),originalProperties:n,originalOptions:i,startTime:Ee||createFxNow(),duration:i.duration,tweens:[],createTween:function(n,i){var u=jQuery.Tween(t,g.opts,n,i,g.opts.specialEasing[n]||g.opts.easing);return g.tweens.push(u),u},stop:function(n){var i=0,u=n?g.tweens.length:0;if(l)return this;for(l=!0;i<u;i++)g.tweens[i].run(1);return n?(h.notifyWith(t,[g,1,0]),h.resolveWith(t,[g,n])):h.rejectWith(t,[g,n]),this}}),v=g.props;for(!function propFilter(t,n){var i,u,l,d,p;for(i in t)if(l=n[u=camelCase(i)],d=t[i],Array.isArray(d)&&(l=d[1],d=t[i]=d[0]),i!==u&&(t[u]=d,delete t[i]),(p=jQuery.cssHooks[u])&&"expand"in p)for(i in d=p.expand(d),delete t[u],d)i in t||(t[i]=d[i],n[i]=l);else n[u]=l}(v,g.opts.specialEasing);d<p;d++)if(u=Animation.prefilters[d].call(g,t,v,g.opts))return x(u.stop)&&(jQuery._queueHooks(g.elem,g.opts.queue).stop=u.stop.bind(u)),u;return jQuery.map(v,createTween,g),x(g.opts.start)&&g.opts.start.call(t,g),g.progress(g.opts.progress).done(g.opts.done,g.opts.complete).fail(g.opts.fail).always(g.opts.always),jQuery.fx.timer(jQuery.extend(tick,{elem:t,anim:g,queue:g.opts.queue})),g}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(t,n){var i=this.createTween(t,n);return adjustCSS(i.elem,t,J.exec(n),i),i}]},tweener:function(t,n){x(t)?(n=t,t=["*"]):t=t.match(U);for(var i,u=0,l=t.length;u<l;u++)i=t[u],Animation.tweeners[i]=Animation.tweeners[i]||[],Animation.tweeners[i].unshift(n)},prefilters:[function defaultPrefilter(t,n,i){var u,l,d,p,h,g,v,y,S="width"in n||"height"in n,E=this,w={},A=t.style,T=t.nodeType&&isHiddenWithinTree(t),R=z.get(t,"fxshow");for(u in i.queue||(null==(p=jQuery._queueHooks(t,"fx")).unqueued&&(p.unqueued=0,h=p.empty.fire,p.empty.fire=function(){p.unqueued||h()}),p.unqueued++,E.always((function(){E.always((function(){p.unqueued--,jQuery.queue(t,"fx").length||p.empty.fire()}))}))),n)if(l=n[u],_e.test(l)){if(delete n[u],d=d||"toggle"===l,l===(T?"hide":"show")){if("show"!==l||!R||void 0===R[u])continue;T=!0}w[u]=R&&R[u]||jQuery.style(t,u)}if((g=!jQuery.isEmptyObject(n))||!jQuery.isEmptyObject(w))for(u in S&&1===t.nodeType&&(i.overflow=[A.overflow,A.overflowX,A.overflowY],null==(v=R&&R.display)&&(v=z.get(t,"display")),"none"===(y=jQuery.css(t,"display"))&&(v?y=v:(showHide([t],!0),v=t.style.display||v,y=jQuery.css(t,"display"),showHide([t]))),("inline"===y||"inline-block"===y&&null!=v)&&"none"===jQuery.css(t,"float")&&(g||(E.done((function(){A.display=v})),null==v&&(y=A.display,v="none"===y?"":y)),A.display="inline-block")),i.overflow&&(A.overflow="hidden",E.always((function(){A.overflow=i.overflow[0],A.overflowX=i.overflow[1],A.overflowY=i.overflow[2]}))),g=!1,w)g||(R?"hidden"in R&&(T=R.hidden):R=z.access(t,"fxshow",{display:v}),d&&(R.hidden=!T),T&&showHide([t],!0),E.done((function(){for(u in T||showHide([t]),z.remove(t,"fxshow"),w)jQuery.style(t,u,w[u])}))),g=createTween(T?R[u]:0,u,E),u in R||(R[u]=g.start,T&&(g.end=g.start,g.start=0))}],prefilter:function(t,n){n?Animation.prefilters.unshift(t):Animation.prefilters.push(t)}}),jQuery.speed=function(t,n,i){var u=t&&"object"==typeof t?jQuery.extend({},t):{complete:i||!i&&n||x(t)&&t,duration:t,easing:i&&n||n&&!x(n)&&n};return jQuery.fx.off?u.duration=0:"number"!=typeof u.duration&&(u.duration in jQuery.fx.speeds?u.duration=jQuery.fx.speeds[u.duration]:u.duration=jQuery.fx.speeds._default),null!=u.queue&&!0!==u.queue||(u.queue="fx"),u.old=u.complete,u.complete=function(){x(u.old)&&u.old.call(this),u.queue&&jQuery.dequeue(this,u.queue)},u},jQuery.fn.extend({fadeTo:function(t,n,i,u){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:n},t,i,u)},animate:function(t,n,i,u){var l=jQuery.isEmptyObject(t),d=jQuery.speed(n,i,u),doAnimation=function(){var n=Animation(this,jQuery.extend({},t),d);(l||z.get(this,"finish"))&&n.stop(!0)};return doAnimation.finish=doAnimation,l||!1===d.queue?this.each(doAnimation):this.queue(d.queue,doAnimation)},stop:function(t,n,i){var stopQueue=function(t){var n=t.stop;delete t.stop,n(i)};return"string"!=typeof t&&(i=n,n=t,t=void 0),n&&this.queue(t||"fx",[]),this.each((function(){var n=!0,u=null!=t&&t+"queueHooks",l=jQuery.timers,d=z.get(this);if(u)d[u]&&d[u].stop&&stopQueue(d[u]);else for(u in d)d[u]&&d[u].stop&&Ae.test(u)&&stopQueue(d[u]);for(u=l.length;u--;)l[u].elem!==this||null!=t&&l[u].queue!==t||(l[u].anim.stop(i),n=!1,l.splice(u,1));!n&&i||jQuery.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var n,i=z.get(this),u=i[t+"queue"],l=i[t+"queueHooks"],d=jQuery.timers,p=u?u.length:0;for(i.finish=!0,jQuery.queue(this,t,[]),l&&l.stop&&l.stop.call(this,!0),n=d.length;n--;)d[n].elem===this&&d[n].queue===t&&(d[n].anim.stop(!0),d.splice(n,1));for(n=0;n<p;n++)u[n]&&u[n].finish&&u[n].finish.call(this);delete i.finish}))}}),jQuery.each(["toggle","show","hide"],(function(t,n){var i=jQuery.fn[n];jQuery.fn[n]=function(t,u,l){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(genFx(n,!0),t,u,l)}})),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,n){jQuery.fn[t]=function(t,i,u){return this.animate(n,t,i,u)}})),jQuery.timers=[],jQuery.fx.tick=function(){var t,n=0,i=jQuery.timers;for(Ee=Date.now();n<i.length;n++)(t=i[n])()||i[n]!==t||i.splice(n--,1);i.length||jQuery.fx.stop(),Ee=void 0},jQuery.fx.timer=function(t){jQuery.timers.push(t),jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){we||(we=!0,schedule())},jQuery.fx.stop=function(){we=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(t,n){return t=jQuery.fx&&jQuery.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,u){var l=i.setTimeout(n,t);u.stop=function(){i.clearTimeout(l)}}))},function(){var t=I.createElement("input"),n=I.createElement("select").appendChild(I.createElement("option"));t.type="checkbox",R.checkOn=""!==t.value,R.optSelected=n.selected,(t=I.createElement("input")).value="t",t.type="radio",R.radioValue="t"===t.value}();var Te,Re=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(t,n){return access(this,jQuery.attr,t,n,arguments.length>1)},removeAttr:function(t){return this.each((function(){jQuery.removeAttr(this,t)}))}}),jQuery.extend({attr:function(t,n,i){var u,l,d=t.nodeType;if(3!==d&&8!==d&&2!==d)return void 0===t.getAttribute?jQuery.prop(t,n,i):(1===d&&jQuery.isXMLDoc(t)||(l=jQuery.attrHooks[n.toLowerCase()]||(jQuery.expr.match.bool.test(n)?Te:void 0)),void 0!==i?null===i?void jQuery.removeAttr(t,n):l&&"set"in l&&void 0!==(u=l.set(t,i,n))?u:(t.setAttribute(n,i+""),i):l&&"get"in l&&null!==(u=l.get(t,n))?u:null==(u=jQuery.find.attr(t,n))?void 0:u)},attrHooks:{type:{set:function(t,n){if(!R.radioValue&&"radio"===n&&nodeName(t,"input")){var i=t.value;return t.setAttribute("type",n),i&&(t.value=i),n}}}},removeAttr:function(t,n){var i,u=0,l=n&&n.match(U);if(l&&1===t.nodeType)for(;i=l[u++];)t.removeAttribute(i)}}),Te={set:function(t,n,i){return!1===n?jQuery.removeAttr(t,i):t.setAttribute(i,i),i}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),(function(t,n){var i=Re[n]||jQuery.find.attr;Re[n]=function(t,n,u){var l,d,p=n.toLowerCase();return u||(d=Re[p],Re[p]=l,l=null!=i(t,n,u)?p:null,Re[p]=d),l}}));var xe=/^(?:input|select|textarea|button)$/i,Ce=/^(?:a|area)$/i;function stripAndCollapse(t){return(t.match(U)||[]).join(" ")}function getClass(t){return t.getAttribute&&t.getAttribute("class")||""}function classesToArray(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(U)||[]}jQuery.fn.extend({prop:function(t,n){return access(this,jQuery.prop,t,n,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[jQuery.propFix[t]||t]}))}}),jQuery.extend({prop:function(t,n,i){var u,l,d=t.nodeType;if(3!==d&&8!==d&&2!==d)return 1===d&&jQuery.isXMLDoc(t)||(n=jQuery.propFix[n]||n,l=jQuery.propHooks[n]),void 0!==i?l&&"set"in l&&void 0!==(u=l.set(t,i,n))?u:t[n]=i:l&&"get"in l&&null!==(u=l.get(t,n))?u:t[n]},propHooks:{tabIndex:{get:function(t){var n=jQuery.find.attr(t,"tabindex");return n?parseInt(n,10):xe.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),R.optSelected||(jQuery.propHooks.selected={get:function(t){var n=t.parentNode;return n&&n.parentNode&&n.parentNode.selectedIndex,null},set:function(t){var n=t.parentNode;n&&(n.selectedIndex,n.parentNode&&n.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){jQuery.propFix[this.toLowerCase()]=this})),jQuery.fn.extend({addClass:function(t){var n,i,u,l,d,p,h,g=0;if(x(t))return this.each((function(n){jQuery(this).addClass(t.call(this,n,getClass(this)))}));if((n=classesToArray(t)).length)for(;i=this[g++];)if(l=getClass(i),u=1===i.nodeType&&" "+stripAndCollapse(l)+" "){for(p=0;d=n[p++];)u.indexOf(" "+d+" ")<0&&(u+=d+" ");l!==(h=stripAndCollapse(u))&&i.setAttribute("class",h)}return this},removeClass:function(t){var n,i,u,l,d,p,h,g=0;if(x(t))return this.each((function(n){jQuery(this).removeClass(t.call(this,n,getClass(this)))}));if(!arguments.length)return this.attr("class","");if((n=classesToArray(t)).length)for(;i=this[g++];)if(l=getClass(i),u=1===i.nodeType&&" "+stripAndCollapse(l)+" "){for(p=0;d=n[p++];)for(;u.indexOf(" "+d+" ")>-1;)u=u.replace(" "+d+" "," ");l!==(h=stripAndCollapse(u))&&i.setAttribute("class",h)}return this},toggleClass:function(t,n){var i=typeof t,u="string"===i||Array.isArray(t);return"boolean"==typeof n&&u?n?this.addClass(t):this.removeClass(t):x(t)?this.each((function(i){jQuery(this).toggleClass(t.call(this,i,getClass(this),n),n)})):this.each((function(){var n,l,d,p;if(u)for(l=0,d=jQuery(this),p=classesToArray(t);n=p[l++];)d.hasClass(n)?d.removeClass(n):d.addClass(n);else void 0!==t&&"boolean"!==i||((n=getClass(this))&&z.set(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===t?"":z.get(this,"__className__")||""))}))},hasClass:function(t){var n,i,u=0;for(n=" "+t+" ";i=this[u++];)if(1===i.nodeType&&(" "+stripAndCollapse(getClass(i))+" ").indexOf(n)>-1)return!0;return!1}});var Ie=/\r/g;jQuery.fn.extend({val:function(t){var n,i,u,l=this[0];return arguments.length?(u=x(t),this.each((function(i){var l;1===this.nodeType&&(null==(l=u?t.call(this,i,jQuery(this).val()):t)?l="":"number"==typeof l?l+="":Array.isArray(l)&&(l=jQuery.map(l,(function(t){return null==t?"":t+""}))),(n=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,l,"value")||(this.value=l))}))):l?(n=jQuery.valHooks[l.type]||jQuery.valHooks[l.nodeName.toLowerCase()])&&"get"in n&&void 0!==(i=n.get(l,"value"))?i:"string"==typeof(i=l.value)?i.replace(Ie,""):null==i?"":i:void 0}}),jQuery.extend({valHooks:{option:{get:function(t){var n=jQuery.find.attr(t,"value");return null!=n?n:stripAndCollapse(jQuery.text(t))}},select:{get:function(t){var n,i,u,l=t.options,d=t.selectedIndex,p="select-one"===t.type,h=p?null:[],g=p?d+1:l.length;for(u=d<0?g:p?d:0;u<g;u++)if(((i=l[u]).selected||u===d)&&!i.disabled&&(!i.parentNode.disabled||!nodeName(i.parentNode,"optgroup"))){if(n=jQuery(i).val(),p)return n;h.push(n)}return h},set:function(t,n){for(var i,u,l=t.options,d=jQuery.makeArray(n),p=l.length;p--;)((u=l[p]).selected=jQuery.inArray(jQuery.valHooks.option.get(u),d)>-1)&&(i=!0);return i||(t.selectedIndex=-1),d}}}}),jQuery.each(["radio","checkbox"],(function(){jQuery.valHooks[this]={set:function(t,n){if(Array.isArray(n))return t.checked=jQuery.inArray(jQuery(t).val(),n)>-1}},R.checkOn||(jQuery.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),R.focusin="onfocusin"in i;var Me=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function(t){t.stopPropagation()};jQuery.extend(jQuery.event,{trigger:function(t,n,u,l){var d,p,h,g,v,y,S,E,A=[u||I],T=w.call(t,"type")?t.type:t,R=w.call(t,"namespace")?t.namespace.split("."):[];if(p=E=h=u=u||I,3!==u.nodeType&&8!==u.nodeType&&!Me.test(T+jQuery.event.triggered)&&(T.indexOf(".")>-1&&(R=T.split("."),T=R.shift(),R.sort()),v=T.indexOf(":")<0&&"on"+T,(t=t[jQuery.expando]?t:new jQuery.Event(T,"object"==typeof t&&t)).isTrigger=l?2:3,t.namespace=R.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+R.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=u),n=null==n?[t]:jQuery.makeArray(n,[t]),S=jQuery.event.special[T]||{},l||!S.trigger||!1!==S.trigger.apply(u,n))){if(!l&&!S.noBubble&&!C(u)){for(g=S.delegateType||T,Me.test(g+T)||(p=p.parentNode);p;p=p.parentNode)A.push(p),h=p;h===(u.ownerDocument||I)&&A.push(h.defaultView||h.parentWindow||i)}for(d=0;(p=A[d++])&&!t.isPropagationStopped();)E=p,t.type=d>1?g:S.bindType||T,(y=(z.get(p,"events")||Object.create(null))[t.type]&&z.get(p,"handle"))&&y.apply(p,n),(y=v&&p[v])&&y.apply&&acceptData(p)&&(t.result=y.apply(p,n),!1===t.result&&t.preventDefault());return t.type=T,l||t.isDefaultPrevented()||S._default&&!1!==S._default.apply(A.pop(),n)||!acceptData(u)||v&&x(u[T])&&!C(u)&&((h=u[v])&&(u[v]=null),jQuery.event.triggered=T,t.isPropagationStopped()&&E.addEventListener(T,stopPropagationCallback),u[T](),t.isPropagationStopped()&&E.removeEventListener(T,stopPropagationCallback),jQuery.event.triggered=void 0,h&&(u[v]=h)),t.result}},simulate:function(t,n,i){var u=jQuery.extend(new jQuery.Event,i,{type:t,isSimulated:!0});jQuery.event.trigger(u,null,n)}}),jQuery.fn.extend({trigger:function(t,n){return this.each((function(){jQuery.event.trigger(t,n,this)}))},triggerHandler:function(t,n){var i=this[0];if(i)return jQuery.event.trigger(t,n,i,!0)}}),R.focusin||jQuery.each({focus:"focusin",blur:"focusout"},(function(t,n){var handler=function(t){jQuery.event.simulate(n,t.target,jQuery.event.fix(t))};jQuery.event.special[n]={setup:function(){var i=this.ownerDocument||this.document||this,u=z.access(i,n);u||i.addEventListener(t,handler,!0),z.access(i,n,(u||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,u=z.access(i,n)-1;u?z.access(i,n,u):(i.removeEventListener(t,handler,!0),z.remove(i,n))}}}));var Oe=i.location,ke={guid:Date.now()},Pe=/\?/;jQuery.parseXML=function(t){var n,u;if(!t||"string"!=typeof t)return null;try{n=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return u=n&&n.getElementsByTagName("parsererror")[0],n&&!u||jQuery.error("Invalid XML: "+(u?jQuery.map(u.childNodes,(function(t){return t.textContent})).join("\n"):t)),n};var Ne=/\[\]$/,Le=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function buildParams(t,n,i,u){var l;if(Array.isArray(n))jQuery.each(n,(function(n,l){i||Ne.test(t)?u(t,l):buildParams(t+"["+("object"==typeof l&&null!=l?n:"")+"]",l,i,u)}));else if(i||"object"!==toType(n))u(t,n);else for(l in n)buildParams(t+"["+l+"]",n[l],i,u)}jQuery.param=function(t,n){var i,u=[],add=function(t,n){var i=x(n)?n():n;u[u.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!jQuery.isPlainObject(t))jQuery.each(t,(function(){add(this.name,this.value)}));else for(i in t)buildParams(i,t[i],n,add);return u.join("&")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=jQuery.prop(this,"elements");return t?jQuery.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!jQuery(this).is(":disabled")&&Fe.test(this.nodeName)&&!De.test(t)&&(this.checked||!ie.test(t))})).map((function(t,n){var i=jQuery(this).val();return null==i?null:Array.isArray(i)?jQuery.map(i,(function(t){return{name:n.name,value:t.replace(Le,"\r\n")}})):{name:n.name,value:i.replace(Le,"\r\n")}})).get()}});var qe=/%20/g,Ve=/#.*$/,Ue=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)$/gm,Be=/^(?:GET|HEAD)$/,He=/^\/\//,Qe={},ze={},Ge="*/".concat("*"),We=I.createElement("a");function addToPrefiltersOrTransports(t){return function(n,i){"string"!=typeof n&&(i=n,n="*");var u,l=0,d=n.toLowerCase().match(U)||[];if(x(i))for(;u=d[l++];)"+"===u[0]?(u=u.slice(1)||"*",(t[u]=t[u]||[]).unshift(i)):(t[u]=t[u]||[]).push(i)}}function inspectPrefiltersOrTransports(t,n,i,u){var l={},d=t===ze;function inspect(p){var h;return l[p]=!0,jQuery.each(t[p]||[],(function(t,p){var g=p(n,i,u);return"string"!=typeof g||d||l[g]?d?!(h=g):void 0:(n.dataTypes.unshift(g),inspect(g),!1)})),h}return inspect(n.dataTypes[0])||!l["*"]&&inspect("*")}function ajaxExtend(t,n){var i,u,l=jQuery.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((l[i]?t:u||(u={}))[i]=n[i]);return u&&jQuery.extend(!0,t,u),t}We.href=Oe.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Oe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?ajaxExtend(ajaxExtend(t,jQuery.ajaxSettings),n):ajaxExtend(jQuery.ajaxSettings,t)},ajaxPrefilter:addToPrefiltersOrTransports(Qe),ajaxTransport:addToPrefiltersOrTransports(ze),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var u,l,d,p,h,g,v,y,S,E,w=jQuery.ajaxSetup({},n),A=w.context||w,T=w.context&&(A.nodeType||A.jquery)?jQuery(A):jQuery.event,R=jQuery.Deferred(),x=jQuery.Callbacks("once memory"),C=w.statusCode||{},M={},O={},P="canceled",N={readyState:0,getResponseHeader:function(t){var n;if(v){if(!p)for(p={};n=je.exec(d);)p[n[1].toLowerCase()+" "]=(p[n[1].toLowerCase()+" "]||[]).concat(n[2]);n=p[t.toLowerCase()+" "]}return null==n?null:n.join(", ")},getAllResponseHeaders:function(){return v?d:null},setRequestHeader:function(t,n){return null==v&&(t=O[t.toLowerCase()]=O[t.toLowerCase()]||t,M[t]=n),this},overrideMimeType:function(t){return null==v&&(w.mimeType=t),this},statusCode:function(t){var n;if(t)if(v)N.always(t[N.status]);else for(n in t)C[n]=[C[n],t[n]];return this},abort:function(t){var n=t||P;return u&&u.abort(n),done(0,n),this}};if(R.promise(N),w.url=((t||w.url||Oe.href)+"").replace(He,Oe.protocol+"//"),w.type=n.method||n.type||w.method||w.type,w.dataTypes=(w.dataType||"*").toLowerCase().match(U)||[""],null==w.crossDomain){g=I.createElement("a");try{g.href=w.url,g.href=g.href,w.crossDomain=We.protocol+"//"+We.host!=g.protocol+"//"+g.host}catch(t){w.crossDomain=!0}}if(w.data&&w.processData&&"string"!=typeof w.data&&(w.data=jQuery.param(w.data,w.traditional)),inspectPrefiltersOrTransports(Qe,w,n,N),v)return N;for(S in(y=jQuery.event&&w.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),w.type=w.type.toUpperCase(),w.hasContent=!Be.test(w.type),l=w.url.replace(Ve,""),w.hasContent?w.data&&w.processData&&0===(w.contentType||"").indexOf("application/x-www-form-urlencoded")&&(w.data=w.data.replace(qe,"+")):(E=w.url.slice(l.length),w.data&&(w.processData||"string"==typeof w.data)&&(l+=(Pe.test(l)?"&":"?")+w.data,delete w.data),!1===w.cache&&(l=l.replace(Ue,"$1"),E=(Pe.test(l)?"&":"?")+"_="+ke.guid+++E),w.url=l+E),w.ifModified&&(jQuery.lastModified[l]&&N.setRequestHeader("If-Modified-Since",jQuery.lastModified[l]),jQuery.etag[l]&&N.setRequestHeader("If-None-Match",jQuery.etag[l])),(w.data&&w.hasContent&&!1!==w.contentType||n.contentType)&&N.setRequestHeader("Content-Type",w.contentType),N.setRequestHeader("Accept",w.dataTypes[0]&&w.accepts[w.dataTypes[0]]?w.accepts[w.dataTypes[0]]+("*"!==w.dataTypes[0]?", "+Ge+"; q=0.01":""):w.accepts["*"]),w.headers)N.setRequestHeader(S,w.headers[S]);if(w.beforeSend&&(!1===w.beforeSend.call(A,N,w)||v))return N.abort();if(P="abort",x.add(w.complete),N.done(w.success),N.fail(w.error),u=inspectPrefiltersOrTransports(ze,w,n,N)){if(N.readyState=1,y&&T.trigger("ajaxSend",[N,w]),v)return N;w.async&&w.timeout>0&&(h=i.setTimeout((function(){N.abort("timeout")}),w.timeout));try{v=!1,u.send(M,done)}catch(t){if(v)throw t;done(-1,t)}}else done(-1,"No Transport");function done(t,n,p,g){var S,E,I,M,O,P=n;v||(v=!0,h&&i.clearTimeout(h),u=void 0,d=g||"",N.readyState=t>0?4:0,S=t>=200&&t<300||304===t,p&&(M=function ajaxHandleResponses(t,n,i){for(var u,l,d,p,h=t.contents,g=t.dataTypes;"*"===g[0];)g.shift(),void 0===u&&(u=t.mimeType||n.getResponseHeader("Content-Type"));if(u)for(l in h)if(h[l]&&h[l].test(u)){g.unshift(l);break}if(g[0]in i)d=g[0];else{for(l in i){if(!g[0]||t.converters[l+" "+g[0]]){d=l;break}p||(p=l)}d=d||p}if(d)return d!==g[0]&&g.unshift(d),i[d]}(w,N,p)),!S&&jQuery.inArray("script",w.dataTypes)>-1&&jQuery.inArray("json",w.dataTypes)<0&&(w.converters["text script"]=function(){}),M=function ajaxConvert(t,n,i,u){var l,d,p,h,g,v={},y=t.dataTypes.slice();if(y[1])for(p in t.converters)v[p.toLowerCase()]=t.converters[p];for(d=y.shift();d;)if(t.responseFields[d]&&(i[t.responseFields[d]]=n),!g&&u&&t.dataFilter&&(n=t.dataFilter(n,t.dataType)),g=d,d=y.shift())if("*"===d)d=g;else if("*"!==g&&g!==d){if(!(p=v[g+" "+d]||v["* "+d]))for(l in v)if((h=l.split(" "))[1]===d&&(p=v[g+" "+h[0]]||v["* "+h[0]])){!0===p?p=v[l]:!0!==v[l]&&(d=h[0],y.unshift(h[1]));break}if(!0!==p)if(p&&t.throws)n=p(n);else try{n=p(n)}catch(t){return{state:"parsererror",error:p?t:"No conversion from "+g+" to "+d}}}return{state:"success",data:n}}(w,M,N,S),S?(w.ifModified&&((O=N.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[l]=O),(O=N.getResponseHeader("etag"))&&(jQuery.etag[l]=O)),204===t||"HEAD"===w.type?P="nocontent":304===t?P="notmodified":(P=M.state,E=M.data,S=!(I=M.error))):(I=P,!t&&P||(P="error",t<0&&(t=0))),N.status=t,N.statusText=(n||P)+"",S?R.resolveWith(A,[E,P,N]):R.rejectWith(A,[N,P,I]),N.statusCode(C),C=void 0,y&&T.trigger(S?"ajaxSuccess":"ajaxError",[N,w,S?E:I]),x.fireWith(A,[N,P]),y&&(T.trigger("ajaxComplete",[N,w]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return N},getJSON:function(t,n,i){return jQuery.get(t,n,i,"json")},getScript:function(t,n){return jQuery.get(t,void 0,n,"script")}}),jQuery.each(["get","post"],(function(t,n){jQuery[n]=function(t,i,u,l){return x(i)&&(l=l||u,u=i,i=void 0),jQuery.ajax(jQuery.extend({url:t,type:n,dataType:l,data:i,success:u},jQuery.isPlainObject(t)&&t))}})),jQuery.ajaxPrefilter((function(t){var n;for(n in t.headers)"content-type"===n.toLowerCase()&&(t.contentType=t.headers[n]||"")})),jQuery._evalUrl=function(t,n,i){return jQuery.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){jQuery.globalEval(t,n,i)}})},jQuery.fn.extend({wrapAll:function(t){var n;return this[0]&&(x(t)&&(t=t.call(this[0])),n=jQuery(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return x(t)?this.each((function(n){jQuery(this).wrapInner(t.call(this,n))})):this.each((function(){var n=jQuery(this),i=n.contents();i.length?i.wrapAll(t):n.append(t)}))},wrap:function(t){var n=x(t);return this.each((function(i){jQuery(this).wrapAll(n?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){jQuery(this).replaceWith(this.childNodes)})),this}}),jQuery.expr.pseudos.hidden=function(t){return!jQuery.expr.pseudos.visible(t)},jQuery.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},jQuery.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var $e={0:200,1223:204},Ye=jQuery.ajaxSettings.xhr();R.cors=!!Ye&&"withCredentials"in Ye,R.ajax=Ye=!!Ye,jQuery.ajaxTransport((function(t){var n,u;if(R.cors||Ye&&!t.crossDomain)return{send:function(l,d){var p,h=t.xhr();if(h.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(p in t.xhrFields)h[p]=t.xhrFields[p];for(p in t.mimeType&&h.overrideMimeType&&h.overrideMimeType(t.mimeType),t.crossDomain||l["X-Requested-With"]||(l["X-Requested-With"]="XMLHttpRequest"),l)h.setRequestHeader(p,l[p]);n=function(t){return function(){n&&(n=u=h.onload=h.onerror=h.onabort=h.ontimeout=h.onreadystatechange=null,"abort"===t?h.abort():"error"===t?"number"!=typeof h.status?d(0,"error"):d(h.status,h.statusText):d($e[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=n(),u=h.onerror=h.ontimeout=n("error"),void 0!==h.onabort?h.onabort=u:h.onreadystatechange=function(){4===h.readyState&&i.setTimeout((function(){n&&u()}))},n=n("abort");try{h.send(t.hasContent&&t.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}})),jQuery.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return jQuery.globalEval(t),t}}}),jQuery.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),jQuery.ajaxTransport("script",(function(t){var n,i;if(t.crossDomain||t.scriptAttrs)return{send:function(u,l){n=jQuery("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){n.remove(),i=null,t&&l("error"===t.type?404:200,t.type)}),I.head.appendChild(n[0])},abort:function(){i&&i()}}}));var Je,Xe=[],Ke=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xe.pop()||jQuery.expando+"_"+ke.guid++;return this[t]=!0,t}}),jQuery.ajaxPrefilter("json jsonp",(function(t,n,u){var l,d,p,h=!1!==t.jsonp&&(Ke.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(t.data)&&"data");if(h||"jsonp"===t.dataTypes[0])return l=t.jsonpCallback=x(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,h?t[h]=t[h].replace(Ke,"$1"+l):!1!==t.jsonp&&(t.url+=(Pe.test(t.url)?"&":"?")+t.jsonp+"="+l),t.converters["script json"]=function(){return p||jQuery.error(l+" was not called"),p[0]},t.dataTypes[0]="json",d=i[l],i[l]=function(){p=arguments},u.always((function(){void 0===d?jQuery(i).removeProp(l):i[l]=d,t[l]&&(t.jsonpCallback=n.jsonpCallback,Xe.push(l)),p&&x(d)&&d(p[0]),p=d=void 0})),"script"})),R.createHTMLDocument=((Je=I.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Je.childNodes.length),jQuery.parseHTML=function(t,n,i){return"string"!=typeof t?[]:("boolean"==typeof n&&(i=n,n=!1),n||(R.createHTMLDocument?((u=(n=I.implementation.createHTMLDocument("")).createElement("base")).href=I.location.href,n.head.appendChild(u)):n=I),d=!i&&[],(l=N.exec(t))?[n.createElement(l[1])]:(l=buildFragment([t],n,d),d&&d.length&&jQuery(d).remove(),jQuery.merge([],l.childNodes)));var u,l,d},jQuery.fn.load=function(t,n,i){var u,l,d,p=this,h=t.indexOf(" ");return h>-1&&(u=stripAndCollapse(t.slice(h)),t=t.slice(0,h)),x(n)?(i=n,n=void 0):n&&"object"==typeof n&&(l="POST"),p.length>0&&jQuery.ajax({url:t,type:l||"GET",dataType:"html",data:n}).done((function(t){d=arguments,p.html(u?jQuery("<div>").append(jQuery.parseHTML(t)).find(u):t)})).always(i&&function(t,n){p.each((function(){i.apply(this,d||[t.responseText,n,t])}))}),this},jQuery.expr.pseudos.animated=function(t){return jQuery.grep(jQuery.timers,(function(n){return t===n.elem})).length},jQuery.offset={setOffset:function(t,n,i){var u,l,d,p,h,g,v=jQuery.css(t,"position"),y=jQuery(t),S={};"static"===v&&(t.style.position="relative"),h=y.offset(),d=jQuery.css(t,"top"),g=jQuery.css(t,"left"),("absolute"===v||"fixed"===v)&&(d+g).indexOf("auto")>-1?(p=(u=y.position()).top,l=u.left):(p=parseFloat(d)||0,l=parseFloat(g)||0),x(n)&&(n=n.call(t,i,jQuery.extend({},h))),null!=n.top&&(S.top=n.top-h.top+p),null!=n.left&&(S.left=n.left-h.left+l),"using"in n?n.using.call(t,S):y.css(S)}},jQuery.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(n){jQuery.offset.setOffset(this,t,n)}));var n,i,u=this[0];return u?u.getClientRects().length?(n=u.getBoundingClientRect(),i=u.ownerDocument.defaultView,{top:n.top+i.pageYOffset,left:n.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,n,i,u=this[0],l={top:0,left:0};if("fixed"===jQuery.css(u,"position"))n=u.getBoundingClientRect();else{for(n=this.offset(),i=u.ownerDocument,t=u.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===jQuery.css(t,"position");)t=t.parentNode;t&&t!==u&&1===t.nodeType&&((l=jQuery(t).offset()).top+=jQuery.css(t,"borderTopWidth",!0),l.left+=jQuery.css(t,"borderLeftWidth",!0))}return{top:n.top-l.top-jQuery.css(u,"marginTop",!0),left:n.left-l.left-jQuery.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===jQuery.css(t,"position");)t=t.offsetParent;return t||K}))}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,n){var i="pageYOffset"===n;jQuery.fn[t]=function(u){return access(this,(function(t,u,l){var d;if(C(t)?d=t:9===t.nodeType&&(d=t.defaultView),void 0===l)return d?d[n]:t[u];d?d.scrollTo(i?d.pageXOffset:l,i?l:d.pageYOffset):t[u]=l}),t,u,arguments.length)}})),jQuery.each(["top","left"],(function(t,n){jQuery.cssHooks[n]=addGetHookIf(R.pixelPosition,(function(t,i){if(i)return i=curCSS(t,n),pe.test(i)?jQuery(t).position()[n]+"px":i}))})),jQuery.each({Height:"height",Width:"width"},(function(t,n){jQuery.each({padding:"inner"+t,content:n,"":"outer"+t},(function(i,u){jQuery.fn[u]=function(l,d){var p=arguments.length&&(i||"boolean"!=typeof l),h=i||(!0===l||!0===d?"margin":"border");return access(this,(function(n,i,l){var d;return C(n)?0===u.indexOf("outer")?n["inner"+t]:n.document.documentElement["client"+t]:9===n.nodeType?(d=n.documentElement,Math.max(n.body["scroll"+t],d["scroll"+t],n.body["offset"+t],d["offset"+t],d["client"+t])):void 0===l?jQuery.css(n,i,h):jQuery.style(n,i,l,h)}),n,p?l:void 0,p)}}))})),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,n){jQuery.fn[n]=function(t){return this.on(n,t)}})),jQuery.fn.extend({bind:function(t,n,i){return this.on(t,null,n,i)},unbind:function(t,n){return this.off(t,null,n)},delegate:function(t,n,i,u){return this.on(n,t,i,u)},undelegate:function(t,n,i){return 1===arguments.length?this.off(t,"**"):this.off(n,t||"**",i)},hover:function(t,n){return this.mouseenter(t).mouseleave(n||t)}}),jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,n){jQuery.fn[n]=function(t,i){return arguments.length>0?this.on(n,null,t,i):this.trigger(n)}}));var Ze=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;jQuery.proxy=function(t,n){var i,u,l;if("string"==typeof n&&(i=t[n],n=t,t=i),x(t))return u=h.call(arguments,2),(l=function(){return t.apply(n||this,u.concat(h.call(arguments)))}).guid=t.guid=t.guid||jQuery.guid++,l},jQuery.holdReady=function(t){t?jQuery.readyWait++:jQuery.ready(!0)},jQuery.isArray=Array.isArray,jQuery.parseJSON=JSON.parse,jQuery.nodeName=nodeName,jQuery.isFunction=x,jQuery.isWindow=C,jQuery.camelCase=camelCase,jQuery.type=toType,jQuery.now=Date.now,jQuery.isNumeric=function(t){var n=jQuery.type(t);return("number"===n||"string"===n)&&!isNaN(t-parseFloat(t))},jQuery.trim=function(t){return null==t?"":(t+"").replace(Ze,"")},void 0===(u=function(){return jQuery}.apply(n,[]))||(t.exports=u);var et=i.jQuery,tt=i.$;return jQuery.noConflict=function(t){return i.$===jQuery&&(i.$=tt),t&&i.jQuery===jQuery&&(i.jQuery=et),jQuery},void 0===l&&(i.jQuery=i.$=jQuery),jQuery}))},function(t,n,i){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function isFunction(t){return"[object Function]"===Object.prototype.toString.call(t)}i.r(n),window.Promise=function _nativePromise(){var t,n=!1;return isFunction(window.Promise)&&isFunction(window.Promise.all)&&isFunction(window.Promise.resolve)&&isFunction(window.Promise.reject)&&isFunction((t=new Promise((function(t,n){t()}))).then)&&isFunction(t.catch)&&(n=!0),n}()?window.Promise:function _promisePolyfill(){var t,n,i,u=Object.prototype.toString,l="undefined"!=typeof setImmediate?function timer(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function builtInProp(t,n,i,u){return Object.defineProperty(t,n,{value:i,writable:!0,configurable:!1!==u})}}catch(n){t=function builtInProp(t,n,i){return t[n]=i,t}}function schedule(t,u){i.add(t,u),n||(n=l(i.drain))}function isThenable(t){var n,i=_typeof(t);return null===t||"object"!==i&&"function"!==i||(n=t.then),"function"==typeof n&&n}function notify(){for(var t=0;t<this.chain.length;t++)notifyIsolated(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function notifyIsolated(t,n,i){var u,l;try{!1===n?i.reject(t.msg):(u=!0===n?t.msg:n.call(void 0,t.msg))===i.promise?i.reject(new TypeError("Promise-chain cycle")):(l=isThenable(u))?l.call(u,i.resolve,i.reject):i.resolve(u)}catch(t){i.reject(t)}}function resolve(t){var n,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(n=isThenable(t))?schedule((function(){var u=new MakeDefWrapper(i);try{n.call(t,(function $resolve$(){resolve.apply(u,arguments)}),(function $reject$(){reject.apply(u,arguments)}))}catch(t){reject.call(u,t)}})):(i.msg=t,i.state=1,i.chain.length>0&&schedule(notify,i))}catch(t){reject.call(new MakeDefWrapper(i),t)}}}function reject(t){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=t,n.state=2,n.chain.length>0&&schedule(notify,n))}function iteratePromises(t,n,i,u){for(var l=0;l<n.length;l++)!function IIFE(l){t.resolve(n[l]).then((function $resolver$(t){i(l,t)}),u)}(l)}function MakeDefWrapper(t){this.def=t,this.triggered=!1}function MakeDef(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(t){if("function"!=typeof t)throw new TypeError("Not a function");if(0!==this.__NPO__)throw new TypeError("Not a promise");this.__NPO__=1;var n=new MakeDef(this);this.then=function then(t,i){var u={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return u.promise=new this.constructor((function extractChain(t,n){if("function"!=typeof t||"function"!=typeof n)throw new TypeError("Not a function");u.resolve=t,u.reject=n})),n.chain.push(u),0!==n.state&&schedule(notify,n),u.promise},this.catch=function $catch$(t){return this.then(void 0,t)};try{t.call(void 0,(function publicResolve(t){resolve.call(n,t)}),(function publicReject(t){reject.call(n,t)}))}catch(t){reject.call(n,t)}}i=function Queue(){var t,i,u;function Item(t,n){this.fn=t,this.self=n,this.next=void 0}return{add:function add(n,l){u=new Item(n,l),i?i.next=u:t=u,i=u,u=void 0},drain:function drain(){var u=t;for(t=i=n=void 0;u;)u.fn.call(u.self),u=u.next}}}();var d=t({},"constructor",Promise,!1);return Promise.prototype=d,t(d,"__NPO__",0,!1),t(Promise,"resolve",(function Promise$resolve(t){return t&&"object"===_typeof(t)&&1===t.__NPO__?t:new this((function executor(n,i){if("function"!=typeof n||"function"!=typeof i)throw new TypeError("Not a function");n(t)}))})),t(Promise,"reject",(function Promise$reject(t){return new this((function executor(n,i){if("function"!=typeof n||"function"!=typeof i)throw new TypeError("Not a function");i(t)}))})),t(Promise,"all",(function Promise$all(t){var n=this;return"[object Array]"!==u.call(t)?n.reject(new TypeError("Not an array")):0===t.length?n.resolve([]):new n((function executor(i,u){if("function"!=typeof i||"function"!=typeof u)throw new TypeError("Not a function");var l=t.length,d=[],p=0;d.length=l,iteratePromises(n,t,(function resolver(t,n){d[t]=n,++p===l&&i(d)}),u)}))})),t(Promise,"race",(function Promise$race(t){var n=this;return"[object Array]"!==u.call(t)?n.reject(new TypeError("Not an array")):new n((function executor(i,u){if("function"!=typeof i||"function"!=typeof u)throw new TypeError("Not a function");iteratePromises(n,t,(function resolver(t,n){i(n)}),u)}))})),Promise}(),n.default=window.Promise},function(t,n){t.exports={QUESTION_TYPES:{ASSOCIATION:"association",AUDIO:"audio",AUDIOADV:"audioadv",BOOLEAN:"boolean",CHEMISTRY:"chemistry",CHOICEMATRIX:"choicematrix",CLASSIFICATION:"classification",CLOZEASSOCIATION:"clozeassociation",CLOZEDROPDOWN:"clozedropdown",CLOZEFORMULA:"clozeformula",CLOZEFORMULAV2:"clozeformulaV2",CLOZEINLINETEXT:"clozeinlinetext",CLOZETEXT:"clozetext",CLOZECHEMISTRY:"clozechemistry",CUSTOM:"custom",DRAWING:"drawing",FILEUPLOAD:"fileupload",FILLSHAPE:"fillshape",FORMULA:"formula",FORMULA_DEV:"formula_dev",FORMULAESSAY:"formulaessay",FORMULAESSAYV2:"formulaessayV2",CHEMISTRYESSAY:"chemistryessay",CHEMISTRYESSAYV2:"chemistryessayV2",FORMULAV2:"formulaV2",GRAPHPLOTTING:"graphplotting",GRIDDED:"gridded",HIGHLIGHT:"highlight",HOTSPOT:"hotspot",IMAGECLOZEASSOCIATION:"imageclozeassociation",IMAGECLOZEASSOCIATIONV2:"imageclozeassociationV2",IMAGECLOZEDROPDOWN:"imageclozedropdown",IMAGECLOZEFORMULA:"imageclozeformula",IMAGECLOZECHEMISTRY:"imageclozechemistry",IMAGECLOZETEXT:"imageclozetext",IMAGEUPLOAD:"imageupload",LONGTEXT:"longtext",LONGTEXTV2:"longtextV2",MCQ:"mcq",NUMBERLINE:"numberline",NUMBERLINEPLOT:"numberlineplot",ORDERLIST:"orderlist",PLAINTEXT:"plaintext",RATING:"rating",SCORE:"score",SHORTTEXT:"shorttext",SIMPLECHART:"simplechart",SIMPLESHADING:"simpleshading",SORTLIST:"sortlist",TEXTHIGHLIGHT:"texthighlight",TOKENHIGHLIGHT:"tokenhighlight",VIDEO:"video",UNKNOWN:"unknown"},FEATURE_TYPES:{AUDIO_PLAYER:"audioplayer",CALCULATOR:"calculator",COUNTER:"counter",FORMULAINPUT:"formulainput",IMAGE_TOOL:"imagetool",LINE_READER:"linereader",SCROLLABLE_PASSAGE:"scrollablepassage",SHARED_PASSAGE:"sharedpassage",UNKNOWN:"unknown",VIDEO_PLAYER:"videoplayer",CUSTOM_FEATURE:"customfeature"}}},function(t,n,i){"use strict";var u,l=i(0),d=i.n(l),p=i(1),h=i.n(p),g=i(12),v=i(28),y={10001:{code:10001,msg:"Failed validating activity / format error",errorUI:"global"},10002:{code:10002,msg:"Response id conflict",errorUI:"global"},10003:{code:10003,msg:"Failed authentication",errorUI:"global"},10004:{code:10004,msg:"Save responses failed"},10005:{code:10005,msg:"Response not found",errorUI:"question"},10006:{code:10006,msg:"Audio save to server failed",errorUI:"button"},10007:{code:10007,msg:"Authorisation failed",errorUI:"question"},10008:{code:10008,msg:"Audio asset failed to load"},10009:{code:10009,msg:"Audio asset temporarily not available"},10010:{code:10010,msg:"Audio asset expired",errorUI:"question"},10011:{code:10011,msg:"Your device does not support audio-capture functionality"},10012:{code:10012,msg:"No microphone found"},10013:{code:10013,msg:"Unable to save, question validation failed"},10014:{code:10014,msg:"Audio asset format not supported"},10015:{code:10015,msg:"Browser not supported",errorUI:"global"},10016:{code:10016,msg:"Failed capturing questions",errorUI:"global"},10017:{code:10017,msg:"Failed loading Questions API, can't load required modules"},10018:{code:10018,msg:"Browser running in an unsupported compatibility view",errorUI:"global"},10019:{code:10019,msg:"Failed validating math"},10020:{code:10020,msg:"Failed validating appended elements"},10021:{code:10021,msg:"Discard responses failed"},10022:{code:10022,msg:"Audio playback failed"},10023:{code:10023,msg:"Unable to render latex"},10024:{code:10024,msg:"Failed loading external resource"},10025:{code:10025,msg:"Failed resuming activity, network connectivity error"},10026:{code:10026,msg:"Cannot set response metadata on empty response"},10027:{code:10027,msg:"Failed pushing offline data to server"},10028:{code:10028,msg:"Called needsPushing with incorrect parameters"},10029:{code:10029,msg:"Asset could not be uploaded"},10030:{code:10030,msg:"Widget instance can not be updated"}};function log(){console.error.apply?console.error.apply(console,arguments):d.a.each(arguments,(function(t){console.error(t)}))}n.a={setErrorListener:function setErrorListener(t){u=t},exception:function exception(t,n){var i=d.a.extend({},y[t.code],t),l=i.i18n;switch(delete i.i18n,LearnosityApp.errors=LearnosityApp.errors||[],LearnosityApp.errors.push(i),g.a.trackError(i.code,i.msg,i.detail?i.detail:i.msg,i.consumerKey),log("".concat(i.code,": ").concat(i.msg," ").concat(i.detail?"(Detail: "+i.detail+").":"."," View this error on LearnosityApp.errors[").concat(LearnosityApp.errors.length-1,"]")),i.errorUI){case"button":break;case"question":h()("#"+i.response_id).removeClass("lrn_qr").addClass("learnosity-error").html(l.labels.uierrorfeedback);break;case"global":var p=10015===i.code?l.labels.unsupportedBrowser:10018===i.code?l.labels.unsupportedCompatibilityMode:l.labels.uierrorfeedback;h()(".learnosity-response, .lrn_qr").removeClass("lrn_qr").addClass("learnosity-error").html(p)}setTimeout((function(){Object(v.a)({app:window.LearnosityApp._internal.config.appContext,name:"error",error:i})}),3e3),n?n(i):u?d.a.defer((function(){d.a.isFunction(u)&&u(d.a.clone(i))})):alert(i.msg+"\n\nPlease contact your administrator if you require further assistance.")},reset:function reset(){LearnosityApp.errors=[],u=null},log:log,warning:function warning(){d.a.isFunction(console.warn)&&console.warn.apply(console,arguments)}}},function(t,n,i){(function(t){!function(u){var l,d="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t,p=i(0);try{l=i(1)}catch(t){}u(d,n,p,l)}((function(t,n,i,u){var l=t.Backbone,d=Array.prototype.slice;n.VERSION="1.4.0",n.$=u,n.noConflict=function(){return t.Backbone=l,this},n.emulateHTTP=!1,n.emulateJSON=!1;var p,h=n.Events={},g=/\s+/,eventsApi=function(t,n,u,l,d){var p,h=0;if(u&&"object"==typeof u){void 0!==l&&"context"in d&&void 0===d.context&&(d.context=l);for(p=i.keys(u);h<p.length;h++)n=eventsApi(t,n,p[h],u[p[h]],d)}else if(u&&g.test(u))for(p=u.split(g);h<p.length;h++)n=t(n,p[h],l,d);else n=t(n,u,l,d);return n};h.on=function(t,n,i){(this._events=eventsApi(onApi,this._events||{},t,n,{context:i,ctx:this,listening:p}),p)&&((this._listeners||(this._listeners={}))[p.id]=p,p.interop=!1);return this},h.listenTo=function(t,n,u){if(!t)return this;var l=t._listenId||(t._listenId=i.uniqueId("l")),d=this._listeningTo||(this._listeningTo={}),h=p=d[l];h||(this._listenId||(this._listenId=i.uniqueId("l")),h=p=d[l]=new Listening(this,t));var g=tryCatchOn(t,n,u,this);if(p=void 0,g)throw g;return h.interop&&h.on(n,u),this};var onApi=function(t,n,i,u){if(i){var l=t[n]||(t[n]=[]),d=u.context,p=u.ctx,h=u.listening;h&&h.count++,l.push({callback:i,context:d,ctx:d||p,listening:h})}return t},tryCatchOn=function(t,n,i,u){try{t.on(n,i,u)}catch(t){return t}};h.off=function(t,n,i){return this._events?(this._events=eventsApi(offApi,this._events,t,n,{context:i,listeners:this._listeners}),this):this},h.stopListening=function(t,n,u){var l=this._listeningTo;if(!l)return this;for(var d=t?[t._listenId]:i.keys(l),p=0;p<d.length;p++){var h=l[d[p]];if(!h)break;h.obj.off(n,u,this),h.interop&&h.off(n,u)}return i.isEmpty(l)&&(this._listeningTo=void 0),this};var offApi=function(t,n,u,l){if(t){var d,p=l.context,h=l.listeners,g=0;if(n||p||u){for(d=n?[n]:i.keys(t);g<d.length;g++){var v=t[n=d[g]];if(!v)break;for(var y=[],S=0;S<v.length;S++){var E=v[S];if(u&&u!==E.callback&&u!==E.callback._callback||p&&p!==E.context)y.push(E);else{var w=E.listening;w&&w.off(n,u)}}y.length?t[n]=y:delete t[n]}return t}for(d=i.keys(h);g<d.length;g++)h[d[g]].cleanup()}};h.once=function(t,n,i){var u=eventsApi(onceMap,{},t,n,this.off.bind(this));return"string"==typeof t&&null==i&&(n=void 0),this.on(u,n,i)},h.listenToOnce=function(t,n,i){var u=eventsApi(onceMap,{},n,i,this.stopListening.bind(this,t));return this.listenTo(t,u)};var onceMap=function(t,n,u,l){if(u){var d=t[n]=i.once((function(){l(n,d),u.apply(this,arguments)}));d._callback=u}return t};h.trigger=function(t){if(!this._events)return this;for(var n=Math.max(0,arguments.length-1),i=Array(n),u=0;u<n;u++)i[u]=arguments[u+1];return eventsApi(triggerApi,this._events,t,void 0,i),this};var triggerApi=function(t,n,i,u){if(t){var l=t[n],d=t.all;l&&d&&(d=d.slice()),l&&triggerEvents(l,u),d&&triggerEvents(d,[n].concat(u))}return t},triggerEvents=function(t,n){var i,u=-1,l=t.length,d=n[0],p=n[1],h=n[2];switch(n.length){case 0:for(;++u<l;)(i=t[u]).callback.call(i.ctx);return;case 1:for(;++u<l;)(i=t[u]).callback.call(i.ctx,d);return;case 2:for(;++u<l;)(i=t[u]).callback.call(i.ctx,d,p);return;case 3:for(;++u<l;)(i=t[u]).callback.call(i.ctx,d,p,h);return;default:for(;++u<l;)(i=t[u]).callback.apply(i.ctx,n);return}},Listening=function(t,n){this.id=t._listenId,this.listener=t,this.obj=n,this.interop=!0,this.count=0,this._events=void 0};Listening.prototype.on=h.on,Listening.prototype.off=function(t,n){var i;this.interop?(this._events=eventsApi(offApi,this._events,t,n,{context:void 0,listeners:void 0}),i=!this._events):(this.count--,i=0===this.count),i&&this.cleanup()},Listening.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},h.bind=h.on,h.unbind=h.off,i.extend(n,h);var v=n.Model=function(t,n){var u=t||{};n||(n={}),this.preinitialize.apply(this,arguments),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(u=this.parse(u,n)||{});var l=i.result(this,"defaults");u=i.defaults(i.extend({},l,u),l),this.set(u,n),this.changed={},this.initialize.apply(this,arguments)};i.extend(v.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,n,u){if(null==t)return this;var l;if("object"==typeof t?(l=t,u=n):(l={})[t]=n,u||(u={}),!this._validate(l,u))return!1;var d=u.unset,p=u.silent,h=[],g=this._changing;this._changing=!0,g||(this._previousAttributes=i.clone(this.attributes),this.changed={});var v=this.attributes,y=this.changed,S=this._previousAttributes;for(var E in l)n=l[E],i.isEqual(v[E],n)||h.push(E),i.isEqual(S[E],n)?delete y[E]:y[E]=n,d?delete v[E]:v[E]=n;if(this.idAttribute in l&&(this.id=this.get(this.idAttribute)),!p){h.length&&(this._pending=u);for(var w=0;w<h.length;w++)this.trigger("change:"+h[w],this,v[h[w]],u)}if(g)return this;if(!p)for(;this._pending;)u=this._pending,this._pending=!1,this.trigger("change",this,u);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,i.extend({},n,{unset:!0}))},clear:function(t){var n={};for(var u in this.attributes)n[u]=void 0;return this.set(n,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var n,u=this._changing?this._previousAttributes:this.attributes,l={};for(var d in t){var p=t[d];i.isEqual(u[d],p)||(l[d]=p,n=!0)}return!!n&&l},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var n=this,u=t.success;return t.success=function(i){var l=t.parse?n.parse(i,t):i;if(!n.set(l,t))return!1;u&&u.call(t.context,n,i,t),n.trigger("sync",n,i,t)},wrapError(this,t),this.sync("read",this,t)},save:function(t,n,u){var l;null==t||"object"==typeof t?(l=t,u=n):(l={})[t]=n;var d=(u=i.extend({validate:!0,parse:!0},u)).wait;if(l&&!d){if(!this.set(l,u))return!1}else if(!this._validate(l,u))return!1;var p=this,h=u.success,g=this.attributes;u.success=function(t){p.attributes=g;var n=u.parse?p.parse(t,u):t;if(d&&(n=i.extend({},l,n)),n&&!p.set(n,u))return!1;h&&h.call(u.context,p,t,u),p.trigger("sync",p,t,u)},wrapError(this,u),l&&d&&(this.attributes=i.extend({},g,l));var v=this.isNew()?"create":u.patch?"patch":"update";"patch"!==v||u.attrs||(u.attrs=l);var y=this.sync(v,this,u);return this.attributes=g,y},destroy:function(t){t=t?i.clone(t):{};var n=this,u=t.success,l=t.wait,destroy=function(){n.stopListening(),n.trigger("destroy",n,n.collection,t)};t.success=function(i){l&&destroy(),u&&u.call(t.context,n,i,t),n.isNew()||n.trigger("sync",n,i,t)};var d=!1;return this.isNew()?i.defer(t.success):(wrapError(this,t),d=this.sync("delete",this,t)),l||destroy(),d},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||urlError();if(this.isNew())return t;var n=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(n)},parse:function(t,n){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var u=this.validationError=this.validate(t,n)||null;return!u||(this.trigger("invalid",this,u,i.extend(n,{validationError:u})),!1)}});var y=n.Collection=function(t,n){n||(n={}),this.preinitialize.apply(this,arguments),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},n))},S={add:!0,remove:!0,merge:!0},E={add:!0,remove:!1},splice=function(t,n,i){i=Math.min(Math.max(i,0),t.length);var u,l=Array(t.length-i),d=n.length;for(u=0;u<l.length;u++)l[u]=t[u+i];for(u=0;u<d;u++)t[u+i]=n[u];for(u=0;u<l.length;u++)t[u+d+i]=l[u]};i.extend(y.prototype,h,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(n){return n.toJSON(t)}))},sync:function(){return n.sync.apply(this,arguments)},add:function(t,n){return this.set(t,i.extend({merge:!1},n,E))},remove:function(t,n){n=i.extend({},n);var u=!i.isArray(t);t=u?[t]:t.slice();var l=this._removeModels(t,n);return!n.silent&&l.length&&(n.changes={added:[],merged:[],removed:l},this.trigger("update",this,n)),u?l[0]:l},set:function(t,n){if(null!=t){(n=i.extend({},S,n)).parse&&!this._isModel(t)&&(t=this.parse(t,n)||[]);var u=!i.isArray(t);t=u?[t]:t.slice();var l=n.at;null!=l&&(l=+l),l>this.length&&(l=this.length),l<0&&(l+=this.length+1);var d,p,h=[],g=[],v=[],y=[],E={},w=n.add,A=n.merge,T=n.remove,R=!1,x=this.comparator&&null==l&&!1!==n.sort,C=i.isString(this.comparator)?this.comparator:null;for(p=0;p<t.length;p++){d=t[p];var I=this.get(d);if(I){if(A&&d!==I){var M=this._isModel(d)?d.attributes:d;n.parse&&(M=I.parse(M,n)),I.set(M,n),v.push(I),x&&!R&&(R=I.hasChanged(C))}E[I.cid]||(E[I.cid]=!0,h.push(I)),t[p]=I}else w&&(d=t[p]=this._prepareModel(d,n))&&(g.push(d),this._addReference(d,n),E[d.cid]=!0,h.push(d))}if(T){for(p=0;p<this.length;p++)E[(d=this.models[p]).cid]||y.push(d);y.length&&this._removeModels(y,n)}var O=!1,P=!x&&w&&T;if(h.length&&P?(O=this.length!==h.length||i.some(this.models,(function(t,n){return t!==h[n]})),this.models.length=0,splice(this.models,h,0),this.length=this.models.length):g.length&&(x&&(R=!0),splice(this.models,g,null==l?this.length:l),this.length=this.models.length),R&&this.sort({silent:!0}),!n.silent){for(p=0;p<g.length;p++)null!=l&&(n.index=l+p),(d=g[p]).trigger("add",d,this,n);(R||O)&&this.trigger("sort",this,n),(g.length||y.length||v.length)&&(n.changes={added:g,removed:y,merged:v},this.trigger("update",this,n))}return u?t[0]:t}},reset:function(t,n){n=n?i.clone(n):{};for(var u=0;u<this.models.length;u++)this._removeReference(this.models[u],n);return n.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),t},push:function(t,n){return this.add(t,i.extend({at:this.length},n))},pop:function(t){var n=this.at(this.length-1);return this.remove(n,t)},unshift:function(t,n){return this.add(t,i.extend({at:0},n))},shift:function(t){var n=this.at(0);return this.remove(n,t)},slice:function(){return d.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,n){return this[n?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var n=this.comparator;if(!n)throw new Error("Cannot sort a set without a comparator");t||(t={});var u=n.length;return i.isFunction(n)&&(n=n.bind(this)),1===u||i.isString(n)?this.models=this.sortBy(n):this.models.sort(n),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var n=(t=i.extend({parse:!0},t)).success,u=this;return t.success=function(i){var l=t.reset?"reset":"set";u[l](i,t),n&&n.call(t.context,u,i,t),u.trigger("sync",u,i,t)},wrapError(this,t),this.sync("read",this,t)},create:function(t,n){var u=(n=n?i.clone(n):{}).wait;if(!(t=this._prepareModel(t,n)))return!1;u||this.add(t,n);var l=this,d=n.success;return n.success=function(t,n,i){u&&l.add(t,i),d&&d.call(i.context,t,n,i)},t.save(null,n),t},parse:function(t,n){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},values:function(){return new CollectionIterator(this,A)},keys:function(){return new CollectionIterator(this,T)},entries:function(){return new CollectionIterator(this,R)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,n){if(this._isModel(t))return t.collection||(t.collection=this),t;(n=n?i.clone(n):{}).collection=this;var u=new this.model(t,n);return u.validationError?(this.trigger("invalid",this,u.validationError,n),!1):u},_removeModels:function(t,n){for(var i=[],u=0;u<t.length;u++){var l=this.get(t[u]);if(l){var d=this.indexOf(l);this.models.splice(d,1),this.length--,delete this._byId[l.cid];var p=this.modelId(l.attributes);null!=p&&delete this._byId[p],n.silent||(n.index=d,l.trigger("remove",l,this,n)),i.push(l),this._removeReference(l,n)}}return i},_isModel:function(t){return t instanceof v},_addReference:function(t,n){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,n){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,n,i,u){if(n){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(n,u),"change"===t){var l=this.modelId(n.previousAttributes()),d=this.modelId(n.attributes);l!==d&&(null!=l&&delete this._byId[l],null!=d&&(this._byId[d]=n))}}this.trigger.apply(this,arguments)}});var w="function"==typeof Symbol&&Symbol.iterator;w&&(y.prototype[w]=y.prototype.values);var CollectionIterator=function(t,n){this._collection=t,this._kind=n,this._index=0},A=1,T=2,R=3;w&&(CollectionIterator.prototype[w]=function(){return this}),CollectionIterator.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,n=this._collection.at(this._index);if(this._index++,this._kind===A)t=n;else{var i=this._collection.modelId(n.attributes);t=this._kind===T?i:[i,n]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var x=n.View=function(t){this.cid=i.uniqueId("view"),this.preinitialize.apply(this,arguments),i.extend(this,i.pick(t,I)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];i.extend(x.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof n.$?t:n.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;for(var n in this.undelegateEvents(),t){var u=t[n];if(i.isFunction(u)||(u=this[u]),u){var l=n.match(C);this.delegate(l[1],l[2],u.bind(this))}}return this},delegate:function(t,n,i){return this.$el.on(t+".delegateEvents"+this.cid,n,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,n,i){return this.$el.off(t+".delegateEvents"+this.cid,n,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var addUnderscoreMethods=function(t,n,u,l){i.each(u,(function(i,u){n[u]&&(t.prototype[u]=function(t,n,i,u){switch(n){case 1:return function(){return t[i](this[u])};case 2:return function(n){return t[i](this[u],n)};case 3:return function(n,l){return t[i](this[u],cb(n,this),l)};case 4:return function(n,l,d){return t[i](this[u],cb(n,this),l,d)};default:return function(){var n=d.call(arguments);return n.unshift(this[u]),t[i].apply(t,n)}}}(n,i,u,l))}))},cb=function(t,n){return i.isFunction(t)?t:i.isObject(t)&&!n._isModel(t)?modelMatcher(t):i.isString(t)?function(n){return n.get(t)}:t},modelMatcher=function(t){var n=i.matches(t);return function(t){return n(t.attributes)}};i.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(t){var n=t[0],u=t[1],l=t[2];n.mixin=function(t){var u=i.reduce(i.functions(t),(function(t,n){return t[n]=0,t}),{});addUnderscoreMethods(n,t,u,l)},addUnderscoreMethods(n,i,u,l)})),n.sync=function(t,u,l){var d=M[t];i.defaults(l||(l={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var p={type:d,dataType:"json"};if(l.url||(p.url=i.result(u,"url")||urlError()),null!=l.data||!u||"create"!==t&&"update"!==t&&"patch"!==t||(p.contentType="application/json",p.data=JSON.stringify(l.attrs||u.toJSON(l))),l.emulateJSON&&(p.contentType="application/x-www-form-urlencoded",p.data=p.data?{model:p.data}:{}),l.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===d)){p.type="POST",l.emulateJSON&&(p.data._method=d);var h=l.beforeSend;l.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",d),h)return h.apply(this,arguments)}}"GET"===p.type||l.emulateJSON||(p.processData=!1);var g=l.error;l.error=function(t,n,i){l.textStatus=n,l.errorThrown=i,g&&g.call(l.context,t,n,i)};var v=l.xhr=n.ajax(i.extend(p,l));return u.trigger("request",u,v,l),v};var M={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var O=n.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,L=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(O.prototype,h,{preinitialize:function(){},initialize:function(){},route:function(t,u,l){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(u)&&(l=u,u=""),l||(l=this[u]);var d=this;return n.history.route(t,(function(i){var p=d._extractParameters(t,i);!1!==d.execute(l,p,u)&&(d.trigger.apply(d,["route:"+u].concat(p)),d.trigger("route",u,p),n.history.trigger("route",d,u,p))})),this},execute:function(t,n,i){t&&t.apply(this,n)},navigate:function(t,i){return n.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,n=i.keys(this.routes);null!=(t=n.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(P,"(?:$1)?").replace(N,(function(t,n){return n?t:"([^/?]+)"})).replace(L,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,n){var u=t.exec(n).slice(1);return i.map(u,(function(t,n){return n===u.length-1?t||null:t?decodeURIComponent(t):null}))}});var q=n.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,j=/#.*$/;q.started=!1,i.extend(q.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var n=(t||this).location.href.match(/#(.*)$/);return n?n[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(V,"")},start:function(t){if(q.started)throw new Error("Backbone.history has already been started");if(q.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(U,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var n=this.root.slice(0,-1)||"/";return this.location.replace(n+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var u=document.body,l=u.insertBefore(this.iframe,u.firstChild).contentWindow;l.document.open(),l.document.close(),l.location.hash="#"+this.fragment}var d=window.addEventListener||function(t,n){return attachEvent("on"+t,n)};if(this._usePushState?d("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?d("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,n){return detachEvent("on"+t,n)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),q.started=!1},route:function(t,n){this.handlers.unshift({route:t,callback:n})},checkUrl:function(t){var n=this.getFragment();if(n===this.fragment&&this.iframe&&(n=this.getHash(this.iframe.contentWindow)),n===this.fragment)return!1;this.iframe&&this.navigate(n),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,(function(n){if(n.route.test(t))return n.callback(t),!0})))},navigate:function(t,n){if(!q.started)return!1;n&&!0!==n||(n={trigger:!!n}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var u=i+t;t=t.replace(j,"");var l=this.decodeFragment(t);if(this.fragment!==l){if(this.fragment=l,this._usePushState)this.history[n.replace?"replaceState":"pushState"]({},document.title,u);else{if(!this._wantsHashChange)return this.location.assign(u);if(this._updateHash(this.location,t,n.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var d=this.iframe.contentWindow;n.replace||(d.document.open(),d.document.close()),this._updateHash(d.location,t,n.replace)}}return n.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,n,i){if(i){var u=t.href.replace(/(javascript:|#).*$/,"");t.replace(u+"#"+n)}else t.hash="#"+n}}),n.history=new q;v.extend=y.extend=O.extend=x.extend=q.extend=function(t,n){var u,l=this;return u=t&&i.has(t,"constructor")?t.constructor:function(){return l.apply(this,arguments)},i.extend(u,l,n),u.prototype=i.create(l.prototype,t),u.prototype.constructor=u,u.__super__=l.prototype,u};var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(t,n){var i=n.error;n.error=function(u){i&&i.call(n.context,t,u,n),t.trigger("error",t,u,n)}};return n}))}).call(this,i(39))},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(7),p=l.a.extend({},LearnosityApp._internal.config);p.domain=d.a.isChromeApp?function getChromeAppManifestDomain(){return(l.a.isFunction(chrome.runtime.getManifest)?chrome.runtime.getManifest():{}).domain||window.location.hostname}():window.location.hostname,n.a=p},function(t,n,i){"use strict";var u=navigator.userAgent.toLowerCase(),l=u.match(/(opera|ie|edge|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],d=l[1],p=parseInt(l[2],10),h="ie"===d&&p<8&&/trident/i.test(u),g=!!u.match(/android|webos|iphone|ipad|ipod|blackBerry|windows phone|opera mini|iemobile/i),v=!!u.match(/applewebkit/),y=/^((?!android|chrome).)*safari/i.test(navigator.userAgent),S=!(!window.chrome||!window.chrome.runtime||"[object Function]"!==Object.prototype.toString.call(window.chrome.runtime.getManifest)),E=!!navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod","MacIntel"].indexOf(navigator.platform)>=0;u.match(/trident.*rv[ :]*11\./)&&(d="ie",p=11),u.match(/edge/)&&(d="edge"),"version"===d&&(d=l[3]),n.a={browser:d,version:p,compatibilityMode:h,isMobile:g,isChromeApp:S,isAppleWebKit:v,isValidDOCTYPE:function isValidDOCTYPE(t){return!(!t||!t.doctype||"html"!==t.doctype.name)},isIOS:E,isMicrosoft:"ie"===d||"edge"===d,isSafari:y}},function(t,n,i){"use strict";var u=i(5),l=i.n(u),d=i(0),p=i.n(d),h=i(17),g=i.n(h),v=i(12),y=i(4),S=i(3),E=i(45),w=i(29);function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var A=function(){function DynamicContentService(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,DynamicContentService);var u=i.state;this.model=t,this.activityState=u,this.addModelDynamicContentFacade(),t.once(t.EVENT.READY,(function(){n.initialize()}))}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(DynamicContentService,[{key:"initialize",value:function initialize(){var t,n=this,i=this.model,u=i.get("response")||{},l=u.value,d=u.dynamic||{},h=d.attempts,g=d.id;if("review"===this.activityState&&!p.a.isEmpty(h)&&g){var v=p.a.findWhere(h,{id:g});v?v.value=l:h.push({id:g,value:l})}this.originalQuestion=i.get("originalQuestion"),t=this.getStoredResponseRowId()||this.getDefaultRowId(),this._isInitializing=!0,delete this._rowId,this.setModelDataWithRowId(t),this._isInitializing=!1,"review"!==this.activityState&&i.on(i.EVENT.MODIFIED,(function(){var t=i.get("response").value;n.setResponseDynamicData(n._rowId,t)}))}},{key:"addModelDynamicContentFacade",value:function addModelDynamicContentFacade(){var t=this;this.model.dynamic={nextAttempt:function nextAttempt(){var n=t.getPotentialRowId(!0);return t.setModelDataWithRowId(n)},previousAttempt:function previousAttempt(){var n=t.getPotentialRowId(!1);return t.setModelDataWithRowId(n)},totalAttempts:function totalAttempts(){var n=t.getRows();return p.a.isArray(n)?n.length:0},currentAttemptIndex:function currentAttemptIndex(){var n=t.getRowById(t._rowId),i=t.getRows();return p.a.indexOf(i,n)}}}},{key:"setResponseDynamicData",value:function setResponseDynamicData(t,n){if("review"!==this.activityState&&!p.a.isUndefined(n)){var i,u=this.model,l=u.get("response")||{},d=this.getStoredResponseRowId()||this.getDefaultRowId(),h=l.dynamic||{};h.id=t,h.attempts=h.attempts||[],(i=p.a.findWhere(h.attempts,{id:d}))||(i={},h.attempts.push(i)),i.id=d,i.value=p.a.deepClone(n),l.dynamic=h,u.set({response:l},{silent:!0})}}},{key:"setModelDataWithRowId",value:function setModelDataWithRowId(t){if(!p.a.isUndefined(t)){var n=this.model,i=this.getTransformedQuestion(t),u=n.get("response"),l=u&&u.value||null;if(n.set("question",i,{silent:!0}),n.validateStartup(),n.set("dynamicContentRowId",t),n.trigger("dynamicContent:changed",t),!this._isInitializing)if("review"===this.activityState){var d=this.getResponseValueByRowId(t),h=p.a.isUndefined(d)?null:d;n.updateResponseValue(h,{setAsModified:!1}),n.getScorer().reset(n.toJSON())}else n.updateResponseValue(null),this.setResponseDynamicData(t,l);return this._rowId=t,i}}},{key:"getResponseValueByRowId",value:function getResponseValueByRowId(t){var n=(this.model.get("response")||{}).dynamic||{},i=p.a.findWhere(n.attempts,{id:t});return i&&i.value}},{key:"getPotentialRowId",value:function getPotentialRowId(t){var n=this.getStoredResponseRowId()||this.getDefaultRowId(),i=this.getRowById(n),u=this.getRows(),l=p.a.indexOf(u,i);return u[t?l+1<=u.length-1?l+1:0:l-1>=0?l-1:u.length-1].id}},{key:"getRowById",value:function getRowById(t){var n=(this.originalQuestion||{}).dynamic;return p.a.findWhere(n&&n.rows,{id:t})}},{key:"getStoredResponseRowId",value:function getStoredResponseRowId(){if("review"===this.activityState&&!p.a.isUndefined(this._rowId))return this._rowId;var t=this.model.get("response")||{},n=p.a.getNested(t,"dynamic.id");return p.a.isString(n)?n:this._rowId}},{key:"getDefaultRowId",value:function getDefaultRowId(){var t=this.getRows();if(t)return t[0].id}},{key:"getRows",value:function getRows(){var t=(this.originalQuestion||{}).dynamic;if(!p.a.isEmpty(t.rows))return t.rows}},{key:"getTransformedQuestion",value:function getTransformedQuestion(t){return this.model.getScorer().getFormattedQuestion(this.originalQuestion,t)}},{key:"reset",value:function reset(){var t=this.model;t.shuffleService?t.shuffleService.reInitialize():t.shuffleServices&&p.a.each(t.shuffleServices,(function(t){return t.reInitialize()}))}}],[{key:"isDynamicContentModel",value:function isDynamicContentModel(t){var n=t.get("question"),i=n.dynamic,u=n.type;return w.a.isWhiteListed(u)&&!(!i||p.a.isEmpty(i.rows)||p.a.isEmpty(i.cols))}}]),DynamicContentService}(),T=i(33),R=/v(\d+).(\d+).(\d+)/;n.a=l.a.Model.extend({VALID_RESPONSE_ID_RE:/^[\w\-]+$/,STATE:{INITIAL:"initial",MODIFIED:"modified",SAVED:"saved"},TYPE:S.QUESTION_TYPES,RESPONSE_TYPE:{ARRAY:"array",AUDIO:"audio",AUDIOPNG:"audio+png",BOOLEAN:"boolean",IMAGE:"image",NUMERIC:"numeric",OBJECT:"object",STRING:"string",VIDEO:"video"},EVENT:{MODIFIED:"modified",CALLVALIDATE:"callValidate",MASKED:"masked",READY:"ready"},FONTSIZE_PREFIX:"lrn_font_size_",FONTSIZE:T.a,FONTSIZE_MAP:T.b,VALID_OVERRIDDEN_ATTRIBUTES_LIST:["spellcheck","instant_feedback"],initialize:function initialize(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validState={valid:!0,errors:[]},this.state=this.STATE.INITIAL,this.lastModified=(new Date).getTime(),this.captured=!1,this.viewClass=null,this.activity=null,this.once(this.EVENT.READY,(function(){n.ready=!0})),this.activityOptions=i,this.setOriginalQuestion(this.get("question")),p.a.isEmpty(this.activityOptions.attribute_overrides)||this.overrideQuestionAttributes()},overrideQuestionAttributes:function overrideQuestionAttributes(){var t=this;p.a.each(t.VALID_OVERRIDDEN_ATTRIBUTES_LIST,(function(n){var i=p.a.getNested(t.activityOptions.attribute_overrides,n);t.get("question")[n]!==i&&(t.get("question")[n]=i)}))},setOriginalQuestion:function setOriginalQuestion(t){var n=this.activityOptions;this.set({originalQuestion:p.a.deepClone(t),question:p.a.deepClone(t)},{silent:!0}),this.dynamicContentService&&(this.set("isDynamicContent",!1),this.dynamicContentService.reset(),delete this.dynamicContentService),A.isDynamicContentModel(this)?(this.dynamicContentService=new A(this,n),this.set("isDynamicContent",!0)):this.validateStartup()},trackEvent:function trackEvent(t){v.a.trackEvent("QuestionType Event",this.get("type"),t,0,!0)},validateStartup:function validateStartup(){var t=this.get("question");p.a.isString(this.get("question").stimulus_review)&&(t.stimulus_review=g.a.sanitizeHTML(t.stimulus_review)),p.a.isString(t.description)&&(t.description=g.a.sanitizeHTML(t.description)),p.a.isString(t.stimulus)&&(t.stimulus=g.a.sanitizeHTML(t.stimulus)),p.a.isString(t.instructor_stimulus)&&(t.instructor_stimulus=g.a.sanitizeHTML(t.instructor_stimulus)),this.hasStimulusObject()&&t.stimulus.content&&(t.stimulus.content=g.a.sanitizeHTML(t.stimulus.content))},getApiVersion:function getApiVersion(){return this.apiVersion},setApiVersion:function setApiVersion(t){this.apiVersion=t},getResponseApiVersion:function getResponseApiVersion(){return this.hasResponse()?this.get("response").hasOwnProperty("apiVersion")?this.get("response").apiVersion:"v1.19.6":null},isHigherApiVersion:function isHigherApiVersion(t,n){if("latest"===t)return t!==n;var i=t.match(R).splice(1),u=n.match(R).splice(1);return i[0]>u[0]||i[0]===u[0]&&i[1]>u[1]||i[0]===u[0]&&i[1]===u[1]&&i[2]>u[2]},update:function update(t){this.set(t,{silent:!0}),this.has("creation_date")&&this.setAsCaptured(),this.get("saved")&&this.setAsSaved()},hasResponse:function hasResponse(){return this.has("response")&&!p.a.isEmpty(this.get("response"))},clearResponse:function clearResponse(){this.hasResponse()&&(this.unset("response"),this.state=this.STATE.INITIAL,this.lastModified=(new Date).getTime(),this.trigger(this.EVENT.MODIFIED))},getResponseMetadata:function getResponseMetadata(){return this.hasResponse()?p.a.deepClone(this.get("response").metadata):void 0},setActivity:function setActivity(t){return this.activity=t,this.processActivityFlags(),this},processActivityFlags:function processActivityFlags(){},setResponseMetadata:function setResponseMetadata(t){return this.hasResponse()?(this.get("response").metadata=t,this.setAsModified(),!0):(y.a.exception({code:10026,detail:"Cannot set response metadata; question with response ID "+this.get("response_id")+" has no response"}),!1)},getResponseValue:function getResponseValue(){return this.hasResponse()?this.get("response").value:void 0},updateResponseValue:function updateResponseValue(t,n){var i;this.processResponseValue(t),n&&!1===n.setAsModified||(i=this.get("response"))&&(i.apiVersion=this.getApiVersion(),this.setAsModified())},processResponseValue:function processResponseValue(t){throw new Error("Unimplemented function processResponseValue for question type:"+this.get("type"))},hasAllowedResponse:function hasAllowedResponse(){return!0},hasStimulus:function hasStimulus(){return p.a.isString(this.get("question").stimulus)},hasStimulusObject:function hasStimulusObject(){return p.a.isObject(this.get("question").stimulus)},hasStimulusReview:function hasStimulusReview(){return p.a.isString(this.get("question").stimulus_review)||p.a.isString(this.get("question").description)},getStimulus:function getStimulus(){return this.hasStimulus()?this.get("question").stimulus:this.hasStimulusObject()&&this.get("question").stimulus.content?this.get("question").stimulus.content:""},getStimulusReview:function getStimulusReview(){return p.a.isString(this.get("question").stimulus_review)?this.get("question").stimulus_review:p.a.isString(this.get("question").description)?this.get("question").description:""},getInstructorStimulus:function getInstructorStimulus(){return p.a.isString(this.get("question").instructor_stimulus)?this.get("question").instructor_stimulus:""},hasReachedMinLimit:function hasReachedMinLimit(){var t=this.getResponseValue(),n=p.a.getNested(this.get("question"),"min_selection");return n?!!t&&n<=t.length:null},isType:function isType(t){return this.get("type")===t},isAttempted:function isAttempted(){return this.hasResponse()},isCaptured:function isCaptured(){return this.captured},isModified:function isModified(){return this.state===this.STATE.MODIFIED},isSaved:function isSaved(){return this.state===this.STATE.SAVED},toBeSaved:function toBeSaved(){return this.state!==this.STATE.SAVED},setAsCaptured:function setAsCaptured(){this.captured=!0},setAsModified:function setAsModified(){if(this.state!==this.STATE.MODIFIED){this.state=this.STATE.MODIFIED;var t=this.get("response");p.a.isObject(t)&&(p.a.isNumber(t.revision)?t.revision+=1:t.revision=1)}this.lastModified=(new Date).getTime(),this.trigger(this.EVENT.MODIFIED)},setAsSaved:function setAsSaved(){this.state=this.STATE.SAVED,this.lastModified=(new Date).getTime()},getLastModifiedTime:function getLastModifiedTime(){return this.lastModified},getScorer:function getScorer(){if(!this.scorer||this._prevModifiedForScorer!==this.lastModified)if(this._prevModifiedForScorer=this.lastModified,this.scorer)this.scorer.reset(this.toJSON());else{var t=this.getScorerClass();0,this.scorer=new t(this.toJSON(),{includeError:!1})}return this.scorer},getScorerClass:function getScorerClass(){return E.a},getScore:function getScore(){var t=this.getScorer();return p.a.isNumber(t.maxScore())?{max_score:t.maxScore(),score:t.score()}:null},getResponseId:function getResponseId(t,n,i){var u=new RegExp(i+"_"+n+"_([\\w\\-]+)").exec(t);return u?u[1]:null},getIdForResponseId:function getIdForResponseId(t,n,i){return i+"_"+n+"_"+t},getJsonToCapture:function getJsonToCapture(){return{id:this.get("id"),type:this.get("type"),response_id:this.get("response_id"),user_id:this.get("user_id"),question:this.get("originalQuestion")}},getJsonToSave:function getJsonToSave(){var t={id:this.id};return this.isModified()&&(t.response=this.get("response")),t},getResponseJsonForClient:function getResponseJsonForClient(){return this.hasResponse()?p.a.deepClone(this.get("response")):null},getQuestionJsonForClient:function getQuestionJsonForClient(){return p.a.deepClone(this.get("originalQuestion"))},getMetadataForClient:function getMetadataForClient(){return p.a.deepClone(this.getMetadata())},getMetadata:function getMetadata(){return this.get("question").metadata},getGroupJsonAttributes:function getGroupJsonAttributes(){var t=[],n=this.get("question");return n.hasOwnProperty("validation_group")&&t.push({name:"validation_group",value:n.validation_group}),t},getFontClass:function getFontClass(){var t=this.get("question"),n="";return p.a.isUndefined(this.activity.get("fontsize"))||(n=this.FONTSIZE[this.activity.get("fontsize").toUpperCase()]||""),p.a.hasProperty(t,"ui_style.fontsize")&&p.a.contains(this.FONTSIZE,t.ui_style.fontsize)&&(n=this.FONTSIZE[t.ui_style.fontsize.toUpperCase()]||""),n&&(n=this.FONTSIZE_PREFIX+n),n},getFontSize:function getFontSize(){return this.FONTSIZE_MAP[this.getFontClass().replace(new RegExp(this.FONTSIZE_PREFIX),"")]||this.FONTSIZE_MAP[this.FONTSIZE.NORMAL]},mapValidationMetadata:function mapValidationMetadata(){return!1}})},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(6),p=i(2);function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var h,g,v="application/x-www-form-urlencoded; charset=UTF-8",y=function isString(t){return"[object String]"===Object.prototype.toString.call(t)},S=function isFunction(t){return"[object Function]"===Object.prototype.toString.call(t)},E=!!(window.chrome&&window.chrome.runtime&&S(window.chrome.runtime.getManifest)),w=E?"webview":"iframe",A=0,T=!1,R=[];function _param(t){var n=[],i=function add(t,i){n[n.length]="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i))};if(function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}(t))for(var u,l=t.length-1;l>=0;l--)i((u=t[l]).name,u.value);else for(var d in t)if(t.hasOwnProperty(d)){var p=t[d];y(p)||(p=JSON.stringify(p)),i(d,p)}return n.join("&").replace(/%20/g,"+")}var x=null,C=!1,I=function(){function PostMessageProxyRequest(){!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,PostMessageProxyRequest),this.headers={}}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(PostMessageProxyRequest,[{key:"open",value:function open(t,n){this.method=t,this.url=n}},{key:"setRequestHeader",value:function setRequestHeader(t,n){this.headers[t]=n}},{key:"getResponseHeader",value:function getResponseHeader(t){return this.responseHeaders[t]}},{key:"send",value:function send(t){var n=this;if(PostMessageProxyRequest.iFrame){var i=function _getRequestId(){return A++}(),u={method:this.method,url:this.url,headers:this.headers,data:t,requestId:i};window.addEventListener("message",(function messageHandler(t){var u;if(0===n.url.indexOf(t.origin)){if("string"==typeof t.data)try{u=JSON.parse(t.data)}catch(t){console.error("Error parsing JSON from iframe message",t)}u&&u.id===i&&(window.removeEventListener("message",messageHandler),n.responseHeaders=function _parseResponseHeaders(t){var n={};if(!t)return n;for(var i=t.split("\r\n"),u=0;u<i.length;u++){var l=i[u],d=l.indexOf(": ");if(d>0){var p=l.substring(0,d),h=l.substring(d+2);n[p]=h}}return n}(u.headers),n.status=u.status,n.responseText=u.responseText,u.status>0?n.onload.call(n):n.onerror.call(n))}})),PostMessageProxyRequest.iFrame.contentWindow.postMessage(JSON.stringify(u),g)}else!1!==PostMessageProxyRequest.iFrameLoadingTimeout?R.push([this,t]):(this.status=0,this.responseText="The fallback iframe failed to load",this.onerror.call(this))}}],[{key:"iFrame",get:function get(){return x},set:function set(t){x=t}},{key:"iFrameLoadingTimeout",get:function get(){return C},set:function set(t){C=t}}]),PostMessageProxyRequest}();function xhr_sendRequest(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.data=_param(t.data),t.method=t.method||"GET",t.error=S(t.error)?t.error:function(){},t.success=S(t.success)?t.success:function(){},t.parseResponse=!t.hasOwnProperty("parseResponse")||t.parseResponse;var n=new I;if("GET"===t.method){var i="?";-1!==t.url.indexOf("?")&&(i+="&"),t.url+=i+t.data}if(n.open(t.method,h+t.url),t.headers)for(var u in t.headers)t.headers.hasOwnProperty(u)&&n.setRequestHeader(u,t.headers[u]);function callError(n,i){if(t.parseResponse)try{i=JSON.parse(i)}catch(t){}t.error.call(null,{status:n,response:i})}n.setRequestHeader("Content-Type",v),n.onload=function(){var i=n.responseText;if(n.status>=200&&n.status<=300)try{i&&i.length>0&&t.parseResponse&&(i=JSON.parse(i));try{t.success.call(null,{status:n.status,response:i})}catch(t){callError(-1,"".concat(t.name," on success handler, msg: ").concat(t.message))}}catch(t){callError(-1,"error parsing response: ".concat(t.message,". Response: ").concat(i))}else callError(n.status,i)},n.onerror=function(){callError(n.status,n.responseText)};try{n.send("POST"===t.method||"PUT"===t.method?t.data:null)}catch(t){var l=t.name&&t.message?"".concat(t.name," when sending request, msg: ").concat(t.message):"Failed to initialize xdomain iframe, throw: ".concat(t.toString());callError(-1,l)}}function init(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p.default((function(n,i){if(T)n();else{if(!h&&!y(t.baseUrl))throw new Error("baseUrl must be a string.");if(!g&&!y(t.iframeBaseUrl))throw new Error("iframeBaseUrl must be a string.");h=t.baseUrl||h,g=t.iframeBaseUrl||g;var u,l,d=E?"?chromeApp":"",p="".concat("/xdomain").concat(d),v=".".concat("x-origin-frame"),S=setTimeout((function(){I.iFrameLoadingTimeout=!0,window.removeEventListener("message",A),i({status:"timeout"})}),1e4),A=function readyHandler(t){if(g&&0===g.indexOf(t.origin)){var i;if("string"==typeof t.data)try{i=JSON.parse(t.data)}catch(t){console.error("Error parsing JSON from iframe message",t)}if(i&&i.ready){T=!0,I.iFrame=l,I.iFrameLoadingTimeout=!1,clearTimeout(S);for(var u=0;u<R.length;u++)R[u][0].send(R[u][1]);R=[],window.removeEventListener("message",readyHandler),n()}}};if(document.querySelectorAll)u=document.querySelectorAll(v);else{u=[];for(var x=document.getElementsByTagName(w),C=x.length-1;C>=0;C--)-1!==x[C].className.indexOf(v)&&u.push(x[C])}for(var M=u.length-1;M>=0;M--)-1!==u[M].src.indexOf(g+p)&&(l=u[M]);if(void 0===l&&((l=document.createElement(w)).className="x-origin-frame",l.frameBorder=0,l.marginWidth=0,l.marginHeight=0,l.style.width=0,l.style.height=0,l.style.position="absolute",l.style.top="-1000px",l.setAttribute("aria-hidden","true"),l.src=g+p,document.body.appendChild(l)),E?l.addEventListener("loadstop",(function(t){window.addEventListener("message",A),l.contentWindow.postMessage({command:"handshake"},"*")})):window.addEventListener("message",A),"[object Function]"===Object.prototype.toString.call(t.wrongIframeMsgCallback)){window.addEventListener("message",(function wrongIframeMsgHandler(n){if(0===g.indexOf(n.origin)){var i=JSON.parse(n.data);i.error&&t.wrongIframeMsgCallback(i.error,i.data)}}))}}}))}var M={request:function xhr_request(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments;t.error=t.error||function(){},init().then((function(){return xhr_sendRequest.apply(null,n)})).catch((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.error.call(null,n)}))},init:init},O=i(30),P=[];d.a&&!0!==d.a.deferXhrInit&&M.init({baseUrl:d.a.apiHost,iframeBaseUrl:d.a.apiHost}).catch((function(){}));n.a={ACTION:{GET:"get",SET:"set",UPDATE:"update",DELETE:"delete"},setMetricsContext:function setMetricsContext(t){P=t},request:function request(t){var n,i={action:t.action||this.ACTION.GET,security:t.security},u=(n=t.url,t.analytics&&t.analytics.sessionId&&(n+=t.url.indexOf("?")>0?"":"?",n+="&a=".concat(i.action),n+="&c=".concat(i.security.consumer_key),n+="&s=".concat(t.analytics.sessionId)),n),d=0,p=function isRetryableError(t){return t&&t.status>=0&&t.status<100};t.data&&(i.usrequest=t.data),l.a.isArray(P)&&(i.usrequest=i.usrequest||{},i.usrequest.metricsContext=P),function sendRequest(){M.request({url:u,method:"POST",data:i,success:function success(){t.success.apply(null,arguments)},error:function error(n){d++,p(n)&&d<=3?l.a.delay(sendRequest,500*d):!0!==Object(O.b)()&&t.failure.apply(null,arguments)}})}()}}},function(t,n,i){"use strict";var u=i(0),l=i.n(u);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function round(t,n){switch(n){case"none":return t;case"ceiling":return Math.ceil(t);default:return Math.floor(t)}}function generateScore(t){var n=l.a.extend({allowNegative:!1,rawScore:null,maxScore:null},t),i=n.rawScore;return l.a.isNumber(i)?(i=Math.min(i,n.maxScore),n.allowNegative||(i=Math.max(0,i)),i):i}function areStringsEqual(t,n,i){var u=l.a.isString(t)&&l.a.isString(n);return u&&!i.caseSensitive&&(t=t.toLowerCase(),n=n.toLowerCase()),u&&i.removeWhitespace&&(t=t.replace(/ | /g,""),n=n.replace(/ | /g,"")),t===n}function validateValueString(t,n,i){return!(i.strictEquality&&(l.a.isUndefined(n)||null===n)&&!l.a.isUndefined(t)&&null!==t&&_typeof(n)!==_typeof(t))&&(i.trimWhiteSpace&&l.a.isString(n)&&l.a.isString(t)&&(n=n.trim(),t=t.trim()),l.a.isEmpty(n)&&l.a.isEmpty(t)||areStringsEqual(n,t,i))}function validateValueMath(t,n,i){return!!validateMathLists(n,t?[t]:[],i.validateSingleSpec,1,null).isValid}function findMaxValueElements(t,n){if(!t.length)return[];var i=[],u=n(t[0]);return l.a.each(t,(function(t){var l=n(t);l>u?(u=l,i=[t]):d(l,u)&&i.push(t)})),i}function countValue(t,n){return t.filter((function(t){return t===n})).length}function getScoringSettings(t,n,i){return{scoringType:n.validation.scoring_type,scoreIfCorrect:l.a.isNumber(t.score)?t.score:i.score,penaltyIfIncorrect:-Math.abs(l.a.isNumber(n.validation.penalty)?n.validation.penalty:i.penaltyScore),rounding:n.validation.rounding||i.rounding}}function getSubmittedValues(t){var n=[];return t.response&&t.response.value&&(n=t.response.value),n}function setGlobalValidityAndScore(t,n,i){t.globalValidity=function computeGlobalValidity(t,n,i){switch(t){case"exactMatch":return function computeGlobalValidityExactMatch(t,n){return t.length?t.length===n.length&&!!l.a.all(t):void 0}(n,i);case"partialMatch":case"partialMatchV2":return function computeGlobalValidityPartialMatch(t,n){return t.length?!!l.a.any(t):void 0}(n)}}(n.scoringType,t.validityPerValue,i),t.score=function computeScore(t,n,i,u,l,d,p){function computeScorePartialMatch(t,n,i){var u=0;return i.forEach((function(i){switch(i){case!1:case null:case void 0:u+=n;break;case!0:u+=t}})),u}switch(t){case"exactMatch":return function computeScoreExactMatch(t,n,i){switch(i){case!1:return n;case!0:return t;default:return 0}}(n,i,u);case"partialMatch":return computeScorePartialMatch(n,i,l);case"partialMatchV2":return round(computeScorePartialMatch(n,i,l)/d,p)}}(n.scoringType,n.scoreIfCorrect,n.penaltyIfIncorrect,t.globalValidity,t.validityPerValue,i.length,n.rounding),t.maxScore=function computeMaxScore(t,n,i){return"partialMatch"===t?n*i.length:n}(n.scoringType,n.scoreIfCorrect,i)}function generateValidationResult(t,n,i,u){var d=n.value,p=t.question,h={},g=getSubmittedValues(t),v=getScoringSettings(n,p,i);h.authoredResponse=n,h.validityPerValue=function validateValues(t,n,i){return{validateValuesString:function validateValuesString(t,n,i){return l.a.map(t,(function(t,u){return validateValueString(n[u],t,i)}))},validateValuesEquality:function validateValuesEquality(t,n){return l.a.map(t,(function(t,i){return l.a.isEqual(t,n[i])}))},validateValuesIgnoreOrder:function validateValuesIgnoreOrder(t,n){var i=l.a.clone(n);return l.a.map(t,(function(t){var n=l.a.indexOf(i,t);return n>=0&&(delete i[n],!0)}))},validateValuesMath:function validateValuesMath(t,n,i){return l.a.map(t,(function(t,u){return validateValueMath(n[u],t,i)}))},customValidation:function customValidation(t,n,i){if(l.a.isFunction(i.customValidation))return i.customValidation(t,n,i)}}[getValidationFunctionName(i)].apply(null,[t,n,i])}(g,d,u),setGlobalValidityAndScore(h,v,d);var y=JSON.stringify(t.response);return"{}"!==y&&"[]"!==y||(h.score=null),h}function generateValidationResultFromAllPossibleAnswers(t,n,i,u){var d=function getAllPossibleAnswers(t){var n=[];return l.a.each(t,(function(t){l.a.each(t.value,(function(t,i){l.a.isUndefined(n[i])&&(n[i]=[]),n[i].push(t)}))})),n}(n);if(l.a.isEmpty(d))return{};var p=t.question,h={},g=getSubmittedValues(t),v=getScoringSettings(n[0],p,i),y=function validateValuesForAllPossibleAnswers(t,n,i){return{validateValuesString:function validateValuesString(t,n,i){var u=[];return{valueList:l.a.map(t,(function(t,d){var p=n[d],h=l.a.findIndex(p,(function(n){return!l.a.isEmpty(n)&&validateValueString(n,t,i)}));return-1!==h&&(l.a.isUndefined(u[h])?u[h]=1:u[h]++,!0)})),indexMatchCount:u}},validateValuesEquality:function validateValuesEquality(t,i,u){var d=[];return{valueList:l.a.map(t,(function(t,i){var u=n[i],p=l.a.findIndex(u,(function(n){return l.a.isEqual(t,n)}));return-1!==p&&(l.a.isUndefined(d[p])?d[p]=1:d[p]++,!0)})),indexMatchCount:d}},validateValuesIgnoreOrder:function validateValuesIgnoreOrder(t,n,i){var u=l.a.clone(n),d=[];return{valueList:l.a.map(t,(function(t){var n=-1;l.a.each(u,(function(i,p){var h=l.a.indexOf(i,t);return-1===n&&l.a.indexOf(i,h>=0)&&(n=p,l.a.isUndefined(d[h])?d[h]=1:d[h]++),n>=0&&(delete u[n],!0)}))})),indexMatchCount:d}},validateValuesMath:function validateValuesMath(t,n,i){var u=[];return{valueList:l.a.map(t,(function(t,d){var p=n[d],h=l.a.findIndex(p,(function(n){return validateValueMath(n,t,i)}));return-1!==h&&(l.a.isUndefined(u[h])?u[h]=1:u[h]++,!0)})),indexMatchCount:u}},customValidation:function customValidation(t,n,i){if(l.a.isFunction(i.customValidation))return i.customValidation(t,n,i)}}[getValidationFunctionName(i)].apply(null,[t,n,i])}(g,d,u),S=0,E=0;l.a.each(y.indexMatchCount,(function(t,n){l.a.isNumber(t)&&t>E&&(E=t,S=n)})),n[S]?(h.authoredResponse=n[S],h.authoredResponse.score=v.scoreIfCorrect):h.authoredResponse=n[0],h.validityPerValue=y.valueList,setGlobalValidityAndScore(h,v,d);var w=JSON.stringify(t.response);return"{}"!==w&&"[]"!==w||(h.score=null),h}function getValidationFunctionName(t){return t?t.validateSingleSpec?"validateValuesMath":t.ignoreOrder?"validateValuesIgnoreOrder":l.a.isFunction(t.customValidation)?"customValidation":"validateValuesString":"validateValuesEquality"}var d=function epsEqu(t,n){return Math.abs(t-n)<1e-6};function validateMathLists(t,n,i,u,d){for(var p,h,g,v,y,S,E={},w={},A=[],T=0;T<n.length;T++){delete E.intern,h=n[T],l.a.isArray(h)?v=u:(v=l.a.isNumber(n[T].score)?n[T].score:u,A.push(v),h=n[T].value),h=h||[];for(var R=0;R<h.length;R++){var x=["method: "+(g=h[R]).method];g.value&&x.push("value: '"+g.value+"'"),g.options&&x.push("options: "+JSON.stringify(g.options)),"string"==typeof g.options&&(g.options=JSON.parse(g.options)),l.a.isString(t)&&(p=i(g,t),void 0===E.intern&&!0===p.result&&(E.intern=!0),p.result||(E.intern=!1),!0!==p.result&&!1!==p.result&&(w.error={code:p.errorCode,name:"MathQuestionException",message:p.message+" Failed validating user input '"+t+"' against validation object: "+x.join(", "),location:p.location}))}void 0===E.extern&&!1===E.intern&&(E.extern=!1,l.a.isUndefined(d)||(y=-1*d)),!0===E.intern&&(E.extern=!0,y=l.a.isUndefined(y)?v:Math.max(y,v))}return S=A.length?l.a.max(A):u,w.isValid=E.extern,w.isValid&&w.error&&"user"===w.error.location&&delete w.error,w.scoreWithFullPenalty=generateScore({allowNegative:!0,rawScore:y,maxScore:S}),w.maxScore=S,w}function isPlainObj(t){return t&&"object"==_typeof(t)&&t.constructor&&t.constructor==Object}function recursiveParameterClean(t){return isPlainObj(t)?(l.a.each(t,(function(n,i){if(isPlainObj(n))t[i]=recursiveParameterClean(n);else if(l.a.isArray(n))t[i]=l.a.map(n,recursiveParameterClean);else if(l.a.isString(n))switch(i){case"score":case"valid_score":case"penalty_score":t[i]=parseFloat(n);break;case"pairwise":case"case_sensitive":case"is_math":t[i]="true"===n.toLowerCase()||"false"!==n.toLowerCase()&&null,l.a.isNull(t[i])&&delete t[i]}})),t):t}function setCompatibilityOption(t){return"equivLiteral"===t.method&&(t.options.compatibility="v1.37"),t}n.a={round:round,normalizeScores:function normalizeScores(t,n){var i=t.isAttempted,u=l.a.getNested(n,"question.validation.min_score_if_attempted"),d=l.a.getNested(n,"question.validation.max_score"),p=l.a.getNested(n,"question.validation.unscored");l.a.isUndefined(i)&&(i=n.response&&isPlainObj(n.response)&&!!n.response.value),l.a.isBoolean(t.isValid)||(t.isValid=null),!0===p?(t.score=null,t.maxScore=null):(l.a.isNumber(t.score)?t.score=parseFloat(t.score.toFixed(4)):t.score=null,l.a.isNumber(t.maxScore)?(t.maxScore=parseFloat(t.maxScore.toFixed(4)),i&&l.a.isNull(t.score)&&t.maxScore>0&&(t.score=0)):t.maxScore=null,!1===t.automarkable&&l.a.isNumber(d)&&(t.maxScore=d),l.a.isUndefined(u)||(i&&(t.score=Math.max(t.score,u)),t.maxScore=Math.max(t.maxScore,u))),l.a.isUndefined(t.automarkable)&&(t.automarkable=!0)},scoreArray:function scoreArray(t,n,i,u){var d=function generateValidationResults(t,n,i,u){var d=[];return u&&!0===u.matchAllPossibleResponses?d.push(generateValidationResultFromAllPossibleAnswers(t,n,i,u)):l.a.each(n,(function(n){n.value&&d.push(generateValidationResult(t,n,i,u))})),d.length<=0&&(d=[{authoredResponse:void 0,validityPerValue:null,globalValidity:void 0,score:null,maxScore:0}]),d}(t,n,i,u),p=function chooseBestValidationResult(t){var n=t;return n=findMaxValueElements(n,(function(t){return t.score||0})),n=findMaxValueElements(n,(function(t){return countValue(t.validityPerValue||[],!0)})),(n=findMaxValueElements(n,(function(t){return t.maxScore||0})))[0]}(d),h=function chooseBestSuggestedResponse(t){var n=t;return n=findMaxValueElements(n,(function(t){return t.maxScore||0})),(n=findMaxValueElements(n,(function(t){return countValue(t.validityPerValue||[],!0)})))[0]}(d),g={responsesValid:p.validityPerValue,isValid:p.globalValidity,suggestedResponse:h.authoredResponse,maxScore:h.maxScore};return g.scoreWithFullPenalty=generateScore({allowNegative:!0,rawScore:p.score,maxScore:p.maxScore}),g.score=generateScore({allowNegative:t.question.validation.allow_negative_scores,rawScore:p.score,maxScore:p.maxScore}),g},generateScore:generateScore,addIfDefined:function addIfDefined(t,n){return l.a.isNumber(n)&&(l.a.isUndefined(t)&&(t=0),t+=n),t},stringCompare:areStringsEqual,scoreList:function scoreList(t,n){var i,u,d,p,h,g,v=t.question.validation,y=v.valid_response,S=l.a.isNumber(v.valid_score)?v.valid_score:n.score,E=t.response.value||[],w=S*y.length,A="orderlist"===t.question.type&&!0===v.pairwise,T=[],R=0,x=0;if(E.length){if(d=0,A){for(i=l.a.map(E,(function(t){return l.a.indexOf(y,t)})),h=0;h<i.length;h++)for(g=h+1;g<i.length;g++)x++,i[h]<i[g]&&R++;d=parseFloat((y.length*R/x).toPrecision(2)),x&&(p=l.a.isUndefined(v.partial_scoring)||v.partial_scoring?R>0:x===R)}for(h=0;h<E.length;h++)u=void 0,y[h]==E[h]?(u=S,T.push(!0)):T.push(!1),A||l.a.isUndefined(u)?!A&&l.a.isNumber(v.penalty_score)&&(d-=Math.abs(v.penalty_score)):d+=u;!A&&T.length&&(p=l.a.isUndefined(v.partial_scoring)||v.partial_scoring?l.a.any(T):l.a.all(T)),l.a.isUndefined(v.partial_scoring)||v.partial_scoring||d===w||(d=0)}return{maxScore:w,score:d,isValid:p,responsesValid:T}},normalizeParameters:function normalizeParameters(t){return recursiveParameterClean(t=l.a.clone(t))},validateMathLists:validateMathLists,sumNullableNumbers:function sumNullableNumbers(t){return l.a.reduce(t,(function(t,n){return n=l.a.isNumber(n)?n:null,l.a.isNumber(n)||l.a.isNumber(t)?n+t:null}),null)},InvalidScoringTypeException:function InvalidScoringTypeException(t,n){this.message=t+" does not support scoring type "+n,this.name="InvalidScoringTypeException",this.toString=function(){return this.name+": "+this.message}},epsEquals:d,processCompatibility:function processCompatibility(t){return l.a.each(t.question.validation.valid_response.value,(function(t){l.a.isArray(t)?l.a.each(t,(function(t){t=setCompatibilityOption(t)})):t=setCompatibilityOption(t)})),l.a.each(t.question.validation.alt_responses,(function(t){l.a.each(t.value,(function(t){l.a.isArray(t)?l.a.each(t,(function(t){t=setCompatibilityOption(t)})):t=setCompatibilityOption(t)}))})),t}}},function(t,n,i){"use strict";var u=i(5),l=i.n(u),d=i(0),p=i.n(d),h=(i(51),i(6)),g=i(4),v="data-lrn-mathjax-postprocessed",y=function isQEWidget(t){var n=["mathml_ckwidget","latex_ckwidget"];return p.a.some(t.parentNode.classList,(function(t){return n.indexOf(t)>-1}))},S=function removeMathJaxA11yFeatures(t){var n=t.querySelector(".MJX_Assistive_MathML");t.removeAttribute("data-mathml"),n&&n.parentNode.removeChild(n)},E=function postProcessMathJaxNodes(t){var n=MathJax.Hub.getAllJax(t);p.a.each(n,(function(t){if(t){var n=function findFrameNodeFor(t){return document.getElementById(t.inputID+"-Frame")}(t);if(n&&!function isFrameNodeAlreadyPostProcessed(t){return t.getAttribute(v)||y(t)}(n)){var i=function getAuthoredAriaLabelNode(t){return function getARIALabelFromWrappingSpan(t){if("span"===t.parentNode.tagName.toLowerCase())return t.parentNode.getAttribute("aria-label")}(t)?t.parentNode:function getARIALabelFromDisplayBlockParent(t){if("div"===t.parentNode.tagName.toLowerCase()&&"MathJax_Display"===t.parentNode.className)return t.parentNode.parentNode.getAttribute("aria-label")}(t)?t.parentNode.parentNode:void 0}(n);i&&function placeAriaLabel(t,n){var i=n.getAttribute("aria-label"),u=document.createElement(n.tagName);S(t),n.removeAttribute("aria-label"),u.setAttribute("aria-label",i),u.setAttribute("role","math"),n.parentNode.insertBefore(u,n),u.appendChild(n)}(n,i),function removeTabIndex(t){t.removeAttribute("tabindex")}(n),function markPostProcessed(t){t.setAttribute(v,"true")}(n)}}}))},w=function preprocessMathNodes(){var t=document.querySelectorAll(".lrn math[alttext]");p.a.each(t,(function(t){if(t.parentNode){var n=document.createElement("span"),i=t.getAttribute("alttext");n.setAttribute("aria-label",i),t.parentNode.insertBefore(n,t),n.appendChild(t),t.removeAttribute("alttext")}}))},A=i(2),T=!1,R=[],x=!1,C=null;n.a=p.a.extend({EVENT:{RENDERED:"rendered"},isInitalised:function isInitalised(){return!p.a.isUndefined(window.MathJax)||T},init:function init(){var t=this;return new A.default((function(n,u){if(p.a.isUndefined(window.MathJax)&&!T){T=!0;var l=t;i.e(73).then(i.bind(null,587)).then((function(t){var i=t.default,u=i.MathJax,d=i.MathJaxLrnConfig;u.cdnVersion="",u.OutputJax.fontDir=h.a.assetsHost+"/fonts/MathJax",u.OutputJax.imageDir=h.a.assetsHost+"/images/MathJax",u.Hub.Register.StartupHook("Begin Config",(function(t){d.config(u),u.Hub.Config({messageStyle:"none",showMathMenu:!1,tex2jax:{ignoreClass:"lrn_noMath",inlineMath:[["\\(","\\)"],["$$","$$"]],displayMath:[["\\[","\\]"]]},jax:["output/HTML-CSS"],TeX:{Macros:{abs:["{|#1|}",1],degree:["°"],longdiv:["{\\enclose{longdiv}{#1}}",1],atomic:["{_{#1}^{#2}}",2],polyatomic:["{_{#2}{}^{#1}}",2],circledot:["{\\odot}"],parallelogram:["\\unicode{x25B1}"],ngtr:["\\unicode{x226F}"],nless:["\\unicode{x226E}"],MathQuillVarField:["#1",1]}},"HTML-CSS":{availableFonts:["TeX"],minScaleAdjust:100,matchFontHeight:!1,imageFont:null}}),u.InputJax.TeX.prefilterHooks.Add((function(t){t.math=t.math.replace(/('|")/g,(function(t,n){return"{}^"+("'"===n?"\\prime ":"{\\prime\\prime}")}))})),function(){if(u.Extension.MathZoom.msieSizeBug){var t=u.Extension.MathZoom.Zoom;u.Extension.MathZoom.Zoom=function(){var n=t.apply(u.Extension.MathZoom,arguments),i=document.getElementById("MathJax_Zoom");return i.style.height="auto",i.style.width="auto",n}}}(),u.Hub.Configured(),T=!1,u.Hub.Register.StartupHook("Begin",(function(){var t=/^MathJax-Element-(\d+)$/,n=/^MathJax-Element-(\d+)-Frame$/,i=/^MathJax-Span-(\d+)$/,u=document.querySelectorAll(".MathJax, .MathJax span");p.a.each(u,(function(u){(t.test(u.id)||n.test(u.id)||i.test(u.id))&&u.removeAttribute("id")})),w()})),u.Hub.Register.StartupHook("End",(function(){E(),l._triggerRendered(),n()}))}))})).catch((function(t){g.a.log("Math rendering error: "+t),u()}))}}))},preventReRender:function preventReRender(t){var n=t.querySelectorAll('script[type="math/tex"]');p.a.each(n,(function(t){t.parentNode.removeChild(t)}))},_triggerRendered:function _triggerRendered(){R.length?this._renderFromQueue():this.trigger(this.EVENT.RENDERED)},_renderFromQueue:function _renderFromQueue(){var t,n,i=this;return!1===x&&(C=new A.default((function(u){0!==R.length?(t=R.shift(),x=!0,window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,t.el],(function(){for(E(t.el),n=0;n<t.callbacks.length;n++)t.callbacks[n]();x=!1,i._triggerRendered(),u()}))):u()}))),C},render:function render(t,n){return function addTypesetCallToTheQueue(t,n){var i,u,l;for(i=0;i<R.length;i++)if(R[i].el===t){if(p.a.isFunction(n)){for(u=0;u<R[i].callbacks.length;u++)if(R[i].callbacks[u]===n)return;R[i].callbacks.push(n)}return}l={el:t,callbacks:[]},p.a.isFunction(n)&&l.callbacks.push(n),R.push(l)}(t,n),!T&&window.MathJax?this._renderFromQueue():A.default.resolve()},remove:function remove(t){var n,i;if(t&&!T&&window.MathJax&&(i=window.MathJax.Hub.getAllJax(t),p.a.isArray(i)))for(n=0;n<i.length;n++)window.MathJax.Hub.Queue(["Remove",i[n]])}},l.a.Events)},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(6),p="",h="lrnUA";function _arrayArgs(){return Array.prototype.slice.call(arguments)}function _baseTypeCheck(t,n){return("Object"===t||"String"===t||"Array"===t||"Number"===t)&&Object.prototype.toString.call(n)==="[object "+t+"]"}function _isObject(t){return _baseTypeCheck("Object",t)}function _isArray(t){return _baseTypeCheck("Array",t)}function _isString(t){return _baseTypeCheck("String",t)}function loadUA(){p&&!window.lrn_ga&&function(t,n,i,u,l,d,p){t.GoogleAnalyticsObject=l,t[l]=t[l]||function(){(t[l].q=t[l].q||[]).push(arguments)},t[l].l=1*new Date,d=n.createElement(i),p=n.getElementsByTagName(i)[0],d.async=1,d.src="https://www.google-analytics.com/analytics.js",p.parentNode.insertBefore(d,p)}(window,document,"script",0,"lrn_ga")}function universalAnalyticsPush(t){p&&(loadUA(),_isArray(t)&&(t[0]=h+"."+t[0],window.lrn_ga.apply(null,t)))}function analyticsPush(t){p&&(!function loadGaq(){if(p&&!window._gaq){window._gaq=[];var t=document.createElement("script");t.async=!0,t.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),analyticsPush(["lrn._setAccount",p])}}(),_isArray(t)&&window._gaq.push(t))}var g={init:function init(t){var n={};_isObject(t)||(t={}),t.classicProperty&&_isString(t.classicProperty)&&-1===t.classicProperty.indexOf("{:")&&(p=t.classicProperty),p&&(n.name=function setTracker(t){return _isString(t)&&t.length&&(h=t),"."===h.slice(-1)&&(h=h.slice(0,h.length-1)),h}(t.tracker),n.cookieDomain=window.location.hostname,function _isNumber(t){return _baseTypeCheck("Number",t)}(t.siteSpeedSampleRate)&&(n.siteSpeedSampleRate=t.siteSpeedSampleRate),loadUA(),window.lrn_ga("create",p,n))},trackEvent:function trackEvent(){if(p){var t,n=_arrayArgs.apply(null,arguments);1===n.length&&_isObject(n[0])&&(t=n[0],n[0]=t.category,n[1]=t.action,n[2]=t.label,n[3]=t.value,n[4]=t.noninteraction),n[4]={nonInteraction:!!n[4]},universalAnalyticsPush(["send","event"].concat(n))}},trackTiming:function trackTiming(){if(p){var t,n=_arrayArgs.apply(null,arguments);1===n.length&&_isObject(n[0])&&(t=n[0],n[0]=t.timingCategory,n[1]=t.timingVar,n[2]=t.timingValue,n[3]=t.timingLabel),n[2]>0&&universalAnalyticsPush(["send","timing"].concat(n))}},trackPageview:function trackPageview(){if(p){var t=["send","pageview"];arguments.length&&(t=t.concat(_arrayArgs.apply(null,arguments))),universalAnalyticsPush(t)}},analyticsPush:analyticsPush,universalAnalyticsPush:universalAnalyticsPush},v="lrnDataLayer";function analyticsGTM_baseTypeCheck(t,n){return("Object"===t||"String"===t||"Array"===t||"Number"===t)&&Object.prototype.toString.call(n)==="[object "+t+"]"}function analyticsGTM_isObject(t){return analyticsGTM_baseTypeCheck("Object",t)}function analyticsGTM_isString(t){return analyticsGTM_baseTypeCheck("String",t)}function hasDataLayer(){return!!window[v]}function push(t,n){window.lrnAnalytics=window.lrnAnalytics||[],hasDataLayer()&&analyticsGTM_isObject(t)&&(t.isInternal=!0,analyticsGTM_isString(t.application)&&!t["dimensions.APPLICATION"]&&(t["dimensions.APPLICATION"]=t.application),window.lrnAnalytics.push(t),n&&resetDataLayerPush(t))}function setDataLayerObject(t,n){var i,u={};if(hasDataLayer()&&analyticsGTM_isString(t)&&analyticsGTM_isObject(n))for(i in n)n[i]&&(u[t+"."+i]=n[i]);u.event="set_"+t,push(u,!1)}function resetDataLayerPush(t){var n,i={};if(hasDataLayer()&&analyticsGTM_isObject(t)){for(n in t)void 0!==t[n]&&(i[n]=void 0);i.event="reset_data",push(i)}}function resetDataLayerObject(t){var n={};hasDataLayer()&&analyticsGTM_isString(t)&&(n.event="reset_"+t,n[t]=void 0,push(n))}var y,S,E={init:function analyticsGTM_init(t,n,i){analyticsGTM_isObject(t)||(t={}),analyticsGTM_isString(t.gtmDataLayer)&&(v=t.gtmDataLayer),analyticsGTM_isString(t.gtmContainerID)&&t.gtmContainerID,analyticsGTM_isObject(n)&&n,analyticsGTM_isObject(i)&&i},push:push,setDataLayerObject:setDataLayerObject,trackPageview:function analyticsGTM_trackPageview(t,n){var i={};hasDataLayer()&&(analyticsGTM_isObject(t)&&setDataLayerObject("pageview",t),i.event="track_pageview",i.application=n,push(i,!0),resetDataLayerObject("pageview"))},trackEvent:function analyticsGTM_trackEvent(t,n){var i={},u={};hasDataLayer()&&(t&&analyticsGTM_isObject(t)&&(i=t),u.event="track_event",u.application=n,u.eventData=i,push(u,!0))},trackTiming:function analyticsGTM_trackTiming(t,n){var i,u={};hasDataLayer()&&(analyticsGTM_isObject(t)&&(i=t),analyticsGTM_isObject(i)&&(u.event="track_timing",u.application=n,u.timing=i,push(u,!0)))},trackCustom:function trackCustom(t,n){hasDataLayer()&&analyticsGTM_isObject(t)&&(analyticsGTM_isString(t.event)||(t.event="set_custom"),push(t,!0))},resetDataLayerObject:resetDataLayerObject,resetDataLayerPush:resetDataLayerPush},w={CONSUMER:"dimension1",API_VERSION:"dimension2",REQUESTED_API_VERSION:"dimension3",QUESTION_TYPES:"dimension4",CONTEXT:"dimension5",TYPE:"dimension6",STATE:"dimension7",NUM_QUESTIONS_PER_ACT:"dimension8",CONSUMER_KEY:"dimension9",CONSUMER_PAGE_URL:"dimension10",ASSESS_LAYOUT:"dimension11",NO_ITEMS_PER_ACTIVITY:"dimension12",APPLICATION:"dimension13",ASSESS_API_VERSION:"dimension14",REQUESTED_ASSESS_API_VERSION:"dimension15",ITEMS_API_VERSION:"dimension16",REQUESTED_ITEMS_API_VERSION:"dimension17",QE_API_VERSION:"dimension18",REQUESTED_QE_API_VERSION:"dimension19",AUTHOR_API_VERSION:"dimension20",REQUESTED_AUTHOR_API_VERSION:"dimension21",REPORTS_API_VERSION:"dimension22",REQUESTED_REPORTS_API_VERSION:"dimension23",EVENTS_API_VERSION:"dimension24",REQUESTED_EVENTS_API_VERSION:"dimension25",DATA_API_VERSION:"dimension26",REQUESTED_DATA_API_VERSION:"dimension27",NUM_QUESTIONS:"dimension28",NUM_MATH_QUESTIONS:"dimension29",NUM_ITEMS:"dimension30",IS_EXISTING_SESSION:"dimension34"},A="metric1",T="metric2",R="(not set)",x=R,C=R,I=LearnosityApp.version||R,M=LearnosityApp.requestedApiVersion||R,O=R,P=R,N=R,L=R,D=R,q=0,V=0,U=0,j={},B=!1,H=!0;function setDimensions(){var t=R,n=R,i=R,u=q,d={},p=function getCleanUrl(){return window.location.hostname+window.location.pathname}(),h=R;l.a.isObject(y)&&(t=function extractQuestionTypes(){var t=R;if(l.a.has(y,"questions")&&y.questions.length){var n=l.a.uniq(l.a.compact(l.a.map(y.questions,(function(t){return t.type})))).sort();n.length&&(t=n.join(","))}return t}(),y.type&&(n=y.type),y.state&&(i=y.state),l.a.isBoolean(y.existing_session)&&(h="".concat(y.existing_session))),l.a.chain({CONSUMER:x,API_VERSION:I,REQUESTED_API_VERSION:M,QUESTION_TYPES:t,CONTEXT:D,TYPE:n,STATE:i,NUM_QUESTIONS_PER_ACT:u,CONSUMER_KEY:C,CONSUMER_PAGE_URL:p,NUM_QUESTIONS:q,NUM_MATH_QUESTIONS:V,ITEMS_API_VERSION:O,REQUESTED_ITEMS_API_VERSION:P,ASSESS_API_VERSION:N,REQUESTED_ASSESS_API_VERSION:L,IS_EXISTING_SESSION:h}).forEach((function(t,n){H&&g.universalAnalyticsPush(["set",w[n],t]),d[n]=t})),analytics_push({application:"Questions API",dimensions:d}),U++}function setConsumerKey(t){C=t||R}function extractVersion(t,n){var i,u,d=R;switch(t){case"items":i=n.match(/Items API - (inline|assess) \((v\d+\.\d+\.\d+|\w+)\)/i),!l.a.isEmpty(i)&&l.a.isString(i[2])&&(d=i[2]);break;case"assess":u=n.match(/Assess API \((v\d+\.\d+\.\d+|\w+)\)/i),!l.a.isEmpty(u)&&l.a.isString(u[1])&&(d=u[1])}return d}function analytics_trackEvent(){var t={};B&&(U||setDimensions(),H&&g.trackEvent.apply(null,arguments),arguments.length>=3?t={category:arguments[0],action:arguments[1],label:arguments[2],value:arguments[3],noninteraction:arguments[4]}:arguments.length>0&&l.a.isObject(arguments[0])&&(t=arguments[0]),analytics_push({application:"Questions API",eventData:t}))}function trackTimingStart(t,n,i){var u=t+":"+n;i=i||createTimestamp(),j[u]||(j[u]=[]),j[u].push(i)}function trackTimingEnd(t,n,i,u,d){var p,h=t+":"+n,v=j[h],y=i||createTimestamp(),S=t;return l.a.isString(u)&&(S=u+" "+t),v&&v.length>0&&(p=y-v.shift(),d||function trackUserTiming(){var t,n={};B&&(U||setDimensions(),H&&g.trackTiming.apply(null,arguments),arguments.length>=3&&(n={category:arguments[0],variable:arguments[1],value:arguments[2]},l.a.isString(arguments[3])&&(t=arguments[3])),arguments.length>0&&l.a.isObject(arguments[0])&&(n=arguments[0]),analytics_push({application:t||"Questions API",timing:n}))}(S,n,p,u),v.length<=0&&delete j[h]),{category:t,event:n,duration:p}}function createTimestamp(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function analytics_push(t){var n=[],i=[];if(t){try{var u=R;if(t.application&&(u=t.application),l.a.isObject(t.dimensions))try{E.setDataLayerObject("dimensions",t.dimensions)}catch(t){i.push(t),n.push("dimensions")}if(l.a.isObject(t.metrics))try{E.setDataLayerObject("metrics",t.metrics)}catch(t){i.push(t),n.push("metrics")}if(t.pageview||"track_pageview"===t.event)try{E.trackPageview(t.pageview,u)}catch(t){i.push(t),n.push("pageview")}if(l.a.isObject(t.eventData))try{E.trackEvent(t.eventData,u)}catch(t){i.push(t),n.push("eventData")}if(l.a.isObject(t.timing))try{if(l.a.isString(t.event))switch(t.event){case"timing_start":t.timing&&t.timing.category&&t.timing.variable&&trackTimingStart(t.timing.category,t.timing.variable,t.timing.timestamp);break;case"timing_end":t.timing&&t.timing.category&&t.timing.variable&&trackTimingEnd(t.timing.category,t.timing.variable,t.timing.timestamp,u);break;default:E.trackTiming(t.timing,u)}else E.trackTiming(t.timing,u)}catch(t){i.push(t),n.push("timing")}if(l.a.isObject(t.custom))try{E.trackCustom(t.custom,u)}catch(t){i.push(t),n.push("custom")}if(l.a.isArray(t))try{t.forEach((function(t){analytics_push(t)}))}catch(t){i.push(t)}}catch(t){console.error(t)}l.a.isEmpty(n)||n.forEach(E.resetDataLayerObject),l.a.isEmpty(i)||(console.error("LrnAnalytics push error: "+i.join(" - ")),n.forEach(E.resetDataLayerObject))}}S=l.a.once((function(t){g.init(t),B=!0,l.a.isObject(t)&&l.a.isEmpty(t.classicProperty)&&(H=!1)}));var Q={init:function analytics_init(t){t,S(t)},setActivity:function setActivity(t){if((y=t||{}).questions){q=y.questions.length;var n=l.a.countBy(y.questions,(function(t){return t.is_math?"math":"not_math"}));V=n.math?n.math:0}},setConsumer:function setConsumer(t){x=t&&t.get("name")?t.get("name"):x,C=t&&t.get("key")?t.get("key"):C},setConsumerKey:setConsumerKey,setContext:function setContext(t){O=extractVersion("items",D=t||D),N=extractVersion("assess",D)},setFullContext:function setFullContext(t){l.a.isObject(t)&&(O=t.itemsVersion||R,P=t.itemsRequested||R,N=t.assessVersion||R,L=t.assessRequested||R)},trackPageview:function analytics_trackPageview(){if(B){var t,n,i,u={},p=g.analyticsPush;setDimensions(),H&&(p(["lrn._setDomainName",d.a.domain]),p(["lrn._setCustomVar",1,x,I]),y&&((t=y.questions)&&(n=[],i=t.length,l.a.each(t,(function(t){t.type&&n.push(t.type)})),p(["lrn._setCustomVar",2,""+i,""+l.a.unique(n).sort()]),p(["lrn._setCustomVar",3,y.state,y.type])),p(["lrn._setCustomVar",4,x,y.state+", "+y.type])),p(["lrn._setCustomVar",5,I,x]),p(["lrn._trackPageview"]),u[A]=q,u[T]=V,g.trackPageview(u)),analytics_push({application:"Questions API",pageview:{url:"/"+window.location.hostname+"/"+x,title:x}})}},trackEvent:analytics_trackEvent,trackError:function trackError(t,n,i,u){l.a.isString(u)&&setConsumerKey(u),analytics_trackEvent({category:"LearnosityApp Error",action:t+": "+n,label:""+i,value:1,noninteraction:!0})},trackTimingStart:trackTimingStart,trackTimingEnd:trackTimingEnd,push:analytics_push};d.a&&d.a.analytics&&!0===d.a.analytics.disable&&l.a.forEach(l.a.keys(Q),(function(t){Q[t]=function(){}}));n.a=Q},function(t,n,i){"use strict";var u,l,d=i(0),p=i.n(d),h=i(3),g=i(4),v=i(2);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,u=new Array(n);i<n;i++)u[i]=t[i];return u}function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var y=(_defineProperty(u={},h.QUESTION_TYPES.ASSOCIATION,(function(){return Promise.all([i.e(0),i.e(2),i.e(4),i.e(1),i.e(54)]).then(i.bind(null,79))})),_defineProperty(u,h.QUESTION_TYPES.CHEMISTRYESSAYV2,(function(){return Promise.all([i.e(3),i.e(0),i.e(2),i.e(5),i.e(55)]).then(i.bind(null,112))})),_defineProperty(u,h.QUESTION_TYPES.CHOICEMATRIX,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(56)]).then(i.bind(null,75))})),_defineProperty(u,h.QUESTION_TYPES.CLASSIFICATION,(function(){return Promise.all([i.e(0),i.e(2),i.e(4),i.e(1),i.e(57)]).then(i.bind(null,83))})),_defineProperty(u,h.QUESTION_TYPES.CLOZEASSOCIATION,(function(){return Promise.all([i.e(0),i.e(2),i.e(4),i.e(1),i.e(58)]).then(i.bind(null,98))})),_defineProperty(u,h.QUESTION_TYPES.CLOZEDROPDOWN,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(59)]).then(i.bind(null,100))})),_defineProperty(u,h.QUESTION_TYPES.CLOZETEXT,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(60)]).then(i.bind(null,101))})),_defineProperty(u,h.QUESTION_TYPES.FORMULAESSAYV2,(function(){return Promise.all([i.e(3),i.e(0),i.e(2),i.e(5),i.e(62)]).then(i.bind(null,113))})),_defineProperty(u,h.QUESTION_TYPES.HIGHLIGHT,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(63)]).then(i.bind(null,92))})),_defineProperty(u,h.QUESTION_TYPES.LONGTEXTV2,(function(){return Promise.all([i.e(3),i.e(0),i.e(2),i.e(5),i.e(65)]).then(i.bind(null,64))})),_defineProperty(u,h.QUESTION_TYPES.MCQ,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(66)]).then(i.bind(null,87))})),_defineProperty(u,h.QUESTION_TYPES.ORDERLIST,(function(){return Promise.all([i.e(0),i.e(2),i.e(4),i.e(1),i.e(67)]).then(i.bind(null,81))})),_defineProperty(u,h.QUESTION_TYPES.IMAGECLOZEASSOCIATIONV2,(function(){return Promise.all([i.e(3),i.e(0),i.e(2),i.e(4),i.e(64)]).then(i.bind(null,74))})),_defineProperty(u,h.QUESTION_TYPES.RATING,(function(){return Promise.all([i.e(0),i.e(2),i.e(68)]).then(i.bind(null,84))})),_defineProperty(u,h.QUESTION_TYPES.SHORTTEXT,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(69)]).then(i.bind(null,93))})),_defineProperty(u,h.QUESTION_TYPES.TOKENHIGHLIGHT,(function(){return Promise.all([i.e(0),i.e(2),i.e(5),i.e(1),i.e(70)]).then(i.bind(null,85))})),_defineProperty(u,h.QUESTION_TYPES.VIDEO,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(71)]).then(i.bind(null,72))})),_defineProperty(u,h.QUESTION_TYPES.DRAWING,(function(){return Promise.all([i.e(3),i.e(0),i.e(2),i.e(1),i.e(61)]).then(i.bind(null,73))})),_defineProperty(u,h.QUESTION_TYPES.AUDIO,(function(){return Promise.all([i.e(1),i.e(0),i.e(8),i.e(19)]).then(i.bind(null,102))})),_defineProperty(u,h.QUESTION_TYPES.AUDIOADV,(function(){return Promise.all([i.e(1),i.e(0),i.e(8),i.e(20)]).then(i.bind(null,107))})),_defineProperty(u,h.QUESTION_TYPES.BOOLEAN,(function(){return i.e(21).then(i.bind(null,114))})),_defineProperty(u,h.QUESTION_TYPES.CHEMISTRY,(function(){return Promise.all([i.e(6),i.e(7),i.e(0),i.e(2),i.e(22)]).then(i.bind(null,108))})),_defineProperty(u,h.QUESTION_TYPES.CHEMISTRYESSAY,(function(){return Promise.all([i.e(0),i.e(2),i.e(5),i.e(1),i.e(23)]).then(i.bind(null,115))})),_defineProperty(u,h.QUESTION_TYPES.CUSTOM,(function(){return Promise.all([i.e(1),i.e(29)]).then(i.bind(null,116))})),_defineProperty(u,h.QUESTION_TYPES.FILLSHAPE,(function(){return Promise.all([i.e(3),i.e(31)]).then(i.bind(null,76))})),_defineProperty(u,h.QUESTION_TYPES.FILEUPLOAD,(function(){return Promise.all([i.e(1),i.e(30)]).then(i.bind(null,86))})),_defineProperty(u,h.QUESTION_TYPES.FORMULA,(function(){return Promise.all([i.e(6),i.e(1),i.e(0),i.e(32)]).then(i.bind(null,82))})),_defineProperty(u,h.QUESTION_TYPES.FORMULAESSAY,(function(){return Promise.all([i.e(0),i.e(2),i.e(5),i.e(1),i.e(33)]).then(i.bind(null,65))})),_defineProperty(u,h.QUESTION_TYPES.GRAPHPLOTTING,(function(){return Promise.all([i.e(0),i.e(1),i.e(9),i.e(35)]).then(i.bind(null,71))})),_defineProperty(u,h.QUESTION_TYPES.GRIDDED,(function(){return Promise.all([i.e(1),i.e(36)]).then(i.bind(null,96))})),_defineProperty(u,h.QUESTION_TYPES.HOTSPOT,(function(){return i.e(37).then(i.bind(null,109))})),_defineProperty(u,h.QUESTION_TYPES.IMAGEUPLOAD,(function(){return Promise.all([i.e(1),i.e(0),i.e(38)]).then(i.bind(null,77))})),_defineProperty(u,h.QUESTION_TYPES.LONGTEXT,(function(){return Promise.all([i.e(5),i.e(1),i.e(39)]).then(i.bind(null,117))})),_defineProperty(u,h.QUESTION_TYPES.NUMBERLINE,(function(){return Promise.all([i.e(0),i.e(1),i.e(9),i.e(40)]).then(i.bind(null,103))})),_defineProperty(u,h.QUESTION_TYPES.NUMBERLINEPLOT,(function(){return Promise.all([i.e(0),i.e(1),i.e(9),i.e(41)]).then(i.bind(null,99))})),_defineProperty(u,h.QUESTION_TYPES.PLAINTEXT,(function(){return Promise.all([i.e(1),i.e(0),i.e(42)]).then(i.bind(null,110))})),_defineProperty(u,h.QUESTION_TYPES.SCORE,(function(){return i.e(43).then(i.bind(null,118))})),_defineProperty(u,h.QUESTION_TYPES.SIMPLECHART,(function(){return Promise.all([i.e(3),i.e(1),i.e(0),i.e(44)]).then(i.bind(null,78))})),_defineProperty(u,h.QUESTION_TYPES.SIMPLESHADING,(function(){return Promise.all([i.e(1),i.e(0),i.e(45)]).then(i.bind(null,104))})),_defineProperty(u,h.QUESTION_TYPES.SORTLIST,(function(){return Promise.all([i.e(0),i.e(4),i.e(1),i.e(46)]).then(i.bind(null,105))})),_defineProperty(u,h.QUESTION_TYPES.TEXTHIGHLIGHT,(function(){return Promise.all([i.e(5),i.e(47)]).then(i.bind(null,111))})),_defineProperty(u,h.QUESTION_TYPES.UNKNOWN,(function(){return i.e(48).then(i.bind(null,119))})),u);y[h.QUESTION_TYPES.CLOZEINLINETEXT]=y[h.QUESTION_TYPES.IMAGECLOZEASSOCIATION]=function(){return Promise.all([i.e(0),i.e(4),i.e(1),i.e(24)]).then(i.bind(null,106))},y[h.QUESTION_TYPES.IMAGECLOZETEXT]=y[h.QUESTION_TYPES.IMAGECLOZEDROPDOWN]=function(){return Promise.all([i.e(3),i.e(0),i.e(2),i.e(1),i.e(26)]).then(i.bind(null,88))},y[h.QUESTION_TYPES.CLOZEFORMULA]=y[h.QUESTION_TYPES.IMAGECLOZEFORMULA]=function(){return Promise.all([i.e(6),i.e(7),i.e(0),i.e(2),i.e(27)]).then(i.bind(null,66))},y[h.QUESTION_TYPES.CLOZEFORMULAV2]=function(){return Promise.all([i.e(6),i.e(7),i.e(0),i.e(2),i.e(28)]).then(i.bind(null,120))},y[h.QUESTION_TYPES.CLOZECHEMISTRY]=y[h.QUESTION_TYPES.IMAGECLOZECHEMISTRY]=function(){return Promise.all([i.e(6),i.e(7),i.e(0),i.e(2),i.e(25)]).then(i.bind(null,121))},y[h.QUESTION_TYPES.FORMULAV2]=y[h.QUESTION_TYPES.FORMULA_DEV]=function(){return Promise.all([i.e(6),i.e(0),i.e(2),i.e(1),i.e(34)]).then(i.bind(null,67))};var S=(_defineProperty(l={},h.FEATURE_TYPES.IMAGE_TOOL,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(50)]).then(i.bind(null,89))})),_defineProperty(l,h.FEATURE_TYPES.VIDEO_PLAYER,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(18)]).then(i.bind(null,97))})),_defineProperty(l,h.FEATURE_TYPES.CALCULATOR,(function(){return Promise.all([i.e(0),i.e(2),i.e(4),i.e(1),i.e(49)]).then(i.bind(null,80))})),_defineProperty(l,h.FEATURE_TYPES.SCROLLABLE_PASSAGE,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(52)]).then(i.bind(null,94))})),_defineProperty(l,h.FEATURE_TYPES.LINE_READER,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(51)]).then(i.bind(null,90))})),_defineProperty(l,h.FEATURE_TYPES.AUDIO_PLAYER,(function(){return Promise.all([i.e(1),i.e(0),i.e(8),i.e(13)]).then(i.bind(null,95))})),_defineProperty(l,h.FEATURE_TYPES.COUNTER,(function(){return Promise.all([i.e(1),i.e(0),i.e(14)]).then(i.bind(null,122))})),_defineProperty(l,h.FEATURE_TYPES.FORMULAINPUT,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(16)]).then(i.bind(null,123))})),_defineProperty(l,h.FEATURE_TYPES.SHARED_PASSAGE,(function(){return Promise.all([i.e(0),i.e(2),i.e(1),i.e(53)]).then(i.bind(null,91))})),_defineProperty(l,h.FEATURE_TYPES.CUSTOM_FEATURE,(function(){return Promise.all([i.e(1),i.e(0),i.e(15)]).then(i.bind(null,124))})),_defineProperty(l,h.FEATURE_TYPES.UNKNOWN,(function(){return Promise.all([i.e(1),i.e(0),i.e(17)]).then(i.bind(null,125))})),l);function resolveBundlePromises(t){return v.default.all(t).then((function(){if(arguments.length){var t=p.a.map(arguments.length<=0?void 0:arguments[0],(function(t){return p.a.isArray(t)&&t[0].default?t[0]:t}));return t}})).catch(onBundleLoadError)}function onBundleLoadError(t){g.a.exception({code:10017,detail:t.stack||t.message})}var E={default:y,legacy:{},reactiveViews:{},reactiveViewsInDev:{}},w={default:S,legacy:{},reactiveViews:{},reactiveViewsInDev:{}};function getBundleToLoad(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="feature"===t?w:E,u=n.reactiveViews,l=n.reactiveViewsInDev,d=p.a.extend({},i.default);return!0===u?p.a.extend(d,i.reactiveViews,l&&i.reactiveViewsInDev):!1===u&&p.a.extend(d,i.legacy),d}function reloadable(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=0;return new v.default((function(u,l){!function sendRequest(){t().then((function(){u.apply(null,arguments)})).catch((function(t){++i<=n?p.a.delay(sendRequest,500*i):l(t)}))}()}))}var A={mathcore:function mathcore(){return Promise.all([i.e(6),i.e(11)]).then(i.bind(null,68))},reactiveViewComponents:function reactiveViewComponents(){return Promise.all([i.e(0),i.e(2),i.e(12)]).then(i.bind(null,69))},spokenmathWorker:function spokenmathWorker(){return i.e(72).then(i.t.bind(null,70,7))}};n.a={requireBundlesForQuestionTypes:function requireBundlesForQuestionTypes(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};reloadable((function(){var n=getBundleToLoad("question",i),u=[],l={},d=[h.QUESTION_TYPES.UNKNOWN].concat(_toConsumableArray(t));return p.a.each(d,(function(t){n[t]&&u.push(n[t]())})),u.length>0?resolveBundlePromises(u).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p.a.each(d,(function(n,i){var u=t[i];u&&u.default&&(l[n]=u.default)})),l})):v.default.resolve(l)})).then((function(t){n(t)})).catch(onBundleLoadError)},requireBundlesForFeatureTypes:function requireBundlesForFeatureTypes(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};reloadable((function(){var n=getBundleToLoad("feature",i),u=[],l={},d=[h.FEATURE_TYPES.UNKNOWN].concat(_toConsumableArray(t));return p.a.each(d,(function(t){n[t]&&u.push(n[t]())})),u.length>0?resolveBundlePromises(u).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p.a.each(d,(function(n,i){var u=t[i];u&&u.default&&(l[n]=u.default)})),l})):v.default.resolve(l)})).then((function(t){n(t)})).catch(onBundleLoadError)},getBundleOptions:function getBundleOptions(t){var n={};if(t){var i=t.reactive_views,u=t.reactive_views_in_dev;p.a.isBoolean(i)&&(n.reactiveViews=i),p.a.isBoolean(u)&&(n.reactiveViewsInDev=u)}return n},getExposedExternalBundle:function getExposedExternalBundle(t){if(A[t])return function(){return new v.default((function(n,i){A[t]().then((function(t){return t.default?n(t.default):n(t)})).catch((function(t){i(t)}))}))}}}},function(t,n,i){"use strict";i.d(n,"c",(function(){return d})),i.d(n,"d",(function(){return p})),i.d(n,"e",(function(){return h})),i.d(n,"f",(function(){return g})),i.d(n,"a",(function(){return v})),i.d(n,"b",(function(){return y})),i.d(n,"g",(function(){return getShowDistractorRationale})),i.d(n,"i",(function(){return isValidShowDistractorRationalePerQuestion})),i.d(n,"j",(function(){return isValidShowDistractorRationalePerResponse})),i.d(n,"h",(function(){return getVisibleResponseLevelDistractorRationale}));var u=i(0),l=i.n(u),d="always",p="never",h="correct",g="incorrect",v=[d,p,h,g],y=[d,p],S={perQuestion:p,perResponse:p},E={perQuestion:g,perResponse:d};function getShowDistractorRationale(t){if(l.a.isObject(t)){var n=t.perQuestion,i=t.perResponse;return l.a.isUndefined(n)?n=E.perQuestion:isValidShowDistractorRationalePerQuestion(n)||(n=p),l.a.isUndefined(i)?i=E.perResponse:isValidShowDistractorRationalePerResponse(i)||(i=p),{perQuestion:n,perResponse:i}}return!0===t?E:S}function isValidShowDistractorRationalePerQuestion(t){return l.a.isString(t)&&l.a.contains(v,t)}function isValidShowDistractorRationalePerResponse(t){return l.a.isString(t)&&l.a.contains(y,t)}function getVisibleResponseLevelDistractorRationale(t,n){if(!t||n===p)return[];if(n===d){var i=t.correct,u=t.incorrect;return i.concat(u).filter(isNonEmptyDistractorRationale)}return t[n].filter(isNonEmptyDistractorRationale);function isNonEmptyDistractorRationale(t){return l.a.isString(t.metadata)&&/\S/.test(t.metadata)}}},function(t,n,i){"use strict";var u=i(5),l=i.n(u),d=i(0),p=i.n(d),h=i(3);n.a=l.a.Model.extend({TYPE:h.FEATURE_TYPES,EVENT:{RE_INIT:"reinit"},FONTSIZE_PREFIX:"lrn_font_size_",FONTSIZE:{SMALL:"small",NORMAL:"normal",LARGE:"large",XLARGE:"xlarge",XXLARGE:"xxlarge"},getFontClass:function getFontClass(){var t="";return p.a.isUndefined(this.activity)||p.a.isUndefined(this.activity.get("fontsize"))||(t=this.FONTSIZE[this.activity.get("fontsize").toUpperCase()]||""),t&&(t=this.FONTSIZE_PREFIX+t),t},getFeatureJsonForClient:function getFeatureJsonForClient(){return p.a.deepClone(this.toJSON())}})},function(t,n,i){"use strict";var u=i(1),l=i.n(u),d=i(0),p=i.n(d),h=i(44),g="[data-lrn-access-review-source]",v="data-lrn-access-review-source";function elementHasClass(t,n){return t.get(0)instanceof SVGElement?function svgElementHasClass(t,n){return h.a.polygonHasClass(t.get(0),n)}(t,n):t.hasClass(n)}function findElement(t,n){return t.get(0).getElementsByClassName?t.find(n):l()(t.get(0).querySelectorAll(".lrn-accessibility-label"))}n.a={getResponseData:function getResponseData(t,n){var i,u,l={responseIndex:void 0,responseText:void 0,responseStatus:void 0},d={VALID:"lrn_valid",CORRECT:"lrn_correct",INCORRECT:"lrn_incorrect",UNATTEMPTED:"lrn_not_attempted"},h="."+p.a.values(d).join(",."),g=findElement(t,".lrn_responseIndex");return g.length&&(l.responseIndex=g.text()),g.remove(),(u=n?n(t):this.getSourceContent(t))&&(l.responseText=u),(i=findElement(t,h)).length||(i=t),elementHasClass(i,d.CORRECT)?l.responseStatus="correct":elementHasClass(i,d.INCORRECT)?l.responseStatus="incorrect":elementHasClass(i,d.UNATTEMPTED)?l.responseStatus="no response given":elementHasClass(i,d.VALID)?l.responseStatus="no response given - missed":l.responseStatus="no response given",l},hasAttr:function hasAttr(t,n){var i=t.attr(n);return void 0!==i&&!1!==i},getSourceElement:function getSourceElement(t){var n,i=[".lrn_draggable"],u=findElement(t,g);if(this.hasAttr(t,v)&&(u=t),!u.length)for(n=0;n<i.length&&!(u=findElement(t,i[n])).length;n++);return u.length?u:t},getSourceContent:function getSourceContent(t){var n="",i=this;return findElement(t,"select").remove(),t.is("input")?this.getInputContent(t):findElement(t,'input:not([type="checkbox"],[type="radio"])').length?(findElement(t,"input").each((function(){n+=i.getInputContent(l()(this))})),n):t.text()},getInputContent:function getInputContent(t){return t.is(":radio")||t.is(":checkbox")?t.prop("checked")?"selected":"":t.val()},setReviewAriaLabel:function setReviewAriaLabel(t){var n=t.$el,i=t.ariaLabel,u=t.keepChildrenVisible,d=t.onLabelClick,h=l()('<span class="lrn-accessibility-label"></span>');n.attr("aria-label")&&n.attr("aria-label-default",n.attr("aria-label")),h.text(i),u||findElement(n,'> *:not([type="checkbox"]):not([type="radio"])').attr("aria-hidden",!0),n.attr("aria-label",i).append(h),p.a.isFunction(d)&&h.on("click",(function(t){t.stopPropagation(),d()}))},unsetReviewAriaLabel:function unsetReviewAriaLabel(t){if(t.length){var n=t.attr("aria-label-default");if(n)t.attr("aria-label",n);else{var i=t.attr("aria-label-static");i?t.attr("aria-label",i):t.removeAttr("aria-label")}var u=t.get(0);u.removeAttribute("aria-label-default"),p.a.each(u.children,(function(t){return t.removeAttribute("aria-hidden")})),findElement(t,".lrn-accessibility-label").remove()}}}},function(t,n,i){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=_interopRequireDefault(i(0)),l=function _interopRequireWildcard(t){if(t&&t.__esModule)return t;if(null===t||"object"!==_typeof(t)&&"function"!=typeof t)return{default:t};var n=_getRequireWildcardCache();if(n&&n.has(t))return n.get(t);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var d=u?Object.getOwnPropertyDescriptor(t,l):null;d&&(d.get||d.set)?Object.defineProperty(i,l,d):i[l]=t[l]}i.default=t,n&&n.set(t,i);return i}(i(60)),d=_interopRequireDefault(i(61));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return t},t}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function getParsableData(t){return d.default.getParsableData(t,"*:not(body):not(head):not(html)")}function removeBlacklistedAttributes(t){var n=d.default.getElementAttributes(t);n.length&&u.default.each(n,(function(n){!function removeOnEventAttributes(t,n){l.default.blackListedRegex.test(n)&&t.removeAttribute(n)}(t,n),function removeBlacklistedAttribute(t,n){u.default.contains(l.default.blackListedAttributes,n.toLowerCase())&&t.removeAttribute(n)}(t,n)}))}function removeLinks(t){var n=getParsableData(t);return n?(d.default.processElements(n.elements,(function(t){"a"===t.tagName.toLowerCase()&&(t.insertAdjacentHTML("afterEnd",t.innerHTML),d.default.removeElement(t))})),d.default.mergeTempDomContent(n.dom)):t}function sanitizeAttributesWithBlackList(t,n){var i=getParsableData(t);return i?(d.default.processElements(i.elements,(function(t){n.forEach((function(n){t.removeAttribute(n)}))})),d.default.mergeTempDomContent(i.dom)):t}function sanitizeElement(t){!function removeBlackListedElement(t){u.default.contains(l.default.blackListedTags,t.nodeName.toLowerCase())&&(t.insertAdjacentHTML("afterEnd",t.innerText),d.default.removeElement(t))}(t),removeBlacklistedAttributes(t),function removeAttributesWithJavascriptPseudoProtocol(t){var n=l.default.blackListedContent.javascript_keyword;d.default.getElementAttributes(t).forEach((function(i){if(!u.default.contains(l.default.URI_SAFE_ATTRIBUTES,i)){var d=(t.getAttribute(i)||"").replace(/\s/g,"").toLowerCase();!d||-1!==d.indexOf("data:image/svg+xml,")||-1===d.indexOf(n[0])&&-1===d.indexOf(encodeURIComponent(n[0]).toLowerCase())||t.removeAttribute(i)}}))}(t),function sanitizeAttributesWithDataUri(t){u.default.contains(l.DATA_URI_SAFE_TAGS,t.nodeName.toLowerCase())||d.default.getElementAttributes(t).forEach((function(n){if(u.default.contains(l.DATA_URI_UNSAFE_ATTRIBUTES,n)){var i=/;base64/,d=t.getAttribute(n),p=d&&d.replace(/\s/g,"").toLowerCase(),h=p&&0===p.indexOf("data:"),g=p&&i.test(p);if(h){var v=p.slice(0,p.indexOf(",")),y=d.slice(d.indexOf(",")+1),S="";g&&(-1!==y.indexOf("#")&&(S=y.slice(y.indexOf("#")),y=y.slice(0,y.indexOf("#"))),y=atob(y));var E=sanitizeHTML(y).replace(/"/g,"'");g&&(v=v.replace(i,"")),t.setAttribute(n,"".concat(v,",").concat(E).concat(S))}}}))}(t)}function sanitizeElementsWithWhiteList(t,n){var i=getParsableData(t);return i?(d.default.processElements(i.elements,(function(t){var i=t.tagName.toLowerCase();u.default.contains(n,i)||(t.insertAdjacentHTML("afterEnd",t.innerText),d.default.removeElement(t))})),d.default.mergeTempDomContent(i.dom)):t}function sanitizePastedImagesAndMath(t,n){var i=getParsableData(t);return i?(d.default.processElements(i.elements,(function(t){var i=t.tagName.toLowerCase();(t.id.indexOf("MathJax")>-1||t.classList.contains("MathJax"))&&function sanitizePastedMath(t,n){n.shouldStrip||t.insertAdjacentText("afterEnd",n.warning),d.default.removeElement(t)}(t,n.externalMath),"img"===i&&function sanitizePastedImg(t,n){n.shouldStrip?d.default.removeElement(t):(t.setAttribute("src","#"),t.setAttribute("alt",n.warning))}(t,n.externalImages)})),d.default.mergeTempDomContent(i.dom)):t}function convertImagesToText(t){var n;n=t.hasAttribute("alt")&&""!==t.alt?"".concat(l.default.imageWithAltText).concat(t.alt," - "):l.default.imageText,t.insertAdjacentHTML("afterEnd",n)}function processHTML(t,n){return!!t&&(d.default.processElements(t.elements,n),d.default.mergeTempDomContent(t.dom))}function sanitizeHTML(t){var n=processHTML(getParsableData(t),sanitizeElement);return n||t}var p={sanitizeHTML:sanitizeHTML,sanitizeAttributesWithBlackList:sanitizeAttributesWithBlackList,sanitizeElementsWithWhiteList:sanitizeElementsWithWhiteList,sanitizePastedContent:function sanitizePastedContent(t,n){var i=n.attributesBlackList,d=void 0===i?[]:i,p=n.elementsWhiteList;return t=sanitizePastedImagesAndMath(t=removeLinks(t),n),u.default.isArray(p)&&(t=sanitizeElementsWithWhiteList(t,p)),t=sanitizeAttributesWithBlackList(t,u.default.union(d,l.default.blackListedAttributes))},removeLinks:removeLinks,stripHTML:function stripHTML(t,n){var i=n?u.default.unescape(t):t,l=d.default.getParsableData(i),p=l?d.default.mergeTempDomContent(l.dom,!1):t;return n?u.default.escape(p):p},createImageDescriptions:function createImageDescriptions(t){var n=processHTML(d.default.getParsableData(t,"img"),convertImagesToText);return n||t}};n.default=p},function(t,n,i){"use strict";var u="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),l=new Uint8Array(16);function rng(){if(!u)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(l)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var p=function validate(t){return"string"==typeof t&&d.test(t)},h=[],g=0;g<256;++g)h.push((g+256).toString(16).substr(1));var v=function stringify(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(h[t[n+0]]+h[t[n+1]]+h[t[n+2]]+h[t[n+3]]+"-"+h[t[n+4]]+h[t[n+5]]+"-"+h[t[n+6]]+h[t[n+7]]+"-"+h[t[n+8]]+h[t[n+9]]+"-"+h[t[n+10]]+h[t[n+11]]+h[t[n+12]]+h[t[n+13]]+h[t[n+14]]+h[t[n+15]]).toLowerCase();if(!p(i))throw TypeError("Stringified UUID is invalid");return i};var y=function v4(t,n,i){var u=(t=t||{}).random||(t.rng||rng)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,n){i=i||0;for(var l=0;l<16;++l)n[i+l]=u[l];return n}return v(u)};n.a={check:/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-?[a-f0-9]{12}/,v4:y}},function(t,n,i){"use strict";var u=i(1),l=i.n(u),d=i(0),p=i.n(d),h=i(24),g=i(36),v=i(2),y=[[/(?:\$\$)(.*?)(?:\$\$)/g,"span"],[/(?:\\\()(.*?)(?:\\\))/g,"span"],[/(?:\\\[)(.*?)(?:\\\])/g,"div"]];function MathQuillRenderer(t){this.options={disableItalics:!!t}}function prepareTextNodes(t){var n;return t.each((function(){var t,i,u,d=function getTextNodesIn(t,n){var i=[],u=/\S/;return function containsMathDelimiters(t){var n=t.textContent||t.innerText;return p.a.any(y,(function(t){return n.match(t[0])}))}(t)&&function getTextNodes(t){var l;if(3===t.nodeType)(n||u.test(t.nodeValue))&&i.push(t);else for(l=0;l<t.childNodes.length;l++)getTextNodes(t.childNodes[l])}(t),i}(this);for(u=0;u<d.length;u++)d[u]&&d[u].nodeValue&&(i=replaceText(t=p.a.escape(d[u].nodeValue)))!==t&&(l()(i).insertBefore(d[u]),d[u].parentNode.removeChild(d[u]),n=!0)})),n}function renderPrepared(t,n){var u=t.find(".lrn_math_static").not(".lrn_math_renderer_processed");return new v.default((function(t){i.e(74).then(i.t.bind(null,63,7)).then((function(i){var d=[];u.each((function(){var t=l()(this),u=t.find('[data-lrn-component="content"]').get(0);d.push(new v.default((function(l){Object(h.a)(t,(function(){var d=i.InertMath(u,n);!function setupHiddenAriaElement(t,n,i){var u=t.parent().parent().attr("aria-label"),l=function placeLabel(n){n=p.a.escape(n),t.prepend('<span class="lrn-spokenmath">'.concat(n,"</span>")).find('[data-lrn-component="content"]').attr("role","math").children().attr("aria-hidden","true"),i()};u?l(u):g.a.translateOrEmptyString(n,l)}(t,d.latex(),l)})),t.addClass("lrn_math_renderer_processed")})))})),v.default.all(d).then(t)}))}))}function replaceText(t){var n,i,u=t,l=!1;for(n=0;n<y.length;n++)i=t.replace(y[n][0],(function(t,i){return"<".concat(y[n][1],' class="').concat("lrn_math_static",'">\n                    <').concat(y[n][1],' data-lrn-component="content">\n                        ').concat(i,"\n                    </").concat(y[n][1],">\n                </").concat(y[n][1],">")})),t!==i&&"div"===y[n][2]&&(l=!0),t=i;return u!==t&&(t=l?"<div>"+t+"</div>":"<span>"+t+"</span>"),t}p.a.extend(MathQuillRenderer.prototype,{render:function render(t,n){var i;return t?!0===n?i=l()(t):0===(i=l()(t).hasClass("lrn_widget")?l()(t):l()(t).parents(".lrn_widget")).length&&(i=l()(t).find(".lrn_widget")):i=l()(".lrn").filter((function(){return 0===l()(this).parents(".lrn").length})),i.length&&prepareTextNodes(i)?renderPrepared(i,this.options):new v.default((function(t){t("Nothing to render")}))}}),n.a=MathQuillRenderer},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(5),p=function AccessibilityBaseHelper(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.view=t,this.initialize(t,n)};p.extend=i.n(d).a.View.extend,l.a.extend(p.prototype,{initialize:function initialize(t){this.$el=this.view.$el},apply:function apply(){},restore:function restore(){}}),n.a=p},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d={QUESTION_UPDATE_RESPONSE_VALUE:"question:updateResponseValue",QUESTION_TOGGLE_DISABLED:"question:toggleDisabled",QUESTION_RENDER_MATH_IF_REQUIRED:"question:renderMathIfRequired",QUESTION_SET_MASKING_STATE:"question:toggleMaskingMode",QUESTION_TOGGLE_COMPONENT_MASK:"question:toggleComponentMask",QUESTION_NOTIFY_MATH_RENDERED:"question:notifyMathRendered",QUESTION_CACHE_RENDERED_MATH:"question:cacheRenderedMath",QUESTION_LEGACY_BEGIN_RESPONSE:"question:legacy:beginResponse",SET_LEGACY_ATTRIBUTES:"question:legacy:setAttributes"};function legacyBeginResponse(){return{type:d.QUESTION_LEGACY_BEGIN_RESPONSE}}n.a={actionTypes:d,updateResponseValue:function updateResponseValue(t){return function(n,i,u){n({type:d.QUESTION_UPDATE_RESPONSE_VALUE,payload:{value:t}}),u.dataService.updateResponseValue(t)}},setDisabled:function setDisabled(t){return{type:d.QUESTION_TOGGLE_DISABLED,payload:{disabled:t}}},setLegacyAttributes:function setLegacyAttributes(t){return{type:d.SET_LEGACY_ATTRIBUTES,payload:{attributes:t}}},setMaskingState:function setMaskingState(t){return function(n,i){var u=i().base,l=u.isReviewState,p=u.isPreviewState;l||p||n({type:d.QUESTION_SET_MASKING_STATE,payload:{inMaskingState:t}})}},toggleComponentMask:function toggleComponentMask(t){return function(n,i,u){n({type:d.QUESTION_TOGGLE_COMPONENT_MASK,payload:{maskId:t}});var p=u.dataService.triggerQuestionFacadeEvent,h=i().base,g=h.responseId,v=h.maskIds;l.a.contains(v,t)&&p("masked",g)}},renderMathIfRequired:function renderMathIfRequired(t){return function(n,i,u){u.mathService.renderIfRequired().then((function(n){n&&t&&l.a.isFunction(t.success)&&t.success()})),n({type:d.QUESTION_RENDER_MATH_IF_REQUIRED})}},notifyMathRendered:function notifyMathRendered(t){return{type:d.QUESTION_NOTIFY_MATH_RENDERED,payload:t}},cacheRenderedMath:function cacheRenderedMath(t){return{type:d.QUESTION_CACHE_RENDERED_MATH,payload:t}},triggerEvent:function triggerEvent(t,n){return function(i,u,l){l.dataService.triggerQuestionFacadeEvent(t,n)}},legacyRenderEmbeddedFeature:function legacyRenderEmbeddedFeature(t){var n=t.el,i=t.feature,u=t.isLastFeature,l=t.removeOnComplete,d=i.type;return function(t,p,h){var g=p().base.i18n,v=h.dataService,y=v.get("legacyFeatures",[]);v.loadFeatureBundles([d],(function(h){var v=h[d],S=v.View,E=new(0,v.Model)(i),w=new S({el:n,model:E,i18n:g});y.push(w),u&&function handleLegacyEvents(t,n,i){var u=n().base,l=u.stimulus,d=u.isReviewState,p=l.legacyEvents,h=i.getFacade(),g=p.begin_response_on;d||("last-feature-begin"===g?h.on("begin",(function(){t(legacyBeginResponse)})):g&&"last-feature-complete"!==g||h.on("complete",(function(){t(legacyBeginResponse)})))}(t,p,w),l&&function removeViewOnComplete(t,n){t.getFacade().on("complete",(function(){var i=t.$el.parent();n.splice(n.indexOf(t),1),t.model.destroy(),t.remove(),i.children().length||i.remove()}))}(w,y)}))}},legacyBeginEmbeddedFeatures:function legacyBeginEmbeddedFeatures(){return function(t,n,i){var u=l.a.map(i.dataService.get("legacyFeatures"),(function(t){return t.getFacade()})),d=function beginNextFacade(){p++,u[p]&&u[p].begin()},p=-1;l.a.each(u,(function(t){t.off("complete",d),t.once("complete",d)})),d()}},legacyTriggerEmbeddedFeaturesAction:function legacyTriggerEmbeddedFeaturesAction(t){return function(n,i,u){var d=u.dataService.get("legacyFeatures");l.a.each(d,(function(n){var i=n.getFacade();i&&l.a.isFunction(i[t])&&i[t]()}))}}}},function(t,n,i){"use strict";var u=i(5),l=i.n(u),d=i(0),p=i.n(d),h=i(1),g=i.n(h),v=i(19),y=i(37),S=i(26),E=i(4),w=i(38),A=i(49),T=i.n(A),R=i(40),x=i.n(R),C=i(24);i(54);function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var I=50,M=0,O=0,P=2,N=70,L=30,D=".lrn_widget",q={STIMULUS:'[data-lrn-widget-component="stimulus"]',INTERACTION:'[data-lrn-widget-component="interaction"]'},V=document;var U=function(){function WidgetLayout(t,n){var i=this;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,WidgetLayout),_defineProperty(this,"_onOverviewSizeChange",p.a.debounce((function(){var t=i.mode,n=i.$elements,u=i.grid,l=n.$wrapper.width()*u.interaction.width/100<400,d=!l&&"stack"===t;l&&"split"===t?i._setLayoutMode("stack"):d&&i._setLayoutMode("split")}),500)),_defineProperty(this,"onRemove",(function(){V.unbindLeave(i.selector),i.resizeSensor.detach(i._onOverviewSizeChange)})),this.view=t,n&&(this.selector='[id="'.concat(t.model.get("response_id"),'"]'),this.widgetLayout=function invalidateWidgetLayout(t){var n=[];return p.a.each(t.elements,(function(t){var i=t.type;p.a.isString(i)&&i.length&&!p.a.findWhere(n,{type:i})&&n.push(t)})),p.a.each(["stimulus","interaction"],(function(t){p.a.findWhere(n,{type:t})||n.push({type:t})})),t.elements=n,t}(p.a.clone(n)),t.render=p.a.wrap(t.render,(function(n){return n.call(t),i.initialized||(i.initialized=!0,i._prepare(),i._canApplyGridLayout()&&i._applyGridLayout()),t})))}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(WidgetLayout,[{key:"getLayoutElements",value:function getLayoutElements(){return this.widgetLayout.elements}},{key:"_prepare",value:function _prepare(){var t=this.view,n=D,i=q,u=t.$el.closest(n),l=u.find(i.STIMULUS),d=u.find(i.INTERACTION);this.$elements={$wrapper:u,$components:{stimulus:l,interaction:d}}}},{key:"_canApplyGridLayout",value:function _canApplyGridLayout(){var t=this.widgetLayout,n=this.$elements.$components,i=n.stimulus,u=n.interaction;return!!(t&&p.a.isArray(t.elements)&&i.length&&u.length)}},{key:"_applyGridLayout",value:function _applyGridLayout(){var t=this,n=this.view,i=this.selector;this.resizeSensor=Object(C.a)(n.el,(function(){return new x.a(n.el,t._onOverviewSizeChange)})),this._generateLayoutGridData(),this._setGrid(),this._setLayoutMode("split"),this._onOverviewSizeChange(),V.leave(i,this.onRemove)}},{key:"_generateLayoutGridData",value:function _generateLayoutGridData(){var t={},n=this.widgetLayout.elements,i=n.length;p.a.each(n,(function(n,u){return t[n.type]=function getElementLayoutData(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=I,u=N,l=L,d=M,h=O,g=P,v=t.width;p.a.isNumber(v)?v<l?v=l:v>u&&(v=u):v=i;var y=t.padding_left;p.a.isNumber(y)||(y=d),y*=v/100;var S=t.padding_right;return p.a.isNumber(S)||(S=n?g:h),{width:v,paddingLeft:y,paddingRight:S*=v/100}}(n,u===i-1)})),this.grid=t}},{key:"_setGrid",value:function _setGrid(){var t=this.$elements,n=this.widgetLayout,i=this.grid,u=t.$components;t.$wrapper.addClass("clearfix"),p.a.each(n.elements,(function(t){var n=t.type,l=u[n],d=i[n],p=d.width,h=d.paddingLeft,g=d.paddingRight;l.css({width:"".concat(p,"%"),paddingLeft:"".concat(h,"%"),paddingRight:"".concat(g,"%"),float:"left"})}))}},{key:"_unsetGrid",value:function _unsetGrid(){var t=this.$elements,n=this.widgetLayout,i=t.$components,u=t.$wrapper;u.removeClass("clearfix"),p.a.each(n.elements,(function(t){var n=t.type;i[n].css({width:"",paddingLeft:"",paddingRight:"",float:""})}))}},{key:"_setLayoutMode",value:function _setLayoutMode(t){this.mode=t,"split"===t?this._setGrid():"stack"===t&&this._unsetGrid()}}]),WidgetLayout}(),j=i(31),B=i(7),H=T.a,Q=[{type:"stimulus"},{type:"interaction"}];n.a=l.a.View.extend({lastFeatureComplete:!1,initialize:function initialize(){var t=this.model;if(t){var n=t.get("question").widget_layout;n&&(this.widgetLayout=new U(this,n))}this.mathService=new j.a(this,"question")},getFacade:function getFacade(){var t=this;if(p.a.isUndefined(this.questionFacade)){var n=this.model;if(this.questionFacade={},this.questionFacade.on=l.a.Events.on,this.questionFacade.off=function(t,n){if(!p.a.isString(t)||!p.a.isFunction(n))throw new Error("off method only supported with event and callback parameters");l.a.Events.off.apply(this,arguments)},this.questionFacade.trigger=l.a.Events.trigger,this.questionFacade.once=l.a.Events.once,this.questionFacade.begin=p.a.bind(this.begin,this),this.questionFacade.pause=p.a.bind(this.pause,this),this.questionFacade.stop=p.a.bind(this.stop,this),this.questionFacade.response={getMetadata:p.a.bind((function(){return this.model.getResponseMetadata()}),this),setMetadata:p.a.bind((function(t){return this.model.setResponseMetadata(t)}),this)},this.questionFacade.disable=p.a.bind(this.toggleDisabled,this,!0),this.questionFacade.enable=p.a.bind(this.toggleDisabled,this,!1),this.questionFacade.isEnabled=function(){return!t.model.get("disabled")},this.listenTo(this.model,"change:disabled",p.a.bind((function(t,n){this.setDisabled(n)}),this)),this.questionFacade.getAttemptedStatus=function(){return{hasReachedMinLimit:t.model.hasReachedMinLimit()}},this.questionFacade.getMetadata=p.a.bind((function(){return this.model.getMetadataForClient()}),this),this.questionFacade.getQuestion=p.a.bind((function(){return this.model.getQuestionJsonForClient()}),this),this.questionFacade.getResponse=p.a.bind((function(){return this.model.getResponseJsonForClient()}),this),this.questionFacade.getScore=p.a.bind((function(){return p.a.isFunction(this.model.getScore)?this.model.getScore():null}),this),this.questionFacade.isAttempted=p.a.bind((function(){return this.model.isAttempted()}),this),this.questionFacade.isValid=p.a.bind((function(t){var n;return p.a.isFunction(this.model.canValidateResponse)&&this.model.canValidateResponse()&&this.model.hasResponse()&&(n=t?this.model.getResponseValidDetailed():this.model.isResponseValid()),n}),this),this.questionFacade.validate=p.a.bind((function(t){t=t||{},p.a.isFunction(this.model.callValidate)&&this.model.callValidate(t)}),this),this.questionFacade.mapValidationMetadata=p.a.bind((function(){var t=this.model,n=t.mapValidationMetadata;return n.apply(t,arguments)}),this),this.questionFacade.checkValidation=p.a.bind((function(){var t=this.model,n=t.canValidateResponse;return{has_validation:!!p.a.isFunction(n)&&!!n.apply(t)}}),this),this.questionFacade.masking=p.a.bind(this.masking,this),this.questionFacade.isMaskable=p.a.bind((function(){return this.maskable||!1}),this),this.imageLoader&&this.imageLoader.addFacadeMethods(this.questionFacade),this.simpleFeatureFacades=this.simpleFeatureFacades||{},this.questionFacade.simpleFeatures=function(){return p.a.clone(t.simpleFeatureFacades)},this.questionFacade.simpleFeature=function(n){return t.simpleFeatureFacades[n]},this.questionFacade.resetValidationUI=function(){t.showingValidationUI&&p.a.isFunction(t.clearValidationUI)?t.clearValidationUI():t.showingAnswer&&p.a.isFunction(t.clearCorrectAnswers)&&t.clearCorrectAnswers()},n.get("isDynamicContent")){var i=n.dynamic;this.questionFacade.dynamic={nextAttempt:function nextAttempt(){return t.updateInstance(i.nextAttempt())},previousAttempt:function previousAttempt(){return t.updateInstance(i.previousAttempt())},currentAttemptIndex:function currentAttemptIndex(){return i.currentAttemptIndex()},totalAttempts:function totalAttempts(){return i.totalAttempts()}}}"local_practice"===this.activity.get("type")&&(this.questionFacade.update=function(i){var u=n.get("question").type;if(i.type!==u)return E.a.exception({code:10030,detail:'type: "'.concat(i.type,"\" does not match current question instance's type")});i.response_id=n.get("response_id"),n.setOriginalQuestion(i),t.updateInstance(i)}),this.addFacadeMethods(this.questionFacade),this.model.on(this.model.EVENT.MODIFIED,(function(){this.questionFacade.trigger("change changed")}),this)}return this.questionFacade},addFacadeMethods:function addFacadeMethods(t){},updateInstance:function updateInstance(t){this.setElement(this.$el.closest(".lrn.lrn_widget")),this.displayLogic={},this.addRenderingLogic(),this.render(),this.mathService.renderIfRequired()},renderViewContent:function renderViewContent(t,n){var i,u,l,d=this.model.get("question"),h=this.options.activity.get("state")===this.options.activity.STATE.REVIEW&&this.model.hasStimulusReview(),v=h?this.model.getStimulusReview():this.model.getStimulus(),y=this.model.getInstructorStimulus(),S=!h&&this.model.hasStimulusObject()&&d.stimulus.hasOwnProperty("features")&&p.a.isArray(d.stimulus.features)?d.stimulus.features:[],E=p.a.some(S,(function(t){return t&&("vertical"===t.position||p.a.isUndefined(t.position))})),A=p.a.some(S,(function(t){return t&&"overlay"===t.position})),T=v&&v.length>0||E,R=!(!this.options.activity.get("showInstructorStimulus")||!y.length),x=this.model.getFontClass()||"",C=p.a.isString(t),I=this.widgetLayout;n=p.a.isUndefined(n)?"":n,x+=B.a.isIOS?" lrn-ios":"",this.pendingViews=S.length+1,i=H({responseId:d.response_id,questionType:this.model.get("type"),showStimulus:T,showInstructorStimulus:R,stimulusContent:v,instructorStimulusContent:y,hasVerticalFeatures:E,hasOverlayFeatures:A,extraClasses:n,globalExtraClasses:x,responseContent:C?t:"",widgetLayoutElements:I?I.getLayoutElements():Q}),u=this.$el,this.$qrEl=g()(i),l=this.$qrEl.find(".lrn_response_wrapper > .lrn_response"),C||l.append(t),this.imageLoader=new w.a({element:this.$qrEl[0]}),this.imageLoader.loadImages(),this.setElement(l),u.replaceWith(this.$qrEl),!C&&this.onAttach&&this.onAttach(),S.length>0&&this.loadStimulusFeatures(S),this.$qrEl.attr("data-lrn-widget-container",this.model.get("response_id")).attr("data-lrn-widget-type","question")},loadStimulusFeatures:function loadStimulusFeatures(t){var n=this,i=p.a.pluck(t,"type");this.featureViews=[],this.activity.loadFeatureBundles(i,(function(u){if(p.a.isEmpty(u))E.a.log("No bundles were loaded for the required Feature types: "+i.join(", "));else{if(p.a.forEach(t,(function(t){var i,l=u[t.type],d=new l.Model(t),h=d.has("position")?d.get("position"):"vertical";i="overlay"===h?g()('<div class="lrn_stimulus_features_overlay" style="visibility: hidden"><div></div></div>').insertAfter(n.$qrEl.find(".lrn_response_wrapper .lrn_response")).children("div")[0]:g()("<div></div>").appendTo(n.$qrEl.find(".lrn_stimulus_features_vertical"))[0];var v=new l.View({model:d,el:i,i18n:n.options.activity.get("i18n"),initialisationCallback:p.a.bind(n.initialisationCompleted,n)});"overlay"===h&&v.getFacade().on("complete",(function(){v.$el.parent().remove(),v.remove(),n.$qrEl.find(".lrn_response_wrapper.lrn_overlaying_features > div:last-child").css({visibility:"inherit"})})),n.featureViews.push(v)})),n.model.hasStimulusObject()){var l=n.model.get("question").stimulus,d=n.featureViews[n.featureViews.length-1].getFacade();l.hasOwnProperty("begin_response_on")?l.hasOwnProperty("begin_response_on")&&"begin"!==l.begin_response_on&&n.options.activity.get("state")!==n.options.activity.STATE.REVIEW&&("last-feature-complete"===l.begin_response_on?d.on("complete",n.beginResponse,n):"last-feature-begin"===l.begin_response_on&&d.on("begin",n.beginResponse,n)):d.on("complete",(function(){this.lastFeatureComplete&&(this.beginResponse(),this.lastFeatureComplete=!1)}),n)}n.$qrEl.find(".lrn_response_wrapper.lrn_overlaying_features > div:last-child").css({visibility:"inherit"})}}))},begin:function begin(){var t=this.model.get("question"),n=this.options.activity.get("state")===this.options.activity.STATE.REVIEW,i=t.begin_response_on&&"begin"===t.begin_response_on;if(this.lastFeatureComplete=!(this.model.hasStimulusObject()&&t.stimulus.hasOwnProperty("begin_response_on")||n),this.featureViews&&this.featureViews.length>0&&!n){var u=this,l=0;p.a.each(this.featureViews,(function(t){t.getFacade().on("complete",(function(){++l<u.featureViews.length&&u.featureViews[l].getFacade().begin()}))})),this.featureViews[l].getFacade().begin(),i&&this.beginResponse()}else this.beginResponse()},pause:function pause(){p.a.each(this.simpleFeatureFacades,(function(t){return t.pause&&t.pause()})),p.a.each(this.featureViews,(function(t){t.getFacade().pause()})),this.pauseResponse()},stop:function stop(){p.a.each(this.simpleFeatureFacades,(function(t){return t.stop&&t.stop()})),p.a.each(this.featureViews,(function(t){t.getFacade().stop()})),this.stopResponse()},masking:function masking(){},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},setDisabled:function setDisabled(t){this.setEventsDisabled(t)},setEventsDisabled:function setEventsDisabled(t){t?this.undelegateEvents():this.delegateEvents()},setButtonsDisabled:function setButtonsDisabled(t){this.$(".lrn_btn").each((function(){var n=g()(this),i=n.data("previously-disabled");return!t&&i?n.removeData("previously-disabled"):(i=n.hasClass("lrn_disabled")||n.prop("disabled")||n.attr("disabled"),t&&i?n.data("previously-disabled",!!i):(n.toggleClass("lrn_disabled",t).attr("aria-disabled",t),void("button"===this.type?n.prop("disabled",t):n.attr("disabled",t))))}))},toggleDisabled:function toggleDisabled(t){var n=this.activity.get("state"),i=[this.activity.STATE.INITIAL,this.activity.STATE.RESUME];return!(!p.a.contains(i,n)||this.model.get("disabled")===t)&&(this.model.set("disabled",t),!0)},mathquillRendering:function mathquillRendering(){var t=this.model.get("question")&&this.model.get("question").is_math;return this.model.activity&&this.model.activity.get("math_renderer")?t&&"mathquill"===this.model.activity.get("math_renderer"):t&&"mathquill"===this.model.get("question").math_renderer},renderMathquill:function renderMathquill(){this.mathquillRenderer||(this.mathquillRenderer=new v.a(S.a.isChemistry.call(this))),this.mathquillRenderer.render(this.el)},renderSimpleFeatures:function renderSimpleFeatures(t){return y.a.renderSimpleFeatures.call(this,this.$qrEl,this.activity,t)},initialisationCompleted:function initialisationCompleted(){this.mathquillRendering()&&this.renderMathquill(),this.pendingViews--,0===this.pendingViews&&this.options.initialisationCallback&&p.a.defer(this.options.initialisationCallback)},reset:function reset(){this.getFacade().trigger("reset")}})},function(t,n,i){"use strict";i(0);var u=i(14),l={SET_LEGACY_ATTRIBUTES:"validatable:legacy:setAttributes",VALIDATABLE_CHECK_ANSWER:"validatable:checkAnswer",VALIDATABLE_SHOW_SUGGESTED_ANSWERS:"validatable:showSuggestedAnswers",VALIDATABLE_UPDATE_ARIA_LIVE_DATA:"validatable:updateAriaLiveData",VALIDATABLE_CLEAR_VALIDATION_UI:"validatable:clearValidationUI",VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE:"validatable:clearValidationAriaLive",VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT:"validatable:increaseFeedbackAttemptCount"};function updateAriaLiveData(t){return{type:l.VALIDATABLE_UPDATE_ARIA_LIVE_DATA,payload:t}}n.a={actionTypes:l,checkAnswer:function checkAnswer(t){return function(n,i,d){var p=i(),h=p.base,g=p.validatable,v=g.feedbackAttemptsLimit,y=g.feedbackAttemptsCount,S=d.dataService,E=t.canShowCorrectAnswers,w=t.canShowGlobalValidationUI,A=t.showDistractorRationale,T=void 0===A?S.getActivityShowDistractorRationale():A,R=t.skipAttemptCountLimit;if((t.shouldValidateUnattempedResponse||h.isAttempted)&&(R||0===v||!(y>=v))){var x;if(!h.isReviewState)if(S.triggerQuestionFacadeEvent("beforeValidate",{preventDefault:function preventDefault(){return x=!0}}),x)return;var C=S.isResponseValid(),I=S.getValidatedResponses(),M=E?S.getSuggestedResponses():null,O=T.perResponse!==u.d?S.getResponseLevelDistractorRationale():null;n({type:l.VALIDATABLE_CHECK_ANSWER,payload:{canShowGlobalValidationUI:w,isResponseValid:C,responseLevelDistractorRationale:O,showDistractorRationale:T,validatedResponses:I}});var P=E;n(updateAriaLiveData({message:S.getAriaLiveMessage(P),mappedValidatedResponses:S.getMappedValidatedResponsesData(I),mappedSuggestedResponses:P?S.getMappedSuggestedResponsesData(M&&M.value):null,isShowingCorrectAnswers:P})),n({type:l.VALIDATABLE_SHOW_SUGGESTED_ANSWERS,payload:{suggestedResponses:M,isShowingCorrectAnswers:P}}),!R&&S.hasNewResponse()&&(n({type:l.VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT}),d.dataService.updateFeedbackAttemptsCount(i().validatable.feedbackAttemptsCount))}}},clearValidationUI:function clearValidationUI(){return{type:l.VALIDATABLE_CLEAR_VALIDATION_UI}},clearValidationAriaLive:function clearValidationAriaLive(){return{type:l.VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE}},setLegacyAttributes:function setLegacyAttributes(t){return{type:l.SET_LEGACY_ATTRIBUTES,payload:{attributes:t}}},updateAriaLiveData:updateAriaLiveData}},function(t,n,i){"use strict";var u=i(1),l=i.n(u),d=(i(7),[]),p="lrn-hidden-element-shown";function getHiddenObject(t,n){for(var i=0;i<d.length;i++)if(d[i].el===t)return n?i:d[i]}var h=function HiddenElementHelper(t){this.$target=l()(t)};h.prototype.makeVisible=function(){var t=[];if(document.body.id||(document.body.id="lrn-hidden-element-helper"),document.body.classList.add("lrn-hidden-element-helper"),this.$target.each((function(){!function cacheHiddenAncestors(n,i){!n||!i&&n.clientWidth||(i&&n.classList.contains(p)&&i--,t.push(n),cacheHiddenAncestors(n.parentElement,i))}(this,l()(this).parents().addBack().filter("."+p).length)})),this.$hiddenElements=l()(t),this.$hiddenElements.length){var n=this;this.$hiddenElements.each((function(){!function addHiddenObject(t,n){var i=getHiddenObject(t);i?i.instances.push(n):t&&t.classList&&(t.classList.add(p),d.push({el:t,instances:[n]}))}(this,n)}))}},h.prototype.restore=function(){var t=this;this.$hiddenElements.each((function(){!function restoreHiddenObject(t,n){var i,u=getHiddenObject(t);u&&(1===u.instances.length?(t.classList.remove(p),i=getHiddenObject(t,!0),d.splice(i,1)):(i=u.instances.indexOf(n))>-1&&u.instances.splice(i,1))}(this,t)})),"lrn-hidden-element-helper"!==document.body.id||d.length||(document.body.id=""),document.body.classList.remove("lrn-hidden-element-helper")},n.a=function makeVisibleAndDispatch(t,n){var i,u=!!n.length,l=new h(t);function restore(){l.restore()}return l.makeVisible(),u?i=n(restore):(i=n(),restore()),i}},function(t,n,i){"use strict";var u=i(0),l=i.n(u);n.a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="";function mergingReducer(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,d=arguments.length>1?arguments[1]:void 0,p=d.type,h=d.payload;if("UPDATE_ALL"===p)return h.data[i];var g=t[p];if(g){var v=g(u,h);return l.a.extend({},u,v)}return u}return mergingReducer.setName=function(t){return i=t},mergingReducer}},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(1),p=i.n(d),h=i(41),g="lrn-math-keep-keyboard-open",v="lrn-math-force-keyboard-close";function onItemBlurred(t,n,i){l.a.defer((function(){var u=document.activeElement||document.createElement("div"),l=i&&p.a.contains(i,u);!u.classList.contains(v)&&(u.classList.contains(g)||p.a.contains(n,u)||l)||t.trigger(t.EVENT.EDITOR_BLURRED)}))}n.a={addFacadeMethods:function addFacadeMethods(t){var n=this.model&&this.model.get("response"),i=this.keyboardView;function convertToInk(t){return{handwriting:l.a.object(l.a.keys(t),l.a.map(t,h.a.format))}}i&&i.hasHandwriting()?t.getHandwriting=function(){return convertToInk(i.getHandwriting())}:n&&n.handwriting&&(t.getHandwriting=function(){return convertToInk(n.handwriting)})},handleBlurEvents:function handleBlurEvents(t){var n=this.editorView.mathEvents,i=this.keyboardView;this.listenTo(n,n.EVENT.ITEM_BLURRED,(function(){onItemBlurred(n,t,i&&i.el)}))},isChemistry:function isChemistry(){return this.model.get("type").toLowerCase().indexOf("chemistry")>-1},onAttach:function onAttach(){this.editorView&&this.editorView.onAttach(),this.keyboardView&&this.keyboardView.onAttach()},onItemBlurred:onItemBlurred,setDisabled:function setDisabled(t,n){l.a.each(t,(function(t){t.mathEvents.trigger(t.mathEvents.EVENT.CHANGE_DISABLED_STATE,n)}))},usesLazyKeyboard:function usesLazyKeyboard(t){return t.get("enable_formula_keyboard_lazy_render")},addAriaLabelToValidationUi:function addAriaLabelToValidationUi(){if(this.model.getValidResponse()&&this.model.getValidResponse().value){var t=function getAriaLabelsFromValidResponse(t){var n=l.a.pluck(l.a.flatten(t.value),"aria_label");return l()(n).map((function(t,n){return"Correct Answer "+(n+1)+": "+(t||"screenreader friendly version of equation not available")+"."})).join(" ")}(this.model.getValidResponse());this.$(".lrn_correctAnswers").attr("aria-label",t)}}}},function(t,n,i){"use strict";var u=i(0),l=i.n(u);function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var d=50,p=0,h=0,g=2,v=70,y=30;function getElementLayoutData(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.type,u=d,S=v,E=y,w=p,A=h,T=g,R=t.width;l.a.isNumber(R)?R<E?R=E:R>S&&(R=S):R=u;var x=t.padding_left;l.a.isNumber(x)||(x=w),x*=R/100;var C=t.padding_right;return l.a.isNumber(C)||(C=n?T:A),{type:i,width:R,paddingLeft:x,paddingRight:C*=R/100}}var S=function(){function BaseDataService(t,n){!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,BaseDataService),this.model=t,this.questionFacade=n,this.initialise()}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(BaseDataService,[{key:"initialise",value:function initialise(){this.activity=this.model.activity,this.question=this.model.get("question"),this.data={},this.attributes={}}},{key:"prepare",value:function prepare(t){t(this)}},{key:"getInitialState",value:function getInitialState(){this.initialise();var t=this.activity,n=this.question,i=this.isReviewState;return{base:{isResumeState:this.isResumeState,isReviewState:i,isPreviewState:this.isPreviewState,isLocalPractice:t.get("type")===t.TYPE.LOCAL_PRACTICE,responseId:n.response_id,modelId:this.model.id,questionType:n.type,i18n:t.get("i18n"),state:t.get("state"),readOnly:this.readOnly,isMath:this.isMath,cacheRenderedMath:null,stimulus:this.stimulus,stimulusReview:this.stimulusReview,stimulusInstructor:this.stimulusInstructor,widgetLayout:this.widgetLayout,fontSizeClass:this.fontClass,disabled:!1,isAttempted:i||this.isAttempted,extraClassNames:this.extraClassNames,disableSpokenmathDistractors:t.get("disable_spokenmath_distractors"),disableSpokenmathUserInputs:t.get("disable_spokenmath_user_inputs")}}}},{key:"getFacade",value:function getFacade(){var t=this;return this._facade||(this._facade={},this.EXPOSED_METHODS.forEach((function(n){t._facade[n]=t[n].bind(t)}))),this._facade}},{key:"get",value:function get(t,n){return this.attributes[t]||l.a.isUndefined(n)||this.set(t,n),this.attributes[t]}},{key:"set",value:function set(t,n){var i=this.attributes;l.a.isObject(t)?l.a.each(t,(function(t,n){i[n]=t})):l.a.isString(t)&&(this.attributes[t]=n)}},{key:"loadFeatureBundles",value:function loadFeatureBundles(t,n){return this.activity.loadFeatureBundles(t,n)}},{key:"updateResponseValue",value:function updateResponseValue(t){return this.model.updateResponseValue(t)}},{key:"getResponse",value:function getResponse(){return this.model.get("response")}},{key:"canValidateResponse",value:function canValidateResponse(){return this.model.canValidateResponse()}},{key:"validateResponse",value:function validateResponse(){return this.model.validateResponse()}},{key:"isResponseValid",value:function isResponseValid(){return this.model.isResponseValid()}},{key:"hasNewResponse",value:function hasNewResponse(){var t=this.getResponse();if(!t)return!1;var n=!l.a.isEqual(t.value,this.get("prevResponseValue"));return this.set("prevResponseValue",l.a.deepClone(t.value)),n}},{key:"triggerQuestionFacadeEvent",value:function triggerQuestionFacadeEvent(){var t;(t=this.questionFacade).trigger.apply(t,arguments)}},{key:"isReviewState",get:function get(){var t=this.data,n=this.activity;return l.a.isUndefined(t.isReviewState)&&(t.isReviewState=n.get("state")===n.STATE.REVIEW),t.isReviewState}},{key:"isResumeState",get:function get(){var t=this.data,n=this.activity;return l.a.isUndefined(t.isResumeState)&&(t.isResumeState=n.get("state")===n.STATE.RESUME),t.isResumeState}},{key:"isPreviewState",get:function get(){var t=this.data,n=this.activity;return l.a.isUndefined(t.isPreviewState)&&(t.isPreviewState=n.get("state")===n.STATE.PREVIEW),t.isPreviewState}},{key:"isMath",get:function get(){return!!this.question.is_math}},{key:"isAttempted",get:function get(){return this.model.hasResponse()}},{key:"stimulus",get:function get(){var t=this.data;if(l.a.isUndefined(t.stimulus)){var n=this.question.stimulus;if(l.a.isObject(n))t.stimulus=function legacyGetStimulusObject(t){var n,i=t.features,u=l.a.last(i),d=t.content,p=l.a.filter(i,(function(t){return"overlay"===t.position})),h=l.a.filter(i,(function(t){return"vertical"===t.position||l.a.isUndefined(t.position)})),g=(n={},l.a.each(t,(function(t,i){"content"!==i&&"features"!==i&&(n[i]=t)})),n);return u&&(u._last=!0),{visible:!0,content:d,legacyVerticalFeatures:h,legacyOverlayFeatures:p,legacyEvents:g}}(n);else{var i,u=!1;l.a.isString(n)&&(u=!0,i=n),t.stimulus={visible:u,content:i}}}return t.stimulus}},{key:"stimulusReview",get:function get(){var t=this.data;if(l.a.isUndefined(t.stimulusReview)){var n,i=this.question,u=!1;l.a.isString(i.stimulus_review)?(u=!0,n=i.stimulus_review):l.a.isString(i.description)&&(u=!0,n=i.description),t.stimulusReview={visible:u,content:n}}return t.stimulusReview}},{key:"stimulusInstructor",get:function get(){var t=this.data;if(l.a.isUndefined(t.stimulusInstructor)){var n,i,u=this.activity,d=this.question.instructor_stimulus;l.a.isString(d)&&(n=!(!u.get("showInstructorStimulus")||!d.length),i=d),t.stimulusInstructor={visible:n,content:i}}return t.stimulusInstructor}},{key:"fontsize",get:function get(){var t=this.activity.get("fontsize"),n=l.a.getNested(this.question,"ui_style.fontsize");return l.a.isUndefined(t)?n||void 0:t}},{key:"fontClass",get:function get(){var t=this.data;if(l.a.isUndefined(t.fontClass)){var n,i=this.model,u=this.fontsize;u&&(n=i.FONTSIZE[u.toUpperCase()]),n=n?i.FONTSIZE_PREFIX+n:"",t.fontClass=n}return t.fontClass}},{key:"readOnly",get:function get(){if(l.a.isUndefined(this.data.readOnly)){var t=this.activity,n=t.get("state");this.data.readOnly=n===t.STATE.REVIEW||n===t.STATE.PREVIEW}return this.data.readOnly}},{key:"widgetLayout",get:function get(){var t=this.data;if(l.a.isUndefined(t.widgetLayout)){var n=this.question.widget_layout,i=!!(n&&l.a.isArray(n.elements)&&this.stimulus.visible),u={enabled:i};i&&(u.elements=function getProcessedWidgetLayoutElements(t){var n=[];return l.a.each(t,(function(t){var i=t.type;l.a.isString(i)&&i.length&&!l.a.findWhere(n,{type:i})&&n.push(t)})),l.a.each(["stimulus","interaction"],(function(t){l.a.findWhere(n,{type:t})||n.push(getElementLayoutData({type:t}))})),l.a.map(n,(function(t,i){return getElementLayoutData(t,i===n.length-1)}))}(n.elements)),t.widgetLayout=u}return t.widgetLayout}},{key:"extraClassNames",get:function get(){return{}}}]),BaseDataService}();S.prototype.EXPOSED_METHODS=["get","set","loadFeatureBundles","updateResponseValue","getResponse","hasNewResponse","canValidateResponse","triggerQuestionFacadeEvent","isResponseValid","validateResponse"],n.a=S},function(t,n,i){"use strict";i.d(n,"a",(function(){return u}));var u=function triggerEvent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={detail:t};try{var i=new CustomEvent("learnosity",n);document.dispatchEvent(i)}catch(n){var u=document.createEvent("CustomEvent");u.initCustomEvent("learnosity",!1,!1,t),document.dispatchEvent(u)}}},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=["association","choicematrix","classification","clozeassociation","clozedropdown","clozeformula","formulaV2","imageclozedropdown","imageclozeassociationV2","mcq"],p=function isWhiteListed(t){return l.a.contains(d,t)};n.a={getFormattedQuestion:function getFormattedQuestion(t,n){if(t){var i=l.a.deepClone(t),u=i.dynamic;if(!l.a.isEmpty(u)&&p(i.type)){var d=u.rows,h=u.cols,g=!l.a.isString(n)||l.a.isEmpty(n)?d[0]:l.a.findWhere(d,{id:n});if(g){var v=g.values,y=function(){var t={};return l.a.each(h,(function(n,i){t[n]=v[i]})),t}(),S=JSON.stringify(i).replace(/{{var:([a-z0-9 _]+)}}/gi,(function(t,n){var i=y[n];return l.a.isString(i)?JSON.stringify(i).slice(1,-1):t}));try{i=JSON.parse(S)}catch(t){}}}return i}},isWhiteListed:p}},function(t,n,i){"use strict";i.d(n,"b",(function(){return isUnloadInProgress})),i.d(n,"a",(function(){return h}));var u=i(0),l=i.n(u),d=i(7);function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var p=[];function isUnloadInProgress(){return!l.a.isEmpty(p)&&l.a.some(p,(function(t){return!!t.unloadInProgress}))}var h=function(){function UnloadHandler(){var t=this;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,UnloadHandler),function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}(this,"onBeforeUnload",(function(n){if(t.unloadInProgress=!0,setTimeout((function(){setTimeout((function(){t.unloadInProgress=!1}),1e3)}),1),l.a.isFunction(t.customUnload)){var i=t.customUnload();i&&(n.returnValue=i)}else t.safeToUnload&&!t.safeToUnload()&&(n.returnValue=t.i18n.labels.onbeforeunload)}))}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(UnloadHandler,[{key:"init",value:function init(t){this.i18n=t.i18n,this.safeToUnload=t.safeToUnload,d.a.isChromeApp||(this.customUnload=t.customUnload),window.addEventListener("beforeunload",this.onBeforeUnload),d.a.isIOS&&window.addEventListener("pagehide",this.onBeforeUnload),p.push(this)}},{key:"reset",value:function reset(){window.removeEventListener("beforeunload",this.onBeforeUnload),d.a.isIOS&&window.removeEventListener("pagehide",this.onBeforeUnload);var t=p.indexOf(this);t>=0&&p.splice(t,1)}}]),UnloadHandler}()},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(19),p=i(26),h=i(11);function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var g=function(){function MathService(t,n){!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,MathService),this.type=n,this.view=t,this.model=t.model}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(MathService,[{key:"getWidgetData",value:function getWidgetData(){var t=this.type;return"question"===t?this.model.get(t):this.model.attributes}},{key:"isMath",value:function isMath(){return!!l.a.getNested(this.getWidgetData(),"is_math")}},{key:"renderIfRequired",value:function renderIfRequired(t){var n=this;return this.isMath()?new Promise((function(i){n.mathquillRendering()?(n.renderMathquill(t),i(!0)):h.a&&(h.a.once(h.a.EVENT.RENDERED,(function(){return i(!0)})),h.a.render())})):Promise.resolve(!1)}},{key:"mathquillRendering",value:function mathquillRendering(){var t=this.model;if(this.isMath()){var n=t.activity.get("math_renderer");return n?"mathquill"===n:"mathquill"===this.getWidgetData().math_renderer}}},{key:"renderMathquill",value:function renderMathquill(t){var n=this,i=function(){var i=t||n.view.el,u=document.body;return u.contains(i)?i:u}();return this.mathquillRenderer||(this.mathquillRenderer=new d.a(p.a.isChemistry.call(this))),this.mathquillRenderer.render(i)}}]),MathService}();n.a=g},function(t,n,i){"use strict";function getTextDirection(){return window.LearnosityApp._internal.config.textDirection}function isRtl(){return"rtl"===getTextDirection()||"ltr-rtl"===getTextDirection()}n.a={isRtl:isRtl,getTextDirection:getTextDirection,getDirection:function getDirection(){return isRtl()?"rtl":"ltr"}}},function(t,n,i){"use strict";i.d(n,"a",(function(){return u})),i.d(n,"b",(function(){return l}));var u={SMALL:"small",NORMAL:"normal",LARGE:"large",XLARGE:"xlarge",XXLARGE:"xxlarge"},l={small:11,normal:14,large:17,xlarge:20,xxlarge:24}},function(module,exports,__webpack_require__){var require,require,f;f=function(){var define,module,exports;return function r(t,n,i){function o(l,d){if(!n[l]){if(!t[l]){if(!d&&"function"==typeof require&&require)return require(l,!0);if(u)return u(l,!0);var p=new Error("Cannot find module '"+l+"'");throw p.code="MODULE_NOT_FOUND",p}var h=n[l]={exports:{}};t[l][0].call(h.exports,(function(n){return o(t[l][1][n]||n)}),h,h.exports,r,t,n,i)}return n[l].exports}for(var u="function"==typeof require&&require,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Assert=i.checkCounter=i.setCounter=i.clearLocation=i.setLocation=i.reserveCodeRange=i.message=i.assert=void 0;var u=t("./backward.js"),l=i.assert=function(t,n,i){if(void 0===n&&(n="failed!"),!t){var u=new Error(n);throw u.location=i||S.location,u}},d=i.message=function message(t,n){var i=S.messages[t];return S.location,n&&(0,u.forEach)(n,(function(t,n){i=i.replace("%"+(n+1),t)})),t+": "+i},p=i.reserveCodeRange=function reserveCodeRange(t,n,i){l(t<=n,"Invalid code range");var d=(0,u.every)(S.reservedCodes,(function(i){return n<i.first||t>i.last}));l(d,"Conflicting request for error code range"),S.reservedCodes.push({first:t,last:n,name:i})},h=i.setLocation=function setLocation(t){S.location=t},g=i.clearLocation=function clearLocation(){S.location=null},v=i.setCounter=function setCounter(t,n){S.count=t,S.countMessage=n||"ERROR count exceeded"},y=i.checkCounter=function checkCounter(){var t=S.count;"number"!=typeof t||isNaN(t)?l(!1,"ERROR counter not set"):l(S.count--,S.countMessage)},S=i.Assert={assert:l,message:d,messages:{},reserveCodeRange:p,reservedCodes:[],setLocation:h,clearLocation:g,setCounter:v,checkCounter:y}},{"./backward.js":3}],2:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Ast=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=t("./backward.js"),d=t("./assert.js");i.Ast=function(){function Ast(){this.nodePool=["unused"],this.nodeMap={}}function isNode(t){return void 0===t&&(t=this),t.op&&t.args}return Ast.prototype.create=function create(t,n){var i=create(this);if("string"==typeof t)i.op=t,i.args=n instanceof Array?n:[];else if(null!==t&&"object"===(void 0===t?"undefined":u(t))){var d=t;(0,l.forEach)(keys(d),(function(t,n){i[t]=d[t]}))}return i},Ast.prototype.arg=function arg(t){if(!isNode(this))throw"Malformed node";return this.args.push(t),this},Ast.prototype.argN=function argN(t,n){if(!isNode(this))throw"Malformed node";return void 0===n?this.args[t]:(this.args[t]=n,this)},Ast.prototype.args=function args(t){if(!isNode(this))throw"Malformed node";return void 0===t?this.args:(this.args=t,this)},Ast.prototype.isNode=isNode,Ast.prototype.intern=function intern(t){this instanceof Ast&&void 0===t&&isNode(this)&&(t=this),(0,d.assert)("object"===(void 0===t?"undefined":u(t)),"node not an object");for(var n=t.op,i=t.args.length,l="",p=[],h=0;h<i;h++)l+=" ","string"==typeof t.args[h]?l+=p[h]=t.args[h]:l+=p[h]=this.intern(t.args[h]);t.lbrk&&t.lbrk!=="{".charCodeAt(0)&&(l+=String.fromCharCode(t.lbrk),l+=String.fromCharCode(t.rbrk));var g=n+i+l,v=this.nodeMap[g];return void 0===v&&(this.nodePool.push({op:n,args:p}),v=this.nodePool.length-1,this.nodeMap[g]=v),v},Ast.prototype.node=function node(t){for(var n=JSON.parse(JSON.stringify(this.nodePool[t])),i=0;i<n.args.length;i++)"string"!=typeof n.args[i]&&(n.args[i]=this.node(n.args[i]));return n},Ast.prototype.dumpAll=function dumpAll(){var t="";return(0,l.forEach)(this.nodePool,(function(n,i){t+="\n"+i+": "+Ast.dump(n)})),t},Ast.dump=Ast.prototype.dump=function dump(t){if("string"==typeof t);else if("number"==typeof t);else{t.op;for(var n=0;n<t.args.length;n++)dump(t.args[n])}return s},Ast}()},{"./assert.js":1,"./backward.js":3}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString),forEach=exports.forEach=function forEach(t,n){var i=arguments[2];if(Array.prototype.indexOf)return t.forEach(n);var u=toObject(t),l=splitString&&"[object String]"==_toString(u)?u.split(""):u,d=-1,p=l.length>>>0;if("[object Function]"!=_toString(n))throw new TypeError;for(;++d<p;)d in l&&n.call(i,l[d],d,u)},filter=exports.filter=function filter(t,n){var i=arguments[2];if(Array.prototype.filter)return t.filter(n);var u,l=toObject(t),d=splitString&&"[object String]"==_toString(t)?t.split(""):l,p=d.length>>>0,h=[];if("[object Function]"!=_toString(n))throw new TypeError(n+" is not a function");for(var g=0;g<p;g++)g in d&&(u=d[g],n.call(i,u,g,l)&&h.push(u));return h},every=exports.every=function every(t,n){var i=arguments[2];if(Array.prototype.every)return t.every(n,i);var u=toObject(t),l=splitString&&"[object String]"==_toString(t)?t.split(""):u,d=l.length>>>0;if("[object Function]"!=_toString(n))throw new TypeError(n+" is not a function");for(var p=0;p<d;p++)if(p in l&&!n.call(i,l[p],p,u))return!1;return!0},some=exports.some=function some(t,n){var i=arguments[2];if(Array.prototype.some)return t.some(n,i);var u=toObject(t),l=splitString&&"[object String]"==_toString(t)?t.split(""):u,d=l.length>>>0;if("[object Function]"!=_toString(n))throw new TypeError(n+" is not a function");for(var p=0;p<d;p++)if(p in l&&n.call(i,l[p],p,u))return!0;return!1},indexOf=exports.indexOf=function indexOf(t,n){var i=arguments[2];if(Array.prototype.indexOf||"string"==typeof t)return t.indexOf(n,i);var u=splitString&&"[object String]"==_toString(t)?t.split(""):toObject(t),l=u.length>>>0;if(!l)return-1;var d=0;for(arguments.length>2&&(d=toInteger(i)),d=d>=0?d:Math.max(0,l+d);d<l;d++)if(d in u&&u[d]===n)return d;return-1},keys=exports.keys=function keys(t){if(Object.keys)return Object.keys(t);var n=!0,i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=i.length;for(var l in{toString:null})n=!1;if("object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var d in t)owns(t,d)&&keys.push(d);if(n)for(var p=0,h=u;p<h;p++){var g=i[p];owns(t,g)&&keys.push(g)}return keys},toObject=exports.toObject=function toObject(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)},prototypeOfObject=Object.prototype,_toString=function _toString(t){return prototypeOfObject.toString.apply(t)},owns=function owns(t,n){return prototypeOfObject.hasOwnProperty.call(t,n)},create=exports.create=function create(t){if(Object.create)return Object.create(t);var n=function F(){};if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return n.prototype=t,new n},toString,isArray,escMap,escFunc,escRE;"undefined"==typeof window||window.JSON||(window.JSON={parse:function parse(sJSON){return eval("("+sJSON+")")},stringify:(toString=Object.prototype.toString,isArray=Array.isArray||function(t){return"[object Array]"===toString.call(t)},escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},escFunc=function escFunc(t){return escMap[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},escRE=/[\\"\u0000-\u001F\u2028\u2029]/g,function stringify(t){if(null==t)return"null";if("number"==typeof t)return isFinite(t)?t.toString():"null";if("boolean"==typeof t)return t.toString();if("object"===(void 0===t?"undefined":_typeof(t))){if("function"==typeof t.toJSON)return stringify(t.toJSON());if(isArray(t)){for(var n="[",i=0;i<t.length;i++)n+=(i?", ":"")+stringify(t[i]);return n+"]"}if("[object Object]"===toString.call(t)){var u=[];for(var l in t)t.hasOwnProperty(l)&&u.push(stringify(l)+": "+stringify(t[l]));return"{"+u.join(", ")+"}"}}return'"'+t.toString().replace(escRE,escFunc)+'"'})})},{}],4:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Core=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=(t("./version.js"),t("./backward.js")),d=t("./assert.js"),p=t("./ast.js"),h=t("./model.js"),g=t("./rules.js");!function(t){function newNode(t,n){return{op:t,args:n}}function binaryNode(t,n,i){if(n.length<2)return n[0];var u=[];return(0,l.forEach)(n,(function(n){i&&n.op===t?u=u.concat(n.args):u.push(n)})),newNode(t,u)}function Visitor(t){function visit(t,n,i){switch((0,d.assert)(t.op&&t.args,"Visitor.visit() op="+t.op+" args = "+t.args),t.op){case h.Model.NUM:t=n.numeric(t,i);break;case h.Model.ADD:case h.Model.SUB:case h.Model.PM:case h.Model.BACKSLASH:case h.Model.DIV:case h.Model.FRAC:case h.Model.LOG:case h.Model.COLON:case h.Model.FUNC:case h.Model.TYPE:t=1===t.args.length?n.unary(t,i):n.binary(t,i);break;case h.Model.MUL:case h.Model.TIMES:case h.Model.COEFF:t=n.multiplicative(t,i);break;case h.Model.POW:t=n.exponential(t,i);break;case h.Model.VAR:t=n.variable(t,i);break;case h.Model.SQRT:case h.Model.SIN:case h.Model.COS:case h.Model.TAN:case h.Model.SEC:case h.Model.CSC:case h.Model.COT:case h.Model.ARCSIN:case h.Model.ARCCOS:case h.Model.ARCTAN:case h.Model.ARCSEC:case h.Model.ARCCSC:case h.Model.ARCCOT:case h.Model.PERCENT:case h.Model.M:case h.Model.ABS:case h.Model.FACT:case h.Model.FORALL:case h.Model.EXISTS:case h.Model.IN:case h.Model.SUM:case h.Model.LIM:case h.Model.EXP:case h.Model.TO:case h.Model.DERIV:case h.Model.INT:case h.Model.PROD:case h.Model.CUP:case h.Model.BIGCUP:case h.Model.CAP:case h.Model.BIGCAP:case h.Model.PIPE:case h.Model.ION:case h.Model.POW:case h.Model.SUBSCRIPT:case h.Model.OVERLINE:case h.Model.OVERSET:case h.Model.UNDERSET:case h.Model.MATHBF:case h.Model.NONE:case h.Model.DEGREE:case h.Model.DOT:case h.Model.MATHFIELD:case h.Model.SET:case h.Model.NOT:t=n.unary(t,i);break;case h.Model.COMMA:case h.Model.MATRIX:case h.Model.VEC:case h.Model.ROW:case h.Model.COL:case h.Model.LIST:t=n.comma(t,i);break;case h.Model.EQL:case h.Model.LT:case h.Model.LE:case h.Model.GT:case h.Model.GE:case h.Model.NE:case h.Model.NGTR:case h.Model.NLESS:case h.Model.NI:case h.Model.SUBSETEQ:case h.Model.SUPSETEQ:case h.Model.SUBSET:case h.Model.SUPSET:case h.Model.NNI:case h.Model.NSUBSETEQ:case h.Model.NSUPSETEQ:case h.Model.NSUBSET:case h.Model.NSUPSET:case h.Model.APPROX:case h.Model.IMPLIES:case h.Model.PERP:case h.Model.PROPTO:case h.Model.PARALLEL:case h.Model.NPARALLEL:case h.Model.SIM:case h.Model.CONG:case h.Model.NSIM:case h.Model.NCONG:case h.Model.CAPRIGHTARROW:case h.Model.RIGHTARROW:case h.Model.LEFTARROW:case h.Model.LONGRIGHTARROW:case h.Model.LONGLEFTARROW:case h.Model.OVERRIGHTARROW:case h.Model.OVERLEFTARROW:case h.Model.CAPLEFTRIGHTARROW:case h.Model.LEFTRIGHTARROW:case h.Model.LONGLEFTRIGHTARROW:case h.Model.OVERLEFTRIGHTARROW:t=n.equals(t,i);break;case h.Model.PAREN:case h.Model.INTERVAL:t=n.paren(t);break;default:"normalizeLiteral"!==n.name&&"sort"!==n.name&&(t=newNode(h.Model.VAR,["INTERNAL ERROR Should not get here. Unhandled node operator "+t.op]))}return t}function lookup(t){if(!t)return"";var n=h.Model.option("words"),i=void 0;return n&&(i=n[t]),i||"\\"===(i=t).charAt(0)&&(i=i.substring(1)),i}function normalizeFormatObject(t){var n=[];switch(t.op){case h.Model.VAR:n.push({code:t.args[0]});break;case h.Model.MUL:var i="",u=void 0;(0,l.forEach)(t.args,(function(t){t.op===h.Model.VAR?i+=t.args[0]:t.op===h.Model.NUM&&(u=+t.args[0])})),n.push({code:i,length:u});break;case h.Model.COMMA:(0,l.forEach)(t.args,(function(t){n=n.concat(normalizeFormatObject(t))}))}return n}function checkMatrixType(t,n){return normalizeFormatObject(t).some((function(t){var i=t.code;switch(t.length,i){case"simpleSmallRowMatrix":case"smallRowMatrix":return n.op===h.Model.MATRIX&&1===n.m&&n.n<4;case"simpleSmallColumnMatrix":case"smallColumnMatrix":return n.op===h.Model.MATRIX&&n.m<4&&1===n.n;case"simpleSmallMatrix":case"smallMatrix":return n.op===h.Model.MATRIX&&n.m<4&&n.n<4;case"matrix":return n.op===h.Model.MATRIX;case"row":return n.op===h.Model.ROW;case"column":return n.op===h.Model.COL;default:return!1}}))}function hasSimpleExpressions(t){return(0,d.assert)(t.op===h.Model.MATRIX||t.op===h.Model.ROW||t.op===h.Model.COL),(0,l.every)(t.args,(function(t){return t.op===h.Model.MATRIX||t.op===h.Model.ROW||t.op===h.Model.COL?hasSimpleExpressions(t):function isSimpleExpression(t){return t.op===h.Model.NUM||t.op===h.Model.VAR||"string"==typeof t}(t)}))}function matchType(t,n){var i=h.Model.option("types");if(t.op===h.Model.TYPE&&t.args[0].op===h.Model.VAR){var u=t.args[0].args[0];switch(u){case"number":case"integer":case"decimal":case"scientific":case"fraction":case"simpleFraction":case"mixedFraction":case"fractionOrDecimal":return function checkNumberType(t,n){return normalizeFormatObject(t).some((function(t){var i=t.code,u=t.length;switch(i){case"integer":if("integer"===n.numberFormat&&(void 0===u||u===n.args[0].length))return!0;break;case"decimal":if("decimal"===n.numberFormat&&n.isRepeating)return void 0===u;if("decimal"===n.numberFormat&&(void 0===u||0===u&&-1===(0,l.indexOf)(n.args[0],".")||u===n.args[0].substring((0,l.indexOf)(n.args[0],".")+1).length))return!0;break;case"number":if("decimal"===n.numberFormat&&n.isRepeating)return void 0===u;if("integer"===n.numberFormat||"decimal"===n.numberFormat){var p=(0,l.indexOf)(n.args[0],".");if(void 0===u||0===u&&-1===p||p>=0&&u===n.args[0].substring(p+1).length)return!0}break;case"scientific":if(n.isScientific){var h=n.args[0].args[0];if(void 0===u||0===u&&-1===(0,l.indexOf)(h,".")||u===h.substring((0,l.indexOf)(h,".")+1).length)return!0}break;case"fraction":if(n.isFraction||n.isMixedFraction)return!0;break;case"simpleFraction":case"nonMixedFraction":if(n.isFraction)return!0;break;case"mixedFraction":if(n.isMixedFraction)return!0;break;case"fractionOrDecimal":if(n.isFraction||n.isMixedFraction||"decimal"===n.numberFormat)return!0;break;default:(0,d.assert)(!1,(0,d.message)(2015,[i]))}}))}(t.args[0],n);case"variable":return n.op===h.Model.VAR;case"simpleSmallRowMatrix":case"simpleSmallColumnMatrix":case"simpleSmallMatrix":return checkMatrixType(t.args[0],n)&&hasSimpleExpressions(n);case"smallRowMatrix":case"smallColumnMatrix":case"smallMatrix":case"matrix":case"row":case"column":return checkMatrixType(t.args[0],n);default:var p=i[u];if(p)return(0,d.assert)(p instanceof Array),p.some((function(t){return match([normalizeLiteral(h.Model.create(t))],n).length>0}))}return!1}if(t.op===h.Model.COLON&&t.args[0].op===h.Model.VAR&&"?"===t.args[0].args[0]){switch((0,d.assert)(t.args[1].op===h.Model.VAR),t.args[1].args[0]){case"N":return n.op===h.Model.NUM;case"V":return n.op===h.Model.VAR}return!1}return t.op===h.Model.VAR&&"?"===t.args[0]||t.op===h.Model.MATRIX&&n.op===h.Model.MATRIX}function match(n,i){return 0!==n.size&&void 0!==i&&n.filter((function(n){if(void 0===n.op||void 0===i.op)return!1;if(t.intern(n)===t.intern(i)||matchType(n,i))return!0;if(n.op===i.op){if(n.args.length===i.args.length)return n.args.every((function(t,u){return n.op===h.Model.VAR?t===i.args[u]:1===match([t],i.args[u]).length}));if(n.args.length<i.args.length){var u=i.args.slice(1);if(2===n.args.length)return match([n.args[0]],i.args[0]).length>0&&match([n.args[1]],newNode(i.op,u)).length>0}}return!1}))}function expand(t,n,i){i=i||{};var u=t.str;if(u&&n){var p=u.split("%").length-1;if(u.indexOf("%%")>=0&&(u=u.replace("%%",n[0].args[0])),u.indexOf("%*")>=0){var g="";(0,l.forEach)(n,(function(t){""!==g&&(g+=" "),g+=u.replace("%*",t.args[0]).replace("%M",t.m).replace("%N",t.n)})),u=g}return u.indexOf("%IP")>=0&&(u=u.replace("%IP",i.ip)),u.indexOf("%FP0")>=0&&(u=u.replace("%FP0",i.fp)),u.indexOf("%FP")>=0&&(u=u.replace("%FP",i.fp.split("").join(" "))),u.indexOf("%M")>=0&&((0,d.assert)(i.m),u=u.replace("%M",i.m)),u.indexOf("%N")>=0&&((0,d.assert)(i.n),u=u.replace("%N",i.n)),2===p&&n.length>2?u=function expandBinary(t,n){var i=t;return(0,l.forEach)(n,(function(n,i){t=t.replace("%"+(i+1),n.args[0])})),n.length>2?expandBinary(i,[newNode(h.Model.VAR,[t])].concat(n.slice(2))):t}(u,n):(0,l.forEach)(n,(function(t,n){u=u.replace("%"+(n+1),t.args[0])})),{op:h.Model.VAR,args:[u]}}return(0,d.assert)(1===n.length&&function isEmpty(t){return t.op===h.Model.VAR&&1===t.args.length&&""===t.args[0]}(n[0])),n[0]}function normalizeLiteral(i){return i&&i.args?(t.intern(i),visit(i,{name:"normalizeLiteral",numeric:function numeric(t){return t},binary:function binary(t){var n=[];return(0,l.forEach)(t.args,(function(t){n.push(normalizeLiteral(t))})),t.args=n,t},multiplicative:function multiplicative(t){var n=[];(0,l.forEach)(t.args,(function(t){(t.isPolynomial||t.isImplicit)&&n.length>0?n.push(binaryNode(h.Model.MUL,[n.pop(),normalizeLiteral(t)],!0)):n.push(normalizeLiteral(t))}));var i=binaryNode(t.op===h.Model.MUL?h.Model.TIMES:t.op,n,!0);return i.isScientific=t.isScientific,i.isMixedFraction=t.isMixedFraction,i.isBinomial=t.isBinomial,i},unary:function unary(t){var n=[];return(0,l.forEach)(t.args,(function(t){n.push(normalizeLiteral(t))})),newNode(t.op,n)},exponential:function exponential(t){var n=[];return(0,l.forEach)(t.args,(function(t){n.push(normalizeLiteral(t))})),t.args=n,t},variable:function variable(t){return t},comma:function comma(t){var n=[];return(0,l.forEach)(t.args,(function(t){n.push(normalizeLiteral(t))})),t.args=n,t},paren:function paren(t){var n=[];return(0,l.forEach)(t.args,(function(t){n.push(normalizeLiteral(t))})),t.args=n,t},equals:function equals(t){var i=[];if((0,l.forEach)(t.args,(function(t){i.push(normalizeLiteral(t))})),!n("ignoreOrder")||t.op!==h.Model.GT&&t.op!==h.Model.GE)t.args=i;else{(0,d.assert)(2===i.length,"Internal error: comparisons have only two operands");var u=i[0];i[0]=i[1],i[1]=u,t.op=t.op===h.Model.GT?h.Model.LT:h.Model.LE,t.args=i}return t}})):((0,d.assert)(!1,"Should not get here. Illformed node."),0)}function matchedTemplate(t,n,i){var u=[];n.forEach((function(n){u=u.concat(t[JSON.stringify(n)])}));var l=[];return u.forEach((function(t){(!t.context||h.Model.option("NoParens")&&t.context.indexOf("NoParens")>-1||h.Model.option("EndRoot")&&t.context.indexOf("EndRoot")>-1)&&i>=function paramCount(t){(0,d.assert)("string"==typeof t.str);var n=t.str.split("%").filter((function(t){return!isNaN(+t[0])}));return 0===n.length?0:+n.sort()[n.length-1][0]}(t)&&l.push(t)})),0===l.length&&l.push({str:""}),l[0]}function getNodeArgsForTemplate(t,n){return(0,d.assert)("string"==typeof n.str),n.str.indexOf("%%")>=0?[t]:t.args}this.normalizeLiteral=normalizeLiteral,this.translate=function translate(t,n){var i;n instanceof Array&&(n=1===n.length?n[0]:function mergeMaps(t,n){var i={};return t&&Object.keys(t).forEach((function(n){i[n]=t[n]})),Object.keys(n).forEach((function(t){i[t]||(i[t]=n[t])})),i}(n[1],n[0])),i=n;var u=Object.keys(n),p=[];return u.forEach((function(t){p.push(JSON.parse(t))})),t&&t.args?visit(t,{name:"translate",numeric:function numeric(t){var i=[{op:h.Model.VAR,args:[lookup(t.args[0])]}],u={};if("decimal"===t.numberFormat){var l=t.args[0].split(".");(0,d.assert)(2===l.length),u.ip=l[0],u.fp=l[1]}var g=match(p,t);return 0===g.length?t:expand(matchedTemplate(n,g,1),i,u)},binary:function binary(t){var u=match(p,t);if(0===u.length)return t;var d=matchedTemplate(n,u,t.args.length),h=getRulesForArgs(d),g=getNodeArgsForTemplate(t,d),v=[];return(0,l.forEach)(g,(function(t,n){v=v.concat(translate(t,[i,h]))})),expand(d,v)},multiplicative:function multiplicative(t){var u=match(p,t);if(0===u.length)return t;var d=matchedTemplate(n,u,t.args.length),h=getRulesForArgs(d),g=getNodeArgsForTemplate(t,d),v=[];return(0,l.forEach)(g,(function(t,n){v=v.concat(translate(t,[i,h]))})),expand(d,v)},unary:function unary(t){var u=match(p,t);if(0===u.length)return t;var d=matchedTemplate(n,u,t.args.length),h=getRulesForArgs(d),g=getNodeArgsForTemplate(t,d),v=[];return(0,l.forEach)(g,(function(t,n){v=v.concat(translate(t,[i,h]))})),expand(d,v)},exponential:function exponential(t){var u=match(p,t);if(0===u.length)return t;var d=matchedTemplate(n,u,t.args.length),h=getRulesForArgs(d),g=getNodeArgsForTemplate(t,d),v=[];return(0,l.forEach)(g,(function(t,n){v=v.concat(translate(t,[i,h]))})),expand(d,v)},variable:function variable(t){var u=match(p,t);if(0===u.length)return t;var d=matchedTemplate(n,u,t.args.length),g=getRulesForArgs(d),v=getNodeArgsForTemplate(t,d),y=[];return y.push(newNode(h.Model.VAR,[lookup(v.shift())])),(0,l.forEach)(v,(function(t,n){y=y.concat(translate(t,[i,g]))})),expand(d,y)},comma:function comma(t){if(t.op===h.Model.MATRIX||t.op===h.Model.ROW||t.op===h.Model.COL){var u={};t.op===h.Model.MATRIX?((0,d.assert)(t.args[0].op===h.Model.ROW),(0,d.assert)(t.args[0].args[0].op===h.Model.COL),t.m=u.m=t.args[0].args.length,t.n=u.n=t.args[0].args[0].args.length,(0,l.forEach)(t.args,(function(t,n){t.m=n+1}))):t.op===h.Model.ROW?(0,l.forEach)(t.args,(function(t,n){t.m=n+1,t.n=void 0})):(0,l.forEach)(t.args,(function(n,i){n.m=t.m,n.n=i+1}));var g=match(p,t);if(0===g.length)return t;var v=matchedTemplate(n,g,t.args.length),y=[],S=getRulesForArgs(v),E=getNodeArgsForTemplate(t,v);return(0,l.forEach)(E,(function(t,n){(y=y.concat(translate(t,[i,S])))[n].m=t.m,y[n].n=t.n})),expand(v,y,u)}var w=match(p,t);if(0===w.length)return t;var A=matchedTemplate(n,w,t.args.length),T=getRulesForArgs(A),R=getNodeArgsForTemplate(t,A),x=[];return(0,l.forEach)(R,(function(t,n){x=x.concat(translate(t,[i,T]))})),expand(A,x)},equals:function equals(t){var u=match(p,t);if(0===u.length)return t;var d=matchedTemplate(n,u,t.args.length),h=getRulesForArgs(d),g=getNodeArgsForTemplate(t,d),v=[];return(0,l.forEach)(g,(function(t,n){v=v.concat(translate(t,[i,h]))})),expand(d,v,t)},paren:function paren(t){var u=match(p,t);if(0===u.length)return t;if(u.length>1){var d=u;0===(u=u.filter((function(n){return n.lbrk===t.lbrk&&n.rbrk===t.rbrk}))).length&&(u=d)}var h=matchedTemplate(n,u,1),g=getRulesForArgs(h),v=getNodeArgsForTemplate(t,h),y=[];return(0,l.forEach)(v,(function(t){y.push(translate(t,[i,g]))})),expand(h,y)}}):((0,d.assert)(!1,"Should not get here. Illformed node."),0)}}function normalizeLiteral(n){var i=new Visitor(t),u=d.Assert.location;n.location&&d.Assert.setLocation(n.location);var l=i.normalizeLiteral(n);return d.Assert.setLocation(u),l}function getRulesForArgs(t,n){return t.rules}function compileRules(t){var n=Object.keys(t),i={};return n.forEach((function(n){var u=JSON.stringify(normalizeLiteral(h.Model.create(n))),l=function compileTemplate(t){var n=void 0;if(t instanceof Array)n=[],t.forEach((function(t){n=n.concat(compileTemplate(t))}));else if("string"==typeof t)n=[{str:t}];else{var i="",u=void 0,l=void 0;t.options?(i+=t.options.EndRoot?" EndRoot":"",i+=t.options.NoParens?" NoParens":"",u=t.value):(u=Object.keys(t)[0],(0,d.assert)("options"!==u),l=compileRules(t[u])),n=[{context:i,str:u,rules:l}]}return n}(t[n]);i[u]||(i[u]=l)})),i}d.Assert.messages,h.Model.fn.translate=function(n){var i=h.Model.option("rules"),u=function translate(n,i){var u=new Visitor(t),l=compileRules(i);return u.translate(n,l)}(normalizeLiteral(n),i);return u&&u.op===h.Model.VAR||(u=newNode(h.Model.VAR,[""])),function trim(t){for(var n=0,i="";n<t.length;n++)switch(t.charAt(n)){case" ":case"\t":case"\n":if(0===i.length||" "===i.charAt(i.length-1))continue;i+=" ";break;default:i+=t.charAt(n)}for(;" "===i.charAt(i.length-1);)i=i.substring(0,i.length-1);for(;-1!==i.lastIndexOf("baseline")&&i.lastIndexOf(" baseline")===i.length-" baseline".length;)i=i.substring(0,i.length-" baseline".length);return i}(u.args[0])};var n=h.Model.option=function option(t,n){var i=h.Model.options,u=i&&i[t];if(void 0!==n&&(h.Model.options=i=i||{},i[t]=n),void 0===u)switch(t){case"field":u="integer";break;case"decimalPlaces":u=10;break;case"setThousandsSeparator":case"setDecimalSeparator":case"dontExpandPowers":case"dontFactorDenominators":case"dontFactorTerms":case"dontConvertDecimalToFraction":case"strict":u=void 0;break;case"types":u={};break;default:u=!1}return u}}(new p.Ast);var v=i.Core=function(){d.Assert.reserveCodeRange(3e3,3999,"core");var t=d.Assert.messages,n=d.Assert.message,i=d.Assert.assert;t[3001]="No Math Core spec provided.",t[3002]="No Math Core solution provided.",t[3003]="No Math Core spec value provided.",t[3004]="Invalid Math Core spec method '%1'.",t[3005]="Operation taking too long.",t[3006]="Invalid option name '%1'.",t[3007]="Invalid option value '%2' for option '%1'.",t[3008]="Internal error: %1";var v=1e3,y=Math.pow(10,-2),S=Math.pow(10,-3),E=Math.pow(10,-6),w=Math.pow(10,-9),A={g:{type:"unit",value:1,base:"g"},s:{type:"unit",value:1,base:"s"},m:{type:"unit",value:1,base:"m"},L:{type:"unit",value:1,base:"L"},kg:{type:"unit",value:v,base:"g"},km:{type:"unit",value:v,base:"m"},ks:{type:"unit",value:v,base:"s"},kL:{type:"unit",value:v,base:"L"},cg:{type:"unit",value:y,base:"g"},cm:{type:"unit",value:y,base:"m"},cs:{type:"unit",value:y,base:"s"},cL:{type:"unit",value:y,base:"L"},mg:{type:"unit",value:S,base:"g"},mm:{type:"unit",value:S,base:"m"},ms:{type:"unit",value:S,base:"s"},mL:{type:"unit",value:S,base:"L"},"\\mug":{type:"unit",value:E,base:"g"},"\\mus":{type:"unit",value:E,base:"s"},"\\mum":{type:"unit",value:E,base:"m"},"\\muL":{type:"unit",value:E,base:"L"},ng:{type:"unit",value:w,base:"g"},nm:{type:"unit",value:w,base:"m"},ns:{type:"unit",value:w,base:"s"},nL:{type:"unit",value:w,base:"L"},in:{type:"unit",value:1/12,base:"ft"},ft:{type:"unit",value:1,base:"ft"},yd:{type:"unit",value:3,base:"ft"},mi:{type:"unit",value:5280,base:"ft"},fl:{type:"unit",value:1,base:"fl"},cup:{type:"unit",value:8,base:"fl"},pt:{type:"unit",value:16,base:"fl"},qt:{type:"unit",value:32,base:"fl"},gal:{type:"unit",value:128,base:"fl"},oz:{type:"unit",value:1/16,base:"lb"},lb:{type:"unit",value:1,base:"lb"},st:{type:"unit",value:1/1614,base:"lb"},qtr:{type:"unit",value:28,base:"lb"},cwt:{type:"unit",value:112,base:"lb"},t:{type:"unit",value:2240,base:"lb"},$:{type:"unit",value:1,base:"$"},i:{type:"unit",value:null,base:"i"},min:{type:"unit",value:60,base:"s"},hr:{type:"unit",value:3600,base:"s"},day:{type:"unit",value:86400,base:"s"},"\\radian":{type:"unit",value:1,base:"radian"},"'":{type:"unit",value:1,base:"prime"},"''":{type:"unit",value:1,base:"doubleprime"},"'''":{type:"unit",value:1,base:"tripleprime"},"\\degree":{type:"unit",value:Math.PI/180,base:"radian"},"\\degree K":{type:"unit",value:1,base:"\\degree K"},"\\degree C":{type:"unit",value:1,base:"\\degree C"},"\\degree F":{type:"unit",value:1,base:"\\degree F"},R:{name:"reals"},matrix:{},pmatrix:{},bmatrix:{},Bmatrix:{},vmatrix:{},Vmatrix:{},array:{},"\\alpha":{type:"var"},"\\beta":{type:"var"},"\\gamma":{type:"var"},"\\delta":{type:"var"},"\\epsilon":{type:"var"},"\\zeta":{type:"var"},"\\eta":{type:"var"},"\\theta":{type:"var"},"\\iota":{type:"var"},"\\kappa":{type:"var"},"\\lambda":{type:"var"},"\\mu":{type:"const",value:E},"\\nu":{type:"var"},"\\xi":{type:"var"},"\\pi":{type:"const",value:Math.PI},"\\rho":{type:"var"},"\\sigma":{type:"var"},"\\tau":{type:"var"},"\\upsilon":{type:"var"},"\\phi":{type:"var"},"\\chi":{type:"var"},"\\psi":{type:"var"},"\\omega":{type:"var"},"\\sin":{type:"var"},"\\cos":{type:"var"},"\\tan":{type:"var"},"\\sec":{type:"var"},"\\csc":{type:"var"},"\\cot":{type:"var"},"\\arcsin":{type:"var"},"\\arccos":{type:"var"},"\\arctan":{type:"var"},"\\arcsec":{type:"var"},"\\arccsc":{type:"var"},"\\arccot":{type:"var"},"\\sinh":{type:"var"},"\\cosh":{type:"var"},"\\tanh":{type:"var"},"\\sech":{type:"var"},"\\csch":{type:"var"},"\\coth":{type:"var"},"\\log":{type:"var"},"\\ln":{type:"var"},"\\lg":{type:"var"}};function validateOptions(t){t&&(0,l.forEach)((0,l.keys)(t),(function(l){!function validateOption(t,l){switch(t){case"field":switch(l){case void 0:case"integer":case"real":case"complex":break;default:i(!1,n(3007,[t,l]))}break;case"decimalPlaces":if(void 0===l||+l>=0&&+l<=20)break;i(!1,n(3007,[t,l]));break;case"NoParens":case"EndRoot":case"allowDecimal":case"allowInterval":case"dontExpandPowers":case"dontFactorDenominators":case"dontFactorTerms":case"dontConvertDecimalToFraction":case"dontSimplifyImaginary":case"ignoreOrder":case"inverseResult":case"requireThousandsSeparator":case"ignoreText":case"ignoreTrailingZeros":case"allowThousandsSeparator":case"compareSides":case"ignoreCoefficientOne":case"strict":if(void 0===l||"boolean"==typeof l)break;i(!1,n(3007,[t,l]));break;case"setThousandsSeparator":if(void 0===l||"string"==typeof l&&1===l.length||l instanceof Array)break;i(!1,n(3007,[t,l]));break;case"setDecimalSeparator":if(void 0===l||"string"==typeof l&&1===l.length||l instanceof Array&&l.length>0&&1===l[0].length)break;i(!1,n(3007,[t,JSON.stringify(l)]));break;case"words":case"rules":case"types":if(void 0===l||"object"===(void 0===l?"undefined":u(l)))break;i(!1,n(3007,[t,l]));break;default:i(!1,n(3006,[t]))}}(l,t[l])}))}return{translate:function translate(t,u,p){t||(t={}),t.rules||(t.words=g.rules.words,t.rules=g.rules.rules,t.types=g.rules.types),function makeEvaluator(t,u){var p=void 0,g=t.method,v=t.value,y=h.Model.options=t.options,S=void 0;try{d.Assert.setLocation("spec"),validateOptions(y),h.Model.pushEnv(A),p=null!=v?h.Model.create(v,"spec"):void 0,h.Model.popEnv()}catch(t){S=t}return{evaluate:function evaluate(t,u){try{if(S)throw S;d.Assert.setLocation("user"),i(null!=t,n(3002)),h.Model.pushEnv(A);var l=h.Model.create(t,"user");i(l,n(3008,["invalid input"])),d.Assert.setLocation("spec");var p=void 0;switch(g){case"translate":p=l.translate();break;default:i(!1,n(3004,[g]))}h.Model.popEnv(),u(null,p)}catch(t){var v=t.message;u({result:null,errorCode:parseErrorCode(v),message:parseMessage(v),stack:t.stack,location:t.location,model:null,toString:function toString(){return this.errorCode+": ("+this.location+") "+this.message+"\n"+this.stack}},"")}},model:p};function parseErrorCode(t){var n=+t.slice(0,(0,l.indexOf)(t,":"));return isNaN(n)?0:n}function parseMessage(t){return parseErrorCode(t)?t.slice((0,l.indexOf)(t,":")+2):t}}({method:"translate",options:t}).evaluate(u,p)},Model:h.Model,Ast:p.Ast}}();"undefined"!=typeof window&&(window.Core=v)},{"./assert.js":1,"./ast.js":2,"./backward.js":3,"./model.js":5,"./rules.js":6,"./version.js":7}],5:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Model=void 0;var u=t("./backward.js"),l=t("./assert.js"),d=t("./ast.js");i.Model=function(){function Model(){}Model.fn={},Model.env=n={};var t=[],n={};function isChemCore(){return!!Model.env.Au}Model.pushEnv=function pushEnv(i){t.push(n),Model.env=n=i},Model.popEnv=function popEnv(){(0,l.assert)(t.length>0,"Empty envStack"),Model.env=n=t.pop()};var i=Model.prototype=new d.Ast;l.Assert.reserveCodeRange(1e3,1999,"model"),l.Assert.messages[1e3]="Internal error. %1.",l.Assert.messages[1001]="Invalid syntax. '%1' expected, '%2' found.",l.Assert.messages[1002]="Only one decimal separator can be specified.",l.Assert.messages[1003]="Extra characters in input at position: %1, lexeme: %2.",l.Assert.messages[1004]="Invalid character '%1' (%2) in input.",l.Assert.messages[1005]="Misplaced thousands separator.",l.Assert.messages[1006]="Invalid syntax. Expression expected, %1 found.",l.Assert.messages[1007]="Unexpected character: '%1' in '%2'.",l.Assert.messages[1008]="The same character '%1' is being used as a thousands and decimal separators.",l.Assert.messages[1009]="Missing argument for '%1' command.",l.Assert.messages[1010]="Expecting an operator between numbers.";var p=l.Assert.message;Model.create=i.create=function create(t,n){if((0,l.assert)(null!=t,"Model.create() called with invalid argument "+t),t instanceof Model)return n&&(t.location=n),t;var d=void 0;if(t instanceof Array)return d=[],(0,u.forEach)(t,(function(t){d.push(create(t,n))})),d;if(!(this instanceof Model))return(new Model).create(t,n);if((d=create(this)).location=n,"string"==typeof t){var p=E(t,Model.env);t=p.expr()}else t=JSON.parse(JSON.stringify(t));return(0,u.forEach)((0,u.keys)(Model.fn),(function(t,n){i.hasOwnProperty(t)||(i[t]=function(){var n=Model.fn[t];if(arguments.length>1&&arguments[1]instanceof Model)return n.apply(this,arguments);for(var i=[this],u=0;u<arguments.length;u++)i.push(arguments[u]);return n.apply(this,i)})})),(0,u.forEach)((0,u.keys)(t),(function(n,i){d[n]=t[n]})),d},i.toLaTex=function toLaTex(t){return render(t)};var h={ADD:"+",SUB:"-",MUL:"mul",TIMES:"times",COEFF:"coeff",DIV:"div",FRAC:"frac",EQL:"=",ATAN2:"atan2",SQRT:"sqrt",VEC:"vec",PM:"pm",NOT:"not",VAR:"var",NUM:"num",CST:"cst",COMMA:",",POW:"^",SUBSCRIPT:"_",ABS:"abs",PAREN:"()",HIGHLIGHT:"hi",LT:"lt",LE:"le",GT:"gt",GE:"ge",NE:"ne",NGTR:"ngtr",NLESS:"nless",NI:"ni",SUBSETEQ:"subseteq",SUPSETEQ:"supseteq",SUBSET:"subset",SUPSET:"supset",NNI:"nni",NSUBSETEQ:"nsubseteq",NSUPSETEQ:"nsupseteq",NSUBSET:"nsubset",NSUPSET:"nsupset",APPROX:"approx",IMPLIES:"implies",CAPRIGHTARROW:"caprightarrow",RIGHTARROW:"rightarrow",LEFTARROW:"leftarrrow",LONGRIGHTARROW:"longrightarrow",LONGLEFTARROW:"longleftarrow",OVERRIGHTARROW:"overrightarrow",OVERLEFTARROW:"overleftarrow",CAPLEFTRIGHTARROW:"capleftrightarrow",LEFTRIGHTARROW:"leftrightarrow",LONGLEFTRIGHTARROW:"longleftrightarrow",OVERLEFTRIGHTARROW:"overleftrightarrow",PERP:"perp",PROPTO:"propto",PARALLEL:"parallel",NPARALLEL:"nparallel",SIM:"sim",CONG:"cong",NSIM:"nsim",NCONG:"ncong",INTERVAL:"interval",LIST:"list",SET:"set",EXISTS:"exists",IN:"in",FORALL:"forall",LIM:"lim",EXP:"exp",TO:"to",SUM:"sum",DERIV:"deriv",PIPE:"pipe",INT:"int",PROD:"prod",CUP:"cup",BIGCUP:"bigcup",CAP:"cap",BIGCAP:"bigcap",PERCENT:"%",QMARK:"?",M:"M",FACT:"fact",BINOM:"binom",ROW:"row",COL:"col",COLON:"colon",MATRIX:"matrix",TYPE:"type",OVERSET:"overset",UNDERSET:"underset",OVERLINE:"overline",DEGREE:"degree",BACKSLASH:"backslash",MATHBF:"mathbf",DOT:"dot",MATHFIELD:"mathfield",NONE:"none"};(0,u.forEach)((0,u.keys)(h),(function(t,n){Model[t]=h[t]}));var g={};function isInvisibleCharCode(t){return function isControlCharCode(t){return t>=1&&t<=31||t>=127&&t<=159}(t)}function isAlphaCharCode(t){return t>=65&&t<=90||t>=97&&t<=122||39===t}function isNumberCharCode(t){return t>=48&&t<=57}g[h.ADD]="+",g[h.SUB]="-",g[h.MUL]="\\times",g[h.DIV]="\\div",g[h.FRAC]="\\frac",g[h.EQL]="=",g[h.ATAN2]="\\atan2",g[h.POW]="^",g[h.SUBSCRIPT]="_",g[h.PM]="\\pm",g[h.NOT]="\\not",g[h.COMMA]=",",g[h.M]="\\M",g[h.BINOM]="\\binom",g[h.COLON]="\\colon",Model.fold=function fold(t,n){var i=[],l=void 0;switch((0,u.forEach)(t.args,(function(t){i.push(fold(t,n))})),t.args=i,t.op){case h.VAR:(l=n[t.args[0]])&&(t=l)}return t};var v=0,y=0,S={};S[47]=h.FRAC,S[256]=h.FRAC,S[257]=h.SQRT,S[290]=h.VEC,S[43]=h.ADD,S[45]=h.SUB,S[258]=h.PM,S[322]=h.NOT,S[94]=h.POW,S[95]=h.SUBSCRIPT,S[42]=h.MUL,S[304]=h.DOT,S[294]=h.DIV,S[61]=h.EQL,S[44]=h.COMMA,S[269]=h.TEXT,S[270]=h.LT,S[271]=h.LE,S[272]=h.GT,S[273]=h.GE,S[301]=h.NE,S[315]=h.NGTR,S[316]=h.NLESS,S[317]=h.NI,S[318]=h.SUBSETEQ,S[319]=h.SUPSETEQ,S[320]=h.SUBSET,S[321]=h.SUPSET,S[302]=h.APPROX,S[313]=h.PERP,S[314]=h.PROPTO,S[323]=h.PARALLEL,S[324]=h.NPARALLEL,S[325]=h.SIM,S[326]=h.CONG,S[338]=h.NSIM,S[339]=h.NCONG,S[274]=h.EXISTS,S[275]=h.IN,S[276]=h.FORALL,S[277]=h.LIM,S[278]=h.EXP,S[279]=h.TO,S[124]=h.PIPE,S[280]=h.SUM,S[281]=h.INT,S[282]=h.PROD,S[309]=h.CUP,S[310]=h.BIGCUP,S[311]=h.CAP,S[312]=h.BIGCAP,S[283]=h.M,S[334]=h.IMPLIES,S[337]=h.CAPRIGHTARROW,S[284]=h.RIGHTARROW,S[327]=h.LEFTARROW,S[328]=h.LONGRIGHTARROW,S[329]=h.LONGLEFTARROW,S[330]=h.OVERRIGHTARROW,S[331]=h.OVERLEFTARROW,S[335]=h.LEFTRIGHTARROW,S[336]=h.CAPLEFTRIGHTARROW,S[332]=h.LONGLEFTRIGHTARROW,S[333]=h.OVERLEFTRIGHTARROW,S[33]=h.FACT,S[285]=h.BINOM,S[286]=h.ROW,S[287]=h.COL,S[58]=h.COLON,S[295]=h.TYPE,S[296]=h.OVERLINE,S[297]=h.OVERSET,S[298]=h.UNDERSET,S[299]=h.BACKSLASH,S[300]=h.MATHBF,S[304]=h.DOT,S[308]=h.MATHFIELD;var E=function parse(t,n){function newNode(t,n){return{op:t,args:n}}function matchThousandsSeparator(t,n){if(Model.option("allowThousandsSeparator")||Model.option("setThousandsSeparator")){var i=Model.option("setThousandsSeparator");return i?t===n||!n&&(0,u.indexOf)(i,t)>=0?t:"":","===t?t:""}return""}function matchDecimalSeparator(t){var n=Model.option("setDecimalSeparator"),i=Model.option("setThousandsSeparator");if("string"==typeof n){(0,l.assert)(1===n.length,p(1002));var d=n;return i instanceof Array&&(0,u.indexOf)(i,d)>=0&&(0,l.assert)(!1,p(1008,[d])),t===d}return n instanceof Array?((0,u.forEach)(n,(function(t){i instanceof Array&&(0,u.indexOf)(i,t)>=0&&(0,l.assert)(!1,p(1008,[t]))})),(0,u.indexOf)(n,t)>=0):i instanceof Array&&(0,u.indexOf)(i,".")>=0?((0,l.assert)(!1,p(1008)),!1):"."===t}function numberNode(t,n,i){var u=Model.option("ignoreTrailingZeros"),d=t.toString(),h="",g=void 0,v=void 0,y=void 0,S=void 0,E=0,w="integer",A=void 0,T=void 0;for("."===t&&(0,l.assert)(!1,p(1004,[t,t.charCodeAt(0)])),g=0;g<d.length;g++)matchThousandsSeparator(v=d.charAt(g))?((E&&y!==g-4||!E&&g>4)&&(0,l.assert)(!1,p(1005)),y=g,E++):(matchDecimalSeparator(v)?("decimal"===w&&(0,l.assert)(!1,p(1007,[v,h+v])),v=".",w="decimal",E&&y!==g-4&&(0,l.assert)(!1,p(1005)),"0"===h&&(A=!0),S=h.length,y=g,E++):"decimal"===w&&"0"!==v&&(S=h.length),h+=v);return"decimal"!==w&&y&&y!==g-4&&(0,l.assert)(!1,p(1005)),void 0!==S&&(S+1<h.length&&(T=!0),u&&"."===(h=h.substring(0,S+1))&&(h="0")),{op:Model.NUM,args:[String(h)],hasThousandsSeparator:0!==E,numberFormat:w,hasLeadingZero:A,hasTrailingZero:T}}function multiplyNode(t,n){return 0===t.length&&(t=[i]),binaryNode(Model.MUL,t,n)}function unaryNode(t,n){return(0,l.assert)(1===n.length,"Wrong number of arguments for unary node"),newNode(t,n)}function binaryNode(t,n,i){if((0,l.assert)(n.length>0,"1000: Too few argument for binary node"),n.length<2)return n[0];var d=[];return(0,u.forEach)(n,(function(n){i&&n.op===t?d=d.concat(n.args):d.push(n)})),newNode(t,d)}t=function stripInvisible(t){for(var n,i,u="",l=0;l<t.length;){for(;l<t.length&&isInvisibleCharCode(n=t.charCodeAt(l++));)32!==i&&(i=n=9);92===n?(u+=String.fromCharCode(n),n=t.charCodeAt(l++)):9===n&&isNumberCharCode(u.charCodeAt(u.length-1))&&isNumberCharCode(t.charCodeAt(l))&&(n=t.charCodeAt(l++)),u+=String.fromCharCode(n)}return u}(t);var i=numberNode("1"),d=unaryNode(Model.SUB,[numberNode("1")]),g=newNode(Model.NONE,[numberNode("0")]),E=newNode(Model.VAR,[""]),w=function scanner(t){var i=0,d="",h={"\\cdot":304,"\\times":42,"\\div":294,"\\dfrac":256,"\\frac":256,"\\sqrt":257,"\\vec":290,"\\pm":258,"\\not":322,"\\left":null,"\\right":null,"\\big":null,"\\Big":null,"\\bigg":null,"\\Bigg":null,"\\ ":null,"\\quad":null,"\\qquad":null,"\\text":269,"\\textrm":269,"\\textit":269,"\\textbf":269,"\\lt":270,"\\le":271,"\\gt":272,"\\ge":273,"\\ne":301,"\\neq":301,"\\ngtr":315,"\\nless":316,"\\ni":317,"\\subseteq":318,"\\supseteq":319,"\\subset":320,"\\supset":321,"\\approx":302,"\\implies":334,"\\Rightarrow":337,"\\rightarrow":284,"\\leftarrow":327,"\\longrightarrow":328,"\\longleftarrow":329,"\\overrightarrow":330,"\\overleftarrow":331,"\\Leftrightarrow":336,"\\leftrightarrow":335,"\\longleftrightarrow":332,"\\overleftrightarrow":333,"\\perp":313,"\\propto":314,"\\parallel":323,"\\nparallel":324,"\\sim":325,"\\cong":326,"\\nsim":338,"\\ncong":339,"\\exists":274,"\\in":275,"\\forall":276,"\\lim":277,"\\exp":278,"\\to":279,"\\sum":280,"\\int":281,"\\prod":282,"\\cup":309,"\\bigcup":310,"\\cap":311,"\\bigcap":312,"\\%":37,"\\binom":285,"\\begin":288,"\\end":289,"\\colon":58,"\\vert":124,"\\lvert":124,"\\rvert":124,"\\mid":124,"\\type":295,"\\overline":296,"\\overset":297,"\\underset":298,"\\backslash":299,"\\mathbf":300,"\\abs":303,"\\dot":304,"\\MathQuillMathField":308,"\\ldots":97,"\\vdots":97,"\\ddots":97},g=(0,u.keys)(n),v=void 0;function number(n){for(;isNumberCharCode(n)||matchDecimalSeparator(String.fromCharCode(n))||(v=matchThousandsSeparator(String.fromCharCode(n),v))&&isNumberCharCode(t.charCodeAt(i));)d+=String.fromCharCode(n),92===(n=t.charCodeAt(i++))&&32===t.charCodeAt(i)&&(n=32,i++);return"."!==d||0!==(0,u.indexOf)(t.substring(i),"overline")&&0!==(0,u.indexOf)(t.substring(i),"dot")||(d="0."),i--,48}function variable(n){var l=String.fromCharCode(n);d+=l;for(var p=function _loop(){var t=String.fromCharCode(n),i=d+t;if(!(0,u.some)(g,(function(t){return 0===(0,u.indexOf)(t,i)})))return"break";d+=t};isAlphaCharCode(n=t.charCodeAt(i++))&&"break"!==p(););return i--,97}function latex(){var n=void 0;if(36===(n=t.charCodeAt(i++)))d=String.fromCharCode(n);else if(37===n)d+=String.fromCharCode(n);else if((0,u.indexOf)([32,58,59,44,33],n)>=0)d="\\ ";else{for(;isAlphaCharCode(n);)d+=String.fromCharCode(n),n=t.charCodeAt(i++);i--}var l=h[d];if(void 0===l)l=97;else if(269===l||295===l){for(n=t.charCodeAt(i++);n&&123!==n;)n=t.charCodeAt(i++);for(d="",n=t.charCodeAt(i++);n&&125!==n;){var p=String.fromCharCode(n);d+=p,n=t.charCodeAt(i++)}295!==l&&(l=!d||Model.option("ignoreText")?null:97)}return l}function prime(n){for((0,l.assert)(39===n),d="'";39===t.charCodeAt(i);)i++,d+="'";return 97}return{start:function start(n){n||(n={});var h=void 0;for(d="";i<t.length;)switch(h=t.charCodeAt(i++)){case 32:case 9:case 10:case 13:continue;case 38:if(0===(0,u.indexOf)(t.substring(i),"nbsp;")){i+=5;continue}return 287;case 92:switch(d+=String.fromCharCode(h),t.charCodeAt(i)){case 92:return i++,286;case 123:case 124:case 125:return t.charCodeAt(i++)}var g=latex();if(null!==g)return g;d="";continue;case 45:if(62===t.charCodeAt(i))return i++,284;case 33:return 61===t.charCodeAt(i)?(i++,301):h;case 37:case 40:case 41:case 42:case 43:case 44:case 47:case 58:case 61:case 63:case 91:case 93:case 94:case 95:case 123:case 124:case 125:return d+=String.fromCharCode(h),h;case 36:return d+=String.fromCharCode(h),97;case 39:return prime(h);case 60:return 61===t.charCodeAt(i)?(i++,271):270;case 62:return 61===t.charCodeAt(i)?(i++,273):272;default:return isAlphaCharCode(h)?variable(h):matchDecimalSeparator(String.fromCharCode(h))||isNumberCharCode(h)?n.oneCharToken?(d+=String.fromCharCode(h),48):number(h):((0,l.assert)(!1,p(1004,[String.fromCharCode(h),h])),0)}return 0},lexeme:function lexeme(){if(d)return d},pos:function pos(){return i}}}(t);function start(t){v=w.start(t)}function hd(){return v}function lexeme(){return w.lexeme()}function next(t){v=y,y=0,0===v&&(v=w.start(t))}function lookahead(t){return 0===y&&(y=w.start(t)),y}function eat(t,n){var i=hd();if(i!==t){var u=String.fromCharCode(t),d=i?String.fromCharCode(i):"EOS";(0,l.assert)(!1,p(1001,[u,d]))}next(n)}function isSimpleFraction(t){if(t.op===Model.FRAC){var n=t.args[0],i=t.args[1];return n.op===Model.NUM&&"integer"===n.numberFormat&&i.op===Model.NUM&&"integer"===i.numberFormat}return!1}function isMinusOne(t){return t.op===Model.SUB&&1===t.args.length&&t.args[0].op===Model.NUM&&1===t.args[0].args.length&&"1"===t.args[0].args[0]}function primaryExpr(){var t,n=void 0,i=void 0,h=void 0,g=void 0,v=void 0;switch(t=hd()){case 65:case 97:h=[lexeme()],next(),n=newNode(Model.VAR,h),isChemCore()&&123===hd()&&125===lookahead()&&(eat(123),eat(125));break;case 48:n=numberNode(lexeme()),next();break;case 295:n=newNode(Model.TYPE,[newNode(Model.VAR,[lexeme()])]),next();break;case 91:case 40:n=function parenExpr(t){var n=void 0,i=void 0;return eat(t),41===hd()||93===hd()?(eat(40===t?41:93),n=newNode(Model.COMMA,[])):(n=commaExpr(),eat(i=41===hd()?41:93)),(2!==n.args.length||40!==t&&91!==t||41!==i&&93!==i)&&40!==t&&91!==t||(n=newNode(Model.PAREN,[n])),n.lbrk=t,n.rbrk=i,n}(t);break;case 123:n=braceExpr();break;case 288:next();var y=braceExpr(),w=function matrixExpr(){var t=[];for(t.push(rowExpr());286===hd();)next(),t.push(rowExpr());return newNode(S[286],t)}();eat(289),braceExpr(),(0,u.indexOf)(y.args[0],"matrix")>=0?n=newNode(Model.MATRIX,[w]):(0,l.assert)(!1,"Unrecognized LaTeX name");break;case 124:n=function absExpr(){eat(124);var t=additiveExpr();return eat(124),unaryNode(Model.ABS,[t])}();break;case 303:next(),n=unaryNode(Model.ABS,[braceExpr()]);break;case 256:next(),g=braceExpr(),v=braceExpr(),(n=newNode(Model.FRAC,[g,v])).isFraction=isSimpleFraction(n);break;case 285:next();var A=braceExpr(),T=braceExpr(),R=unaryNode(Model.FACT,[A]),x=binaryNode(Model.POW,[binaryNode(Model.MUL,[unaryNode(Model.FACT,[T]),unaryNode(Model.FACT,[binaryNode(Model.ADD,[A,negate(T)])])]),d]);(n=binaryNode(Model.MUL,[R,x])).isBinomial=!0;break;case 257:switch(next(),hd()){case 91:var C=function bracketExpr(){eat(91);var t=commaExpr();return eat(93),t}();i=braceExpr(),n=newNode(Model.SQRT,[i,C]);break;case 123:i=braceExpr(),n=newNode(Model.SQRT,[i,newNode(Model.NUM,["2"])]);break;default:(0,l.assert)(!1,p(1001,["{ or (",String.fromCharCode(hd())]))}break;case 290:next();var I=braceExpr();n=newNode(Model.VEC,[I]);break;case 277:return next(),h=[],95===hd()&&(eat(95),h.push(primaryExpr()),h.push(primaryExpr())),newNode(S[t],h);case 280:case 281:case 282:case 309:case 310:case 311:case 312:return next(),h=[],95===hd()&&(next({oneCharToken:!0}),h.push(primaryExpr()),94===hd()&&(eat(94,{oneCharToken:!0}),h.push(primaryExpr()))),hd()&&h.push(commaExpr()),newNode(S[t],h);case 274:return next(),newNode(Model.EXISTS,[equalExpr()]);case 276:case 337:case 284:case 327:case 328:case 329:case 330:case 331:case 336:case 335:case 332:case 333:return next(),newNode(S[t],[commaExpr()]);case 278:return next(),newNode(Model.EXP,[additiveExpr()]);case 283:return next(),newNode(Model.M,[multiplicativeExpr()]);case 296:case 304:case 308:return next(),newNode(S[t],[braceExpr()]);case 297:case 298:return next(),g=braceExpr(),v=braceExpr(),newNode(S[t],[g,v]);case 300:return next(),g=braceExpr(),newNode(Model.MATHBF,[g]);case 63:return next(),newNode(Model.VAR,["?"]);default:(0,l.assert)(!Model.option("strict"),p(1006,[S[t]])),n=E}return n}function rowExpr(){var t=[];for(t.push(equalExpr());287===hd();)next(),t.push(equalExpr());return newNode(S[287],t)}function braceExpr(){var t=void 0;return eat(123),125===hd()?(eat(125),t=E):(t=commaExpr(),eat(125)),t.lbrk=123,t.rbrk=125,t}function exponentialExpr(){for(var t=[primaryExpr()];94===hd();){next({oneCharToken:!0});var n=void 0;if(!isMathSymbol(t[0])&&!isChemCore()||43!==(n=hd())&&45!==n){var l=unaryExpr();l.op===Model.VAR&&"\\circ"===l.args[0]?(97===hd()&&"K"===lexeme()||"C"===lexeme()||"F"===lexeme()?(l=multiplyNode([t.pop(),unaryNode(Model.VAR,["\\degree "+lexeme()])]),next()):l=multiplyNode([t.pop(),unaryNode(Model.VAR,["\\degree"])]),t.push(l)):t.push(l)}else next(),t.push(unaryNode(S[n],[i]))}if(t.length>1){var d=t.pop();return(0,u.forEach)(t.reverse(),(function(t){d=newNode(Model.POW,[t,d])})),d}return t[0]}function postfixExpr(){var t,n=exponentialExpr();switch(t=hd()){case 37:next(),n=newNode(Model.PERCENT,[n]);break;case 33:next(),n=newNode(Model.FACT,[n]);break;default:if(97===t&&"\\degree"===lexeme())next(),97!==hd()||"K"!==lexeme()&&"C"!==lexeme()&&"F"!==lexeme()?n=multiplyNode([n,unaryNode(Model.VAR,["\\degree"])]):(n=multiplyNode([n,unaryNode(Model.VAR,["\\degree "+lexeme()])]),next());else if(124===t&&95===lookahead()){next();var i=[n];next({oneCharToken:!0}),i.push(newNode(Model.SUBSCRIPT,[equalExpr()])),n=newNode(Model.PIPE,i)}else!isChemCore()||43!==t&&45!==t||125!==lookahead()||(next(),n=unaryNode(S[t],[n]))}return n}function unaryExpr(){var t=void 0,n=void 0,u=void 0;switch(t=hd()){case 43:case 322:case 45:next(),n=newNode(S[t],[unaryExpr()]);break;case 95:if(u=S[t],next({oneCharToken:!0}),43===(t=hd())||45===t?(next(),n=i):n=unaryExpr(),n=newNode(u,[n]),94===(t=hd())){var l=[n];u=S[t],next({oneCharToken:!0}),43===(t=hd())||45===t?(next(),n=i):n=unaryExpr(),l.push(n),n=newNode(u,l)}break;case 94:u=S[t],next({oneCharToken:!0}),43===(t=hd())||45===t?(next(),n=i):n=unaryExpr(),n=newNode(u,[n]);break;default:97===t&&"$"===lexeme()?(next(),hd()?(n=multiplyNode([newNode(Model.VAR,["$"]),postfixExpr()])).args[1].isPolynomial=!0:n=newNode(Model.VAR,["$"])):n=postfixExpr()}return n}function subscriptExpr(){var t=[unaryExpr()];return 95===hd()&&(next({oneCharToken:!0}),t.push(exponentialExpr()),isChemCore()&&123===hd()&&(eat(123),eat(125))),t.length>1?newNode(Model.SUBSCRIPT,t):t[0]}function fractionExpr(){for(var t=void 0,n=subscriptExpr();47===(t=hd())||58===t;)next(),(n=newNode(S[t],[n,subscriptExpr()])).isFraction=isSimpleFraction(n);return n}function isMathSymbol(t){if(t.op!==Model.VAR)return!1;var n=Model.env[t.args[0]];return!(!n||!n.name)}function isVar(t,n){return(0,l.assert)(void 0===n||"string"==typeof n,"Internal error in 'isVar()'"),t.op===Model.VAR&&(void 0===n||t.args[0]===n)}function isOne(t){return t.op===Model.NUM&&"1"===t.args[0]}function isMinusOne(t){return t.op===Model.SUB&&1===t.args.length&&isOne(t.args[0])}function isDerivative(t){if(t.op===Model.FRAC){var n=t.args[0],i=n.op===Model.MUL&&n.args[0].op===Model.VAR&&n.args[0].args[0]||n.op===Model.VAR&&n.args[0],u=t.args[1],l=u.op===Model.MUL&&u.args[0].op===Model.VAR&&u.args[0].args[0];return"d"===i&&"d"===l&&u.args[1].op===Model.VAR||void 0}}function derivativeExpr(t){if(t.op===Model.FRAC){var n=t.args[0],u=t.args[1],d=n.op===Model.MUL&&n.args.slice(1).length>0&&multiplyNode(n.args.slice(1))||i;return(0,l.assert)(2===u.args.length),newNode(Model.DERIV,[u.args[1],d])}}function multiplicativeExpr(){var t,n,i=!1,u=[];isDerivative(t=fractionExpr())&&(t=derivativeExpr(t)),u=t.op!==Model.MUL||t.isBinomial||t.args[t.args.length-1].op===Model.VAR||"\\degree"!==t.args[t.args.length-1].args[0]?[t]:t.args;for(var h,g=0;(v=hd())&&!isAdditive(v)&&!isRelational(v)&&!isImplies(v)&&44!==v&&!isEquality(v)&&125!==v&&41!==v&&93!==v&&284!==v&&337!==v&&270!==v&&124!==v&&286!==v&&287!==v&&289!==v;){if(i=!1,isMultiplicative(v)&&(next(),i=!0),isDerivative(t=fractionExpr())&&(t=derivativeExpr(t)),294!==v&&304!==v||(t=newNode(S[v],[u.pop(),t])),(0,l.assert)(i||0===u.length||t.lbrk||u[u.length-1].op!==Model.NUM||u[u.length-1].lbrk||isRepeatingDecimal([u[u.length-1],t])||t.op!==Model.NUM,p(1010)),isChemCore()&&40===v&&isVar(u[u.length-1],"M"))u.pop(),t=unaryNode(Model.M,[t]);else if(i)42===v&&u.length>0&&isScientific([u[u.length-1],t])&&(isNeg(v=u.pop())&&(t=binaryNode(Model.MUL,[d,t])),(t=binaryNode(Model.MUL,[v,t])).isScientific=!0);else if(u.length>0&&isMixedFraction(u[u.length-1],t))v=u.pop(),(t=binaryNode(Model.ADD,[v,t])).isMixedFraction=!0;else if(Model.option("ignoreCoefficientOne")&&1===u.length&&(isOne(h=u[0])||isMinusOne(h))&&isPolynomialTerm(u[0],t))isOne(u[0])?u.pop():t=negate(t);else if(u.length>0&&(n=isRepeatingDecimal([u[u.length-1],t])))u.pop(),t=n;else if(t.op===Model.VAR&&0===t.args[0].indexOf("'")){var v=u.pop();(t=binaryNode(Model.MUL,[v,t])).isImplicit=!0}else if(!isChemCore()&&isPolynomialTerm(u[u.length-1],t))t.isPolynomial=!0,(v=u.pop()).isPolynomial?u.push(v):((t=binaryNode(Model.MUL,[v,t])).isImplicit=v.isImplicit,v.isImplicit=void 0);else if(u[u.length-1].op===Model.DERIV){var y=u[u.length-1].args[1];t=newNode(Model.DERIV,[u[u.length-1].args[0],multiplyNode([y,t])]),u.pop()}else t.isImplicit=!0;t.op!==Model.MUL||t.isScientific||t.isBinomial||!u.length||u[u.length-1].isImplicit||u[u.length-1].isPolynomial||!t.isImplicit||!t.isPolynomial?u.push(t):u=u.concat(t.args),(0,l.assert)(g++<1e3,p(1e3,["Stuck in loop in mutliplicativeExpr()"]))}return u.length>1?binaryNode(Model.MUL,u):u[0];function isMultiplicative(t){return 42===t||294===t||47===t||304===t}}function isMixedFraction(t,n){return t.op===Model.SUB&&1===t.args.length&&(t=t.args[0]),!(t.lbrk||n.lbrk||t.op!==Model.NUM||!isSimpleFraction(n))}function isPolynomialTerm(t,n){return t.op===Model.SUB&&1===t.args.length&&(t=t.args[0]),!(t.lbrk||n.lbrk||!(t.op===Model.NUM&&isVar(n)||isVar(t)&&n.op===Model.NUM||t.op===Model.NUM&&n.op===Model.NUM||isVar(t)&&isVar(n)||t.op===Model.MUL&&t.args[t.args.length-1].isPolynomial&&(isVar(n)||n.op===Model.NUM)))}function isRepeatingDecimal(t){var n=void 0,i=void 0,u=void 0;if(!t[0].lbrk&&(t[0].op===Model.NUM&&"decimal"===t[0].numberFormat||t[0].op===Model.VAR&&"?"===t[0].args[0]||t[0].op===Model.TYPE&&t[0].args[0].op===Model.VAR&&"decimal"===t[0].args[0].args[0])){if(40===t[1].lbrk&&(function isInteger(t){var n=void 0;return n=t.op===Model.NUM?t.args[0]:t,!isNaN(parseInt(n))}(t[1])||t[1].op===Model.TYPE&&t[1].args[0].op===Model.VAR&&"integer"===t[1].args[0].args[0]))i=t[0],u=t[1];else if(t[1].lbrk||t[1].op!==Model.OVERLINE){if(t[1].lbrk||t[1].op!==Model.DOT)return null;i=t[0],u=t[1]}else i=t[0],(u=t[1]).args[0].op===Model.NUM&&(u.args[0].args[0]=u.args[0].args[0].split("").join(" "));u.isRepeating=!0,(n=binaryNode(Model.ADD,[i,u])).numberFormat="decimal",n.isRepeating=!0}else n=null;return n}function isScientific(t){if(1===t.length)return t[0].op===Model.NUM&&(1===t[0].args[0].length||1===(0,u.indexOf)(t[0].args[0],"."))||t[0].op===Model.POW&&t[0].args[0].op===Model.NUM&&"10"===t[0].args[0].args[0]&&"integer"===t[0].args[1].numberFormat;if(2===t.length){var n=t[0],i=t[1];return n.op===Model.NUM&&(1===n.args[0].length||1===(0,u.indexOf)(n.args[0],"."))&&i.op===Model.POW&&i.args[0].op===Model.NUM&&"10"===i.args[0].args[0]&&"integer"===i.args[1].numberFormat}}function isNeg(t){return"number"==typeof t?t<0:1===t.args.length?t.op===h.SUB&&t.args[0].args[0]>0||t.op===Model.NUM&&+t.args[0]<0:2===t.args.length?t.op===h.MUL&&isNeg(t.args[0]):void 0}function negate(t){if("number"==typeof t)return-t;if(t.op===Model.MUL){var n=t.args.slice(0);return multiplyNode([negate(n.shift())].concat(n))}return t.op===Model.POW&&isMinusOne(t.args[1])?binaryNode(Model.POW,[negate(t.args[0]),d]):unaryNode(Model.SUB,[t])}function isAdditive(t){return 43===t||45===t||258===t||299===t}function additiveExpr(){for(var t=multiplicativeExpr(),n=void 0;isAdditive(n=hd());){next();var i=multiplicativeExpr();switch(n){case 299:t=binaryNode(Model.BACKSLASH,[t,i]);break;case 258:t=binaryNode(Model.PM,[t,i]);break;case 45:t=binaryNode(Model.SUB,[t,i]);break;default:t=binaryNode(Model.ADD,[t,i])}}return t}function isRelational(t){return 270===t||271===t||272===t||273===t||275===t||279===t||313===t||314===t||315===t||316===t||317===t||322===t||318===t||319===t||320===t||321===t||323===t||324===t||325===t||338===t||326===t||339===t}function isEquality(t){return 61===t||301===t||302===t}function equalExpr(){for(var t=function relationalExpr(){for(var t=hd(),n=additiveExpr(),i=[],u=!1;isRelational(t=hd());)if(next(),322!==t){var l=additiveExpr();n=newNode(S[t],[n,l]),u&&(n.op="n"+n.op,u=!1),i.push(n),n=Model.create(l)}else u=!0;return n=0===i.length?n:1===i.length?i[0]:newNode(Model.COMMA,i)}(),n=void 0;isEquality(n=hd());){next();var i=additiveExpr();t=newNode(S[n],[t,i])}return t}function isImplies(t){return 334===t||284===t||337===t||327===t||328===t||329===t||330===t||331===t||336===t||335===t||332===t||333===t||124===t}function impliesExpr(){for(var t=equalExpr(),n=void 0;isImplies(n=hd());){next();var i=equalExpr();t=newNode(S[n],[t,i])}return t}function commaExpr(){for(var t=impliesExpr(),n=[t];44===hd();)next(),n.push(impliesExpr());return n.length>1&&(t=newNode(S[44],n)),t}return{expr:function expr(){if(start(),hd()){var t=commaExpr();return 123===t.lbrk&&125===t.rbrk&&(t=newNode(Model.SET,[t])),(0,l.assert)(!hd(),p(1003,[w.pos(),w.lexeme()])),t}return g},tokenize:function tokenize(){var t=[];for(start();hd();){var n=lexeme();t.push(newNode(hd(),n?[n]:[])),next()}return newNode(Model.COMMA,t)}}};return Model}()},{"./assert.js":1,"./ast.js":2,"./backward.js":3}],6:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.rules={words:{a:"A",A:"cap A",B:"cap b",C:"cap c",D:"cap d",E:"cap e",F:"cap f",G:"cap g",H:"cap h",I:"cap i",J:"cap j",K:"cap k",L:"cap l",M:"cap m",N:"cap n",O:"cap o",P:"cap p",Q:"cap q",R:"cap r",S:"cap s",T:"cap t",U:"cap u",V:"cap v",W:"cap w",X:"cap x",Y:"cap y",Z:"cap z","\\varepsilon":"epsilon","\\Alpha":"cap alpha","\\Beta":"cap beta","\\Gamma":"cap gamma","\\Delta":"cap delta","\\Epsilon":"cap epsilon","\\Zeta":"cap zeta","\\Eta":"cap eta","\\Theta":"cap theta","\\Iota":"cap iota","\\Kappa":"cap kappa","\\Lambda":"cap lambda","\\Mu":"cap mu","\\Nu":"cap nu ","\\Xi":"cap xi","\\Omicron":"cap omicron","\\Pi":"cap pi","\\Rho":"cap rho","\\Sigma":"cap sigma","\\Tau":"cap tau","\\Upsilon":"cap upsilon","\\Phi":"cap phi","\\Chi":"cap chi","\\Psi":"cap psi","\\Omega":"cap omega","\\ldots":"dot dot dot","\\vdots":"vertical dot dot dot","\\ddots":"diagonal dot dot dot","\\infty":"infinity","\\measuredangle":"measure of angle","m\\angle":"measure of angle","\\sin":"sine","\\cos":"cosine","\\tan":"tangent","\\csc":"cosecant","\\sec":"secant","\\cot":"cotangent","\\sinh":"hyperbolic sine","\\cosh":"hyperbolic cosine","\\tanh":"hyperbolic tangent","\\csch":"hyperbolic cosecant","\\sech":"hyperbolic secant","\\coth":"hyperbolic cotangent","'''":"triple prime","''":"double prime","'":"prime","\\notin":"is not in","\\mathbb":"bold","\\backslash":"backslash","\\emptyset":"empty set","\\circledot":"circle","\\longleftarrow":"long left arrow","\\leftrightarrow":"left right row","\\Leftrightarrow":"implies","\\longleftrightarrow":"long left right arrow","\\overleftrightarrow":"over left right arrow","\\overrightarrow":"over right arrow","\\overleftarrow":"over left arrow","\\leftarrow":"left arrow","\\addmatrixcol":"add matrix columns","\\addmatrixrow":"add matrix rows"},types:{functionName:["f","g","h","F","G","H","\\ln","\\lg","\\log","\\sin","\\cos","\\tan","\\csc","\\sec","\\cot","\\sinh","\\cosh","\\tanh","\\csch","\\sech","\\coth"],numberPosNeg:["\\type{number}","-\\type{number}"],numberOrLetter:["\\type{numberPosNeg}","\\type{variable}"],matrix:["\\begin{bmatrix}?&?&?\\end{bmatrix}"],functionComposition:["(\\type{functionName}+\\type{functionName})","(\\type{functionName}-\\type{functionName})","(\\type{functionName}\\cdot\\type{functionName})","(\\frac{\\type{functionName}}{\\type{functionName}})"],function:["\\type{function}^{?}","\\type{function}_{?}","\\type{functionComposition}","\\type{functionName}"],functionCall:["\\type{function}(?)","\\type{function}[?]","\\type{variable}(\\type{number})","\\type{variable}(\\type{variable})","\\type{variable}(?,?)","\\type{variable}[\\type{number}]","\\type{variable}[\\type{variable}]","\\type{variable}[?,?]"],commonFraction:["\\frac{\\type{integer}}{2}","\\frac{\\type{integer}}{3}","\\frac{\\type{integer}}{4}","\\frac{\\type{integer}}{5}","\\frac{\\type{integer}}{6}","\\frac{\\type{integer}}{7}","\\frac{\\type{integer}}{8}","\\frac{\\type{integer}}{9}","\\frac{\\type{integer}}{10}"],simpleExpression:["\\type{numberOrLetter}","\\type{commonFraction}","\\type{function}(?)","\\type{function}[?]","\\type{number}","-\\type{variable}","\\type{variable}","\\type{number}\\degrees","\\type{variable}\\degrees","\\type{variable}","\\type{variable}\\type{variable}","\\type{number}\\type{variable}"],simpleFractionPart:["-\\type{commonFraction}","\\type{simpleExpression}","\\type{commonFraction}"],simpleFractionExtended:["\\frac{\\type{simpleFractionPart}}{\\type{simpleFractionPart}}"],simpleNumericExponent:["\\type{number}","\\type{commonFraction}"],simpleExponent:["\\type{simpleNumericExponent}","\\type{variable}"]},rules:{"\\type{decimal}\\overline{\\type{integer}}":[{"%1 repeating %2":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"\\type{decimal}(\\type{integer})":[{"%1 repeating %2":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"\\overline{?}":["line segment %1"],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}' \\type{numberOrLetter}''":[{"%1 %2 %3":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","-?\\degree":"negative %1 degrees","1'":"%1 minute","?'":"%1 minutes","1''":"%1 second","?''":"%1 seconds"}}],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}'":[{"%1 %2":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","1'":"%1 minute","?'":"%1 minutes"}}],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}''":[{"%1 %2":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","1''":"%1 second","?''":"%1 seconds"}}],"\\type{numberOrLetter}\\degree":[{"%1":{1:"1 degree","?":"%1 degrees"}}],"?\\degree":["%1 degrees"],"\\type{numberPosNeg}' \\type{numberPosNeg}''":[{"%1 %2":{"1'":"1 foot","?'":"%1 feet","1''":"1 inch","?''":"%1 inches"}}],"\\type{numberPosNeg}''":["%1 inches"],"\\type{numberPosNeg}'":["%1 feet"],"?^\\prime":["%1 prime"],"?'''":["%1 triple prime"],"?''":["%1 double prime"],"?'":["%1 prime"],"\\log\\type{simpleExpression}":["log %2"],"\\log ?":["the log of %2"],"\\log_{?} \\type{simpleExpression}":[{"the log base %1 of %2":{"\\log_{?}":"%2"}}],"\\ln\\type{simpleExpression}":["natural log %2"],"\\ln ?":["the natural log of %2"],"{?}":[{"start set %1 end set":{"?:?":"%1 such that %2","?|?":"%1 such that %2"}}],"?|_?":[{"%1 evaluated at %2":{"?^?":"%2 minus the same expression evaluated at %1"}}],"?|?":["%1 divides %2"],"\\type{simpleSmallRowMatrix}":[{"the 1 by %N row matrix %1":{"\\type{row}":"%1","\\type{column}":"%*"}}],"\\type{smallRowMatrix}":[{"the 1 by %N row matrix %1":{"\\type{row}":"%1","\\type{column}":"column %N %*"}}],"\\type{simpleSmallColumnMatrix}":[{"the %M by 1 column matrix %1":{"\\type{row}":"%*","\\type{column}":"%1"}}],"\\type{smallColumnMatrix}":[{"the %M by 1 column matrix %1":{"\\type{row}":"row %M %*","\\type{column}":"%1"}}],"\\type{simpleSmallMatrix}":[{"the %M by %N matrix %1":{"\\type{row}":"row %M, %*","\\type{column}":"%*"}}],"\\type{matrix}":[{"the %M by %N matrix, %1":{"\\type{row}":"row %M, %*","\\type{column}":"column %N, %*"}}],"\\sum_?^??":[{"the sum from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum_?^?":[{"the sum from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum_? ?":[{"the sum over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum ?":["the sum of %1"],"\\sum":["the sum"],"\\prod_?^??":[{"the product from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod_?^?":[{"the product from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod_? ?":[{"the product over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod ?":["the product of %1"],"\\prod":["the product"],"\\int_?^??":[{"the integral from %1 to %2 of %3":{"?=?":"%1 is equal to %2","?dx":"%1"}}],"\\int_?^?":[{"the integral from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\int_? ?":[{"the integral over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\int ?":["the integral of %1"],"\\int":["the integral"],"? \\cup ?":[{"the union of %1 and %2":{"?":"%1"}}],"\\cup_?^??":[{"the union from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup_?^?":[{"the union from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup_? ?":[{"the union over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup ?":["the union of %1"],"\\cup":["the union"],"\\bigcup_?^??":[{"the union from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup_?^?":[{"the union from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup_? ?":[{"the union over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup ?":["the union of %1"],"\\bigcup":["the union"],"? \\cap ?":[{"the intersection of %1 and %2":{"?":"%1"}}],"\\cap_?^??":[{"the intersection from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap_?^?":[{"the intersection from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap_? ?":[{"the intersection over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap ?":["the intersection of %1"],"\\cap":["the intersection"],"\\bigcap_?^??":[{"the intersection from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap_?^?":[{"the intersection from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap_? ?":[{"the intersection over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap ?":["the intersection of %1"],"\\bigcap":["the intersection"],"? \\text{and} ?":["%1 %2"],"?m/s":[{"%1 per second":{1:"1 meter","?":"%1 meters"}}],"?ft/s":[{"%1 per second":{1:"1 foot","?":"%1 feet"}}],"?mi/hr":[{"%1 per hour":{1:"1 mile","?":"%1 miles"}}],"?mi/h":[{"%1 per hour":{1:"1 mile","?":"%1 miles"}}],"?km/hr":[{"%1 per hour":{1:"1 kilometer","?":"%1 kilometers"}}],"?km/h":[{"%1 per hour":{1:"1 kilometer","?":"%1 kilometers"}}],"1hr":["1 hour"],"?hr":["%1 hours"],"1L":["1 liter"],"?L":["%1 liters"],"1kg":["1 kilogram"],"?kg":["%1 kilograms"],"1ks":["1 kilosecond"],"?ks":["%1 kiloseconds"],"1km":["1 kilometer"],"?km":["%1 kilometers"],"1kL":["1 kiloliter"],"?kL":["%1 kiloliters"],"1cg":["1 centigram"],"?cg":["%1 centigrams"],"1cs":["1 centisecond"],"?cs":["%1 centiseconds"],"1cm":["1 centimeter"],"?cm":["%1 centimeters"],"1cL":["1 centiliter"],"?cL":["%1 centiliters"],"1mg":["1 milligram"],"?mg":["%1 milligrams"],"1ms":["1 millisecond"],"?ms":["%1 milliseconds"],"1mm":["1 millimeter"],"?mm":["%1 millimeters"],"1mL":["1 milliliter"],"?mL":["%1 milliliters"],"1\\mug":["1 microgram"],"?\\mug":["%1 micrograms"],"1\\mus":["1 microsecond"],"?\\mus":["%1 microseconds"],"1\\mum":["1 micrometer"],"?\\mum":["%1 micrometers"],"1\\muL":["1 microliter"],"?\\muL":["%1 microliters"],"1ng":["1 nanogram"],"?ng":["%1 nanograms"],"1ns":["1 nanosecond"],"?ns":["%1 nanoseconds"],"1nm":["1 nanometer"],"?nm":["%1 nanometers"],"1nL":["1 nanoliter"],"?nL":["%1 nanoliters"],"1lb":["1 pound"],"?lb":["%1 pounds"],"1in":["1 inch"],"?in":["%1 inches"],"1ft":["1 foot"],"?ft":["%1 feet"],"1mi":["1 mile"],"?mi":["%1 miles"],"1cup":["1 cup"],"?cup":["%1 cups"],"1pt":["1 pint"],"?pt":["%1 pints"],"1qt":["1 quart"],"?qt":["%1 quarts"],"1gal":["1 gallon"],"?gal":["%1 gallons"],"1oz":["1 ounce"],"?oz":["%1 ounces"],"\\mathbb{R}":["the real numbers"],"\\mathbb{C}":["the complex numbers"],"\\mathbb{Z}":["the integers"],"\\mathbb{Q}":["the rational numbers"],"\\mathbb{N}":["the natural numbers"],"\\mathbb{Z}^+":["the positive integers"],"\\mathbb{?}^?":[{"%2":{"\\type{integer}":"%1",R:"r",C:"c",Z:"z",Q:"q",N:"n","?^?":"%1 %2"}}],"\\mathbb{?}^3":["%1 three "],"\\mathbb{?}^n":["%1 n"],"\\mathbb{?}^\\infty":["%1 infinty"],"m\\angle":["measure of angle"],"\\Delta":["triangle"],"$?":["%2 dollars"],"?, ?":["%1 comma %2"],"\\type{commonFraction}":[{"%%":{"\\frac{1}{2}":"1 half","\\frac{\\type{integer}}{2}":"%1 halves","\\frac{1}{3}":"1 third","\\frac{\\type{integer}}{3}":"%1 thirds","\\frac{1}{4}":"1 fourth","\\frac{\\type{integer}}{4}":"%1 fourths","\\frac{1}{5}":"1 fifth","\\frac{\\type{integer}}{5}":"%1 fifths","\\frac{1}{6}":"1 sixth","\\frac{\\type{integer}}{6}":"%1 sixths","\\frac{1}{7}":"1 seventh","\\frac{\\type{integer}}{7}":"%1 sevenths","\\frac{1}{8}":"1 eighth","\\frac{\\type{integer}}{8}":"%1 eighths","\\frac{1}{9}":"1 ninth","\\frac{\\type{integer}}{9}":"%1 ninths","\\frac{1}{10}":"1 tenth","\\frac{\\type{integer}}{10}":"%1 tenths"}}],"\\type{simpleFractionExtended}":["%1 over %2"],"\\frac{?}{?}":["the fraction with numerator %1 and denominator %2"],"\\type{function}(?)":["%1 of %2"],"\\type{function}[?]":["%1 of %2"],"\\sin ?":["sine %2"],"\\cos{?}":["cosine %2"],"\\tan{?}":["tangent %2"],"\\csc{?}":["cosecant %2"],"\\sec{?}":["secant %2"],"\\cot{?}":["cotangent %2"],"\\sin^{-1}{?}":["inverse sine %2"],"\\cos^{-1}{?}":["inverse cosine %2"],"\\tan^{-1}{?}":["inverse tangent %2"],"\\csc^{-1}{?}":["inverse cosecant %2"],"\\sec^{-1}{?}":["inverse secant %2"],"\\cot^{-1}{?}":["inverse cotangent %2"],"\\sinh^{-1}{?}":["inverse hyperbolic sine %2"],"\\cosh^{-1}{?}":["inverse hyperbolic cosine %2"],"\\tanh^{-1}{?}":["inverse hyperbolic tangent %2"],"\\csch^{-1}{?}":["inverse hyperbolic cosecant %2"],"\\sech^{-1}{?}":["inverse hyperbolic secant %2"],"\\coth^{-1}{?}":["inverse hyperbolic cotangent %2"],"?^{-1}":["%1 inverse"],"?^{0}":["%1 to the 0 power"],"?^{2}":["%1 squared"],"?^{3}":["%1 cubed"],"\\type{function}^{\\type{integer}}":["%2th power of %1"],"?^\\type{integer}":["%1 to the %2th power"],"?^\\type{variable}":["%1 to the %2th power"],"?^{-\\type{integer}}":["%1 to the %2 power"],"?^{\\type{decimal}}":[{"%1 raised to the %2 power":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"?^{\\type{simpleExponent}}^{2}":["%1 raised to the %2 power"],"?^{\\type{simpleExponent}}^{3}":["%1 raised to the %2 power"],"?^{\\type{simpleNumericExponent}\\type{variable}}^{2}":["%1 raised to the %2 power"],"?^{\\type{simpleNumericExponent}\\type{variable}}^{3}":["%1 raised to the %2 power"],"?^?^?":["%1 raised to the exponent %2 end exponent"],"?^?":["%1 raised to the %2 power"],"\\sqrt{\\type{simpleExpression}}":[{options:{EndRoot:!0},value:"square root of %1 end root"},"square root of %1"],"\\sqrt[3]{\\type{simpleExpression}}":["cube root of %1"],"\\sqrt[\\type{integer}]{\\type{simpleExpression}}":["%2th root of %1"],"\\sqrt{?}":["square root of %1 end root"],"\\sqrt[3]{?}":[{options:{EndRoot:!0},value:"cube root of %1 end root"},"cube root of %1"],"\\sqrt[\\type{integer}]{?}":[{options:{EndRoot:!0},value:"%2th root of %1 end root"},"%2th root of %1"],"\\sqrt[?]{?}":[{options:{EndRoot:!0},value:"%2th root of %1 end root"},"%2th root of %1"],"\\mathbf{?}":["bold math font %1"],"\\mathbf{}":["bold math font"],"\\underset{?}{?}":["%1 set under %2"],"\\overset{?}{?}":["%1 set over %2"],"-?":["negative %1"],"+?":["plus %1"],"? \\cong ?":["%1 is congruent to %2"],"? \\ncong ?":["%1 is not congruent to %2"],"? \\parallel ?":["%1 is parallel to %2"],"? \\nparallel ?":["%1 is not parallel to %2"],"? \\sim ?":["%1 approximates %2"],"? \\nsim ?":["%1 does not approximate %2"],"? \\to ?":["%1 to %2"],"\\partial":["partial derivative"],"\\lim_?":["limit %1"],"\\lim_??":["limit %1 of %2"],"\\lim":["limit"],"\\type{mixedFraction}":["%1 and %2"],"\\type{scientific}":["%1 times %2"],"\\type{fraction}":["%1 over %2"],"\\type{integer}":["%1"],"\\type{decimal}":["%IP point %FP"],"\\type{number}":["%1"],"?(?)":["%1 times %2"],"(?)?":["%1 times %2"],"(?)(?)":["%1 times %2"],"? \\not\\in ?":["%1 is not in %2"],"? \\not\\ni ?":["%1 does not contain %2"],"? \\not\\subseteq ?":["%1 is not a subset of %2"],"? \\not\\subset ?":["%1 is not a strict subset of %2"],"? \\not\\supseteq ?":["%1 is not a superset of %2"],"? \\not\\supset ?":["%1 is not a strict superset of %2"],"? \\in ?":["%1 is in %2"],"? \\ni ?":["%1 contains %2"],"? \\subseteq ?":["%1 is a subset of %2"],"? \\subset ?":["%1 is a strict subset of %2"],"? \\supseteq ?":["%1 is a superset of %2"],"? \\supset ?":["%1 is a strict superset of %2"],"{}":["left brace right brace"],"[]":["left bracket right bracket"],"[?,?]":["left bracket %1 right bracket"],"(?,?]":["left parenthesis %1 right bracket"],"[?,?)":["left bracket %1 right parenthesis"],"? \\rightarrow ?":["%1 rightarrow %2"],"? \\Rightarrow ?":["%1 implies %2"],"? \\leftarrow ?":["%1 left arrow %2"],"? \\longrightarrow ?":["%1 long right arrow %2"],"? \\longleftarrow ?":["%1 long left arrow %2"],"? \\overrightarrow ?":["%1 over right arrow %2"],"? \\overleftarrow ?":["%1 over left arrow %2"],"? \\leftrightarrow ?":["%1 left right arrow %2"],"? \\Leftrightarrow ?":["%1 if and only if %2"],"? \\longleftrightarrow ?":["%1 long left right arrow %2"],"? \\overleftrightarrow ?":["%1 over left right arrow %2"],"\\rightarrow ?":["right arrow %1"],"\\Rightarrow ?":["implies %1"],"\\leftarrow ?":["left arrow %1"],"\\leftrightarrow ?":["left right arrow %1"],"\\Leftrightarrow ?":["if and only if %1"],"\\longrightarrow ?":["long right arrow %1"],"\\longleftarrow ?":["long left arrow %1"],"\\overrightarrow ?":["over right arrow %1"],"\\overleftarrow ?":["over left arrow %1"],"\\longleftrightarrow ?":["long left right arrow %1"],"\\overleftrightarrow ?":["over left right arrow %1"],"? \\implies ?":["%1 implies %2"],"?\\'":["%1 prime"],"? \\text{dx}":["with respect to x of %1"],"?_?":["%1 sub %2"],"?:?":["ratio of %1 to %2"],"? \\perp ?":["%1 perpendicular to %2"],"? \\propto ?":["%1 proportional to %2"],"?+?":["%1 plus %2"],"?-?":["%1 minus %2"],"?*?":["%1 times %2"],"?\\cdot?":["%1 times %2"],"?\\cdotp?":["%1 times %2"],"?<?":["%1 is less than %2"],"?<=?":["%1 is less than or equal to %2"],"?>?":["%1 is greater than %2"],"?>=?":["%1 is greater than or equal to %2"],"?=?":["%1 is equal to %2"],"?\\approx?":["%1 almost equal to %2"],"?!":["%1 factorial"],"?%":["%1 percent "],"? \\pm ?":["%1 plus or minus %2"],"? \\ne ?":["%1 is not equal to %2"],"? \\neq ?":["%1 is not equal to %2"],"? \\ngtr ?":["%1 is not greater than %2"],"? \\nless ?":["%1 is not less than %2"],"? \\div ?":["%1 divided by %2"],"? \\backslash ?":["%1 left divided by %2"],"(?)^? ?":["%1 times %2"],"? (?)^?":["%1 times %2"],"?^? ?":["%1 %2"],"? ?^?":["%1 %2"],"(\\type{simpleExpression})":["%1"],"(?)":["open paren %1 close paren"],"[\\type{simpleExpression}]":["%1"],"[?]":["open bracket %1 close bracket"],"|\\type{simpleExpression}|":["absolute value of %1"],"|?|":["start absolute value %1 end absolute value"],"{?} ?":["%1 %2"],"? ?":["%1 %2"],"?":["%1 "]}}},{}],7:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.version="v0.2.0"},{}]},{},[4])(4)},module.exports=f()},function(t,n,i){"use strict";i.d(n,"a",(function(){return g}));var u=i(0),l=i.n(u),d=i(42),p=i(29);var h={stripAttr:function stripAttr(t,n){if(t){if(!n)return t;if(l.a.isString(t)){var i=new RegExp("".concat(n,'="[^"]+"'),"gi"),u=new RegExp("".concat(n,'=\\\\"[^\\\\"]+\\\\"'),"gi");t=t.replace(i,"").replace(u,"")}else t instanceof Element&&t.hasAttribute(n)?t.removeAttribute(n):l.a.isObject(t)&&!l.a.isUndefined(t[n])&&delete t[n];return t}}};function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var g=function(){function BaseScorer(t,n){!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,BaseScorer),n&&Object(d.a)(this,n),t&&this._initialize(t,n)}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(BaseScorer,[{key:"_initialize",value:function _initialize(t,n){this.questionResponse=this.processQuestionResponse(t),this.options=n,this.reset(this.questionResponse,n)}},{key:"processQuestionResponse",value:function processQuestionResponse(t){var n=t.question,i=t.response;if(n&&!l.a.isEmpty(n.dynamic)){var u=i&&l.a.getNested(i,"dynamic.id");return l.a.extend({},t,{question:this.getFormattedQuestion(n,u)})}return this.stripSimplefeature(t)}},{key:"stripSimplefeature",value:function stripSimplefeature(t){try{var n=h.stripAttr(JSON.stringify(t),"data-simplefeature_id");return JSON.parse(n)}catch(n){return t}}},{key:"getFormattedQuestion",value:function getFormattedQuestion(t,n){return p.a.getFormattedQuestion(t,n)}},{key:"isValid",value:function isValid(){return this.scoringData.isValid}},{key:"score",value:function score(){return this.scoringData.score}},{key:"scoreWithFullPenalty",value:function scoreWithFullPenalty(){return this.scoringData.scoreWithFullPenalty}},{key:"validateIndividualResponses",value:function validateIndividualResponses(){return this.scoringData.responsesValid}},{key:"maxScore",value:function maxScore(){return this.scoringData.maxScore}},{key:"suggestedResponse",value:function suggestedResponse(){return this.scoringData.suggestedResponse}},{key:"error",value:function error(){return this.scoringData.error}},{key:"canValidateResponse",value:function canValidateResponse(){return!(!this.scoringData||!this.scoringData.automarkable)}},{key:"reset",value:function reset(t,n){}}]),BaseScorer}()},function(t,n,i){"use strict";var u=i(34);function SpokenMath(){}SpokenMath.translate=u.Core.translate.bind(u.Core,null),SpokenMath.translateOrEmptyString=function(t,n){if(""===t)n("");else try{SpokenMath.translate(t,(function(t,i){n(t?i||"":i)}))}catch(t){n("")}},n.a=SpokenMath},function(t,n,i){"use strict";var u=i(0),l=i.n(u);n.a={renderSimpleFeatures:function renderSimpleFeatures(t,n,i){var u=this,d=i.getSimpleFeatureNodes({$scope:t}),p=n.get("beta_flags");return i.render(p,d,n).then((function(t){l.a.size(t)&&(n.hooks.reset.push((function(){i.unregisterFacades(t),u.simpleFeatureFacades={}})),l.a.extend(u.simpleFeatureFacades,t))}))}}},function(t,n,i){"use strict";i.d(n,"a",(function(){return E}));i(5);var u=i(0),l=i.n(u),d=i(2),p=i(1),h=i.n(p),g=i(48),v=i.n(g),y=i(7);function getImagePromise(t){return new d.default((function(n,i){t.onload=n,t.onerror=i}))}function loadImage(t){return new d.default((function(n,i){!function handleImageLoad(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t.retryCount>0&&addLoadingSpinnerOverlay(t.el);function removeSpinnerIfHasRetried(){t.retryCount>0&&removeLoadingSpinnerOverlay(t.el)}t.promise.then((function(){removeSpinnerIfHasRetried(),t.retryCount=0,n(t.el)})).catch((function(){removeSpinnerIfHasRetried(),t.retryCount++,i(t.el)}))}(t,n,i)}))}function resetImage(t){if(t.retryCount>0){var n,i=t.el,u=t.originalSrc;t.el.removeAttribute("src"),n=t.el.cloneNode(!1),t.el=n,t.promise=getImagePromise(t.el),i.parentNode.replaceChild(t.el,i),y.a.isMicrosoft&&(u+="&bust="+ +new Date),t.el.setAttribute("src",u)}}function addLoadingSpinnerOverlay(t){var n=h()(t);n.siblings(".lrn-image-load-error-spinner-container").length||n.addClass("lrn-loading-image-hidden").after(v()())}function removeLoadingSpinnerOverlay(t){h()(t).removeClass("lrn-loading-image-hidden").siblings(".lrn-image-load-error-spinner-container").remove()}var S=function imageLoader(t){var n,i;return function(){return n=n||t.getElementsByTagName("img"),i?l()(i).forEach(resetImage):i=function getImageMap(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l()(Array.prototype.slice.call(t)).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{el:t,originalSrc:t.src,retryCount:0,promise:getImagePromise(t)}}))}(n),new d.default((function(t,n){0!==i.length?d.default.all(l()(i).map(loadImage)).then(t).catch(n):t(i)}))}};function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var E=function(){function ImageLoader(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,ImageLoader),!l.a.isElement(t.element))throw new Error("The type of the element passed to ImageLoader is not HTMLDivElement");this.element=t.element,this.imageLoadPromise=null,this.loader=S(this.element)}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(ImageLoader,[{key:"addFacadeMethods",value:function addFacadeMethods(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.checkImages=l.a.bind((function(){return this.checkImages()}),this),t.retryLoadImages=l.a.bind((function(){this.loadImages()}),this)}},{key:"checkImages",value:function checkImages(){var t=this;return new d.default((function(n,i){return t.imageLoadPromise.then(n,i)}))}},{key:"loadImages",value:function loadImages(){var t=this;this.imageLoadPromise=new d.default((function(n,i){t.loader().then(n).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(t)}))})),this.imageLoadPromise.then(null).catch((function(){}))}}]),ImageLoader}()},function(t,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,n,i){var u,l;l=this,void 0===(u=function(){return l.returnExportsGlobal=function(){"use strict";function a(){var t,n;this.q=[],this.add=function(t){this.q.push(t)},this.call=function(){for(t=0,n=this.q.length;n>t;t++)this.q[t].call()}}function c(n,i){if(n.resizedAttached){if(n.resizedAttached)return void n.resizedAttached.add(i)}else n.resizedAttached=new a,n.resizedAttached.add(i);n.resizeSensor=document.createElement("div"),n.resizeSensor.className="resize-sensor";var u="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;",l="position: absolute; left: 0; top: 0; transition: 0s;";n.resizeSensor.style.cssText=u,n.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+u+'"><div style="'+l+'"></div></div><div class="resize-sensor-shrink" style="'+u+'"><div style="'+l+' width: 200%; height: 200%"></div></div>',n.appendChild(n.resizeSensor),"static"==function b(t,n){return t.currentStyle?t.currentStyle[n]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(n):t.style[n]}(n,"position")&&(n.style.position="relative");var d=n.resizeSensor.childNodes[0],p=d.childNodes[0],h=n.resizeSensor.childNodes[1],k=function(){p.style.width=1e5+"px",p.style.height=1e5+"px",d.scrollLeft=1e5,d.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5};k();var g=!1,m=function(){n.resizedAttached&&(g&&(n.resizedAttached.call(),g=!1),t(m))};t(m);var v,y,S,E,r=function(){((S=n.offsetWidth)!=v||(E=n.offsetHeight)!=y)&&(g=!0,v=S,y=E),k()},s=function(t,n,i){t.attachEvent?t.attachEvent("on"+n,i):t.addEventListener(n,i)};s(d,"scroll",r),s(h,"scroll",r)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},e=function(t,n){var i=Object.prototype.toString.call(t),u=this._isCollectionTyped="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"undefined"!=typeof jQuery&&t instanceof window.jQuery||"undefined"!=typeof Elements&&t instanceof window.Elements;if(this._element=t,u)for(var l=0,d=t.length;d>l;l++)c(t[l],n);else c(t,n)};return e.prototype.detach=function(){var t=this._isCollectionTyped,n=this._element;if(t)for(var i=0,u=n.length;u>i;i++)e.detach(n[i]);else e.detach(n)},e.detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},e}()}.apply(n,[]))||(t.exports=u)},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(9),p=function MyscriptHandwriting(){},h=0,g={equation:{resultTypes:["LATEX"],components:[]}};function format(t){var n=[];return l.a.each(t,(function(t){var i={type:"stroke",x:[],y:[]};l.a.each(t.points,(function(t){i.x.push(t.x),i.y.push(t.y)})),n.push(i)})),n}l.a.extend(p.prototype,{TYPE:{EQUATION:"equation"},BASE_URL:"/handwriting/recognise",recognise:function recognise(t){try{if(t.marks.length){var n=function getInk(t,n){return l.a.extend(l.a.clone(g[t]),{components:format(n)})}(t.type,t.marks);!function callRecognition(t,n,i){var u;i.handwritingRecognises&&(n.userResources=[i.handwritingRecognises]),u=h+=1,d.a.request({url:t,security:i.security.getRequestParameters(),action:d.a.ACTION.SET,data:{myscript:{equationInput:JSON.stringify(n)}},success:function success(t){var n;if(u===h){try{n=t.response.data[0].value}catch(t){i.failFn("Could not access response data")}i.successFn(n)}},failure:function failure(t){u===h&&i.failFn("Recognition api failure");try{40001===t.response.meta.code&&console.error(t.response.meta.message)}catch(t){}}})}(this.BASE_URL+t.type,n,t)}else l.a.defer(t.successFn,"")}catch(n){t.failFn(n)}},cancel:function cancel(){h+=1},format:format}),n.a=new p},function(t,n,i){"use strict";var u=i(0),l=i.n(u);n.a=function enhanceWithErrorHandler(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==n.includeError)return t;if(l.a.isFunction(t.reset)){var i=t.reset.bind(t);t.reset=function(){i.apply(void 0,arguments);var n=t.error();if(n)throw new Error(n)}}}},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=(i(5),i(1)),p=i.n(d),h=i(20),g=i(16);n.a=h.a.extend({SELECTORS:{ACCESSIBILITY_DEST:"[data-lrn-access-review-dest]"},initialize:function initialize(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getTextFn=!!l.a.isFunction(t.getSourceText)&&t.getSourceText,this.ariaLiveFallbackData={overallCorrect:void 0,groups:[{correct:[],incorrect:[],expected:[]}]},this.validationReaderTimeout=-1,this.validationClearTimeout=-1,h.a.prototype.initialize.call(this)},apply:function apply(){this.updateAriaLiveRegion()},restore:function restore(){clearTimeout(this.validationReaderTimeout),clearTimeout(this.validationClearTimeout),this.$el.find(".lrn-accessibility-arialive").attr("aria-hidden",!0).text("")},updateAriaLiveRegion:function updateAriaLiveRegion(t){var n=this,i=this.$el.find(".lrn-accessibility-arialive"),u=(t=t||this.setupDefaultData()).overallCorrect?t.overallCorrect+". ":"";l.a.each(t.groups,function(t){u+=this._buildAnswersString(t)}.bind(this)),i.text("").attr("aria-hidden",!1),clearTimeout(this.validationReaderTimeout),clearTimeout(this.validationClearTimeout),this.validationReaderTimeout=setTimeout((function(){i.text(u),n.validationClearTimeout=setTimeout((function(){i.text("")}),200)}),200)},_buildAnswersString:function _buildAnswersString(t){var n="",i=0===t.correct.length&&0===t.incorrect.length&&0===t.expected.length;return!i&&t.index&&(n+=" Response group "+t.index+": "),!i&&t.label&&(n+=" "+t.label+". "),t.groupCorrect&&(n+=" "+t.groupCorrect+". "),n+=this._buildStringByAnswerStatus("correct",t.correct)+this._buildStringByAnswerStatus("incorrect",t.incorrect)+this._buildStringByAnswerStatus("expected",t.expected)},_buildStringByAnswerStatus:function _buildStringByAnswerStatus(t,n){var i,u=n.constructor===Array,l=u?n.length:1,d=u?n.join(", "):n;return u||n.length?(i=1===l?t+this._pluralizeAnswers(l):l+" "+t+this._pluralizeAnswers(l),d=d.length?": "+d:"",l?i+d+". ":""):""},_pluralizeAnswers:function _pluralizeAnswers(t){return 1===t?" answer":" answers"},setupDefaultData:function setupDefaultData(){var t,n,i,u,l=this,d=[],h=[],v=[];return this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){switch(i=(i=g.a.getSourceElement(p()(this))).clone(),t=g.a.getResponseData(i,l.getTextFn),n=t.responseText,t.responseStatus){case"correct":d.push(n);break;case"incorrect":h.push(n);break;case"no response given - missed":v.push(n)}})),u=this.ariaLiveFallbackData.groups[0],this.ariaLiveFallbackData.overallCorrect=this.$el.find(".lrn-response-validate-wrapper").attr("aria-label"),u.correct=d,u.incorrect=h,u.expected=v,this.ariaLiveFallbackData},convertAlphabeticalResponseToNumerical:function convertAlphabeticalResponseToNumerical(t,n,i){var u=String.fromCharCode(t+97),l=String.fromCharCode(t+65),d=t+1,p=function getResponseIndex(t){return n.find(".lrn_responseIndex:contains(".concat(t,")"))};return i&&"number"!==i?"lower-alpha"===i?p(u):"upper-alpha"===i?p(l):void 0:p(d)},generateRowBasedAriaGroups:function generateRowBasedAriaGroups(t,n){var i=n&&n.labelSelector||"",u=n&&n.correctAnswerSelector||".lrn_correctAnswerList",l=[],d={overallCorrect:this.$el.find(".lrn-response-validate-wrapper").attr("aria-label")},p=this.$el.find(u),h=this.view.displayLogic.validation_stem_numeration;return this.$el.find(t).each(function(t,n){this.addIndividualRowInformation(t,n,{labelSelector:i,$correctAnswers:p,stemNumeration:h,groups:l})}.bind(this)),d.groups=l,d},addIndividualRowInformation:function addIndividualRowInformation(t,n,i){var u,l,d,h,g,v;u=t,l=(v=p()(n)).find(i.labelSelector).addBack(i.labelSelector).text(),d=v.find(".lrn_correct").addBack(".lrn_correct").find(".lrn_item").text(),h=v.find(".lrn_incorrect").addBack(".lrn_incorrect").find(".lrn_item").text(),g=this.convertAlphabeticalResponseToNumerical(t,i.$correctAnswers,i.stemNumeration).siblings(".lrn_responseText").text(),i.groups.push({index:u+1,label:l,correct:d,incorrect:h,expected:g})}})},function(t,n,i){"use strict";var u,l=i(0),d=i.n(l),p=i(1),h=i.n(p),g=i(5),v=i.n(g),y=function Label(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldRenderAriaLabels:!0};this.options=t},S=function Polygon(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t},E=function getAbsolutePosition(t,n){return t/100*n};d.a.extend(y.prototype,{getHtml:function getHtml(){var t=this.getPosition(),n=h()("<li>");return n.css({top:t.top,left:t.left}),n.text(this.options.text).addClass(this.options.className),this.options.shouldRenderAriaLabels&&n.attr("aria-label",this.options.ariaLabel),n[0].outerHTML},getPosition:function getPosition(){var t=this.options.polygon.coordinates[0];return{top:E(t.y,this.options.containerHeight),left:E(t.x,this.options.containerWidth)}}}),d.a.extend(S.prototype,{getHtml:function getHtml(){var t,n=h()("<polygon>"),i=d.a.map(this.getAbsoluteCoordinates(),(function(t){return[t.x,t.y].join(",")}));return this.options.isFocusable&&(t=h()('<a xlink:href="#"/>'),n.attr("aria-hidden","true"),t.append(n)),n.attr("points",i.join(", ")).css({fill:this.options.fill,stroke:this.options.stroke}),t?t.addClass(this.options.className):u.addPolygonClass(n.get(0),this.options.className),d()(this.options.elementAttributes).forEach((function(i,u){(t||n).get(0).setAttribute(u,i)})),(t||n)[0].outerHTML},getAbsoluteCoordinates:function getAbsoluteCoordinates(){return d.a.map(this.options.coordinates,(function(t){return{x:E(t.x,this.options.containerWidth),y:E(t.y,this.options.containerHeight)}}),this)}}),u=v.a.View.extend({SELECTORS:{labels:".lrn-polygons-labels",focusable:"a",polygons:"polygon"},events:{"click a":"preventFocusLinks","touchend a":"preventFocusLinks"},className:"lrn-polygons",initialize:function initialize(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,this.render()},appendLabels:function appendLabels(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.renderLabels(t,d.a.extend({},n,{removeExistingLabels:!1})),this},getShapeElements:function getShapeElements(){return this.options.makeFocusable?this.el.querySelectorAll(this.SELECTORS.focusable):this.el.querySelectorAll(this.SELECTORS.polygons)},preventFocusLinks:function preventFocusLinks(t){t.preventDefault()},removeLabels:function removeLabels(){return this.$labels&&(this.$labels.remove(),delete this.$labels),this},render:function render(){var t=this,n=d()(this.options.polygons).map((function(n){var i=d.a.extend({},n,{isFocusable:!!t.options.makeFocusable,containerWidth:t.options.width,containerHeight:t.options.height});return new S(i)})),i=h()("<svg>").css({width:this.options.width,height:this.options.height});return this.options.renderAsList&&i.attr("role","list"),d()(n).forEach((function(n){var u=n.getHtml();t.options.renderAsList&&(u='<g role="listitem">'.concat(u,"</g>")),i.append(u)})),this.$el.empty().append(i[0].outerHTML),this},renderLabels:function renderLabels(t,n){var i=d.a.extend({ariaHidden:!1,removeExistingLabels:!0},n),u=this.SELECTORS.labels.replace(/^\./,"");return i.removeExistingLabels&&this.removeLabels(),this.$labels=this.$labels||h()("<ul>").addClass(u),i.ariaHidden&&this.$labels.attr("aria-hidden","true"),d.a.each(t,(function(t){var n=this.options.polygons[t.polygonIndex],u=new y(d.a.extend({shouldRenderAriaLabels:!i.ariaHidden,containerWidth:this.options.width,containerHeight:this.options.height,polygon:n},t));this.$labels.append(u.getHtml())}),this),this.$el.append(this.$labels),this}},{polygonHasClass:function polygonHasClass(t,n){return t.classList&&d.a.isFunction(t.classList.contains)?t.classList.contains(n):d.a.contains(u.getPolygonClasses(t),n)},addPolygonClass:function addPolygonClass(t,n){var i;if(n&&!u.polygonHasClass(t,n)){if(t.classList&&d.a.isFunction(t.classList.add))return t.classList.add(n);(i=u.getPolygonClasses(t)).push(n),h()(t).attr("class",i.join(" "))}},getPolygonClasses:function getPolygonClasses(t){var n;return t.classList?d.a.map(t.classList,(function(t){return t})):(n=h()(t).attr("class"),d.a.isString(n)?(n=n.replace(/\s+/g," "),d.a.filter(n.split(" "),(function(t){return t.length}))):[])},removePolygonClass:function removePolygonClass(t,n){var i;return!!u.polygonHasClass(t,n)&&(t.classList&&d.a.isFunction(t.classList.remove)?(t.classList.remove(n),!0):(i=d.a.without(u.getPolygonClasses(t),n),h()(t).attr("class",i.join(" ")),!0))},removePolygonClasses:function removePolygonClasses(t,n){d.a.each(n,(function(n){u.removePolygonClass(t,n)}))},togglePolygonClass:function togglePolygonClass(t,n){return u.polygonHasClass(t,n)?(u.removePolygonClass(t,n),!1):(u.addPolygonClass(t,n),!0)}}),n.a=u},function(t,n,i){"use strict";var u=i(35),l=i(10);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,u=_getPrototypeOf(t);if(n){var l=_getPrototypeOf(this).constructor;i=Reflect.construct(u,arguments,l)}else i=u.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(NonValidatableScorer,t);var n=_createSuper(NonValidatableScorer);function NonValidatableScorer(){return _classCallCheck(this,NonValidatableScorer),n.apply(this,arguments)}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(NonValidatableScorer,[{key:"isValid",value:function isValid(){return null}},{key:"score",value:function score(){return this.scoringData.score}},{key:"maxScore",value:function maxScore(){return this.scoringData.maxScore}},{key:"error",value:function error(){}},{key:"canValidateResponse",value:function canValidateResponse(){return!1}},{key:"reset",value:function reset(t){return this.scoringData={automarkable:!1},l.a.normalizeScores(this.scoringData,t),this}}]),NonValidatableScorer}(u.a);n.a=d},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=id)?"":__t)+'" class="lrn lrn_widget lrn_group lrn_clearfix"><button type="button" class="lrn_btn">'+(null==(__t=labels.checkAnswers)?"":__t)+"</button></div>";return __p}},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=id)?"":__t)+'" class="lrn lrn_widget"><button type="button" class="'+(null==(__t=displayLogic.submit?"lrn_submit_button":"lrn_save_button")?"":__t)+' lrn_btn"'+(null==(__t=displayLogic.disabled?'disabled="disabled"':"")?"":__t)+"><span>"+(null==(__t=displayLogic.label)?"":__t)+"</span></button></div>";return __p}},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn-image-load-error-spinner-container"><div class="lrn_spinner"><div class="lrn_bounce1"></div><div class="lrn_bounce2"></div><div class="lrn_bounce3"></div></div></div>';return __p}},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=responseId)?"":__t)+'" class="lrn lrn_widget lrn_qr lrn_'+(null==(__t=questionType)?"":__t)+" lrn_clearfix "+(null==(__t=globalExtraClasses)?"":__t)+'">',showInstructorStimulus&&(__p+='<div class="lrn_question"><div class="lrn-instructor-stimulus"><div class="lrn_clearfix"><div class="lrn-instructor-stimulus-content">'+(null==(__t=instructorStimulusContent)?"":__t)+"</div></div></div></div>"),__p+="",_.each(widgetLayoutElements,(function(t){__p+="","stimulus"===t.type&&showStimulus&&(__p+='<div class="lrn_question" data-lrn-widget-component="stimulus"><div class="lrn_stimulus lrn_clearfix"><div class="lrn_stimulus_content lrn_clearfix">'+(null==(__t=stimulusContent)?"":__t)+"</div>",hasVerticalFeatures&&(__p+='<div class="lrn_stimulus_features_vertical"></div>'),__p+="</div></div>"),__p+="","interaction"===t.type&&(__p+='<div class="lrn_response_wrapper',hasOverlayFeatures&&(__p+=" lrn_overlaying_features"),__p+='" data-lrn-widget-component="interaction"><div class="lrn_response lrn_clearfix '+(null==(__t=extraClasses)?"":__t)+'" ',hasOverlayFeatures&&(__p+=' style="visibility: hidden;"'),__p+=' ><div class="lrn-accessibility-arialive" aria-live="assertive" aria-atomic="true" aria-hidden="true"></div>'+(null==(__t=responseContent)?"":__t)+"</div></div>"),__p+=""})),__p+="</div>";return __p}},function(t,n){t.exports={addData:"Add Data",audioplaybackerror:"Unable to play audio asset. Click to try again in a moment.",audioPlayer:"Audio Player",audioRecorder:"Audio Recorder",audioretrievalretry:"Trying to retrieve audio",audioPlayRecording:"Play",audioStopPlayback:"Stop playback",audioPausePlayback:"Pause",audioContinuePlayback:"Continue",audioStopRecording:"Stop recording",audioStartRecording:"Start recording",audioPauseRecording:"Pause",audioContinueRecording:"Continue recording",audioAdjustVolume:"Adjust Volume",audioSoundWaves:"Sound waves",simpleChartNoData:"No Data Available. Please add a new bar.",simpleChartNewBarDefaultName:"New Bar",calculator:"Calculator",cancel:"Cancel",characterMapCharacters:["¡","¿","Ç","Ñ","ç","ñ","ß","ý","ÿ","á","â","ã","ä","å","æ","À","Á","Â","Ã","Ä","Å","Æ","à","È","É","Ê","Ë","è","é","ê","ë","Ì","Í","Î","Ï","ì","í","î","ï","Ò","Ó","Ô","Õ","Ö","Ø","Œ","ð","ò","ó","ô","õ","ö","œ","Ù","Ú","Û","Ü","ù","ú","û","ü"],characterMapIcon:"á",characterMapMathCharacters:["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","⁺","⁻","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","₊","₋","½","⅓","⅔","¼","¾","⅕","⅖","⅗","⅘","⅙","⅚","√","∞","≤","≥","±","μ","σ","∫","Δ","∪","∩","≡","Σ","°"],characterMapMathIcon:"Σ",characterMapTitle:"Special Characters",characterMathMapTitle:"Math Characters",checkAnswer:"Check Answer",checkAnswers:"Check Answers",clear:"Clear",clickToRecord:"Click on record to start",clickToStartPlayback:"Click on play to start playback",closeThisWindow:"Close this window",color:"color",colorPicker:"Color Picker",confirmrecordoverwrite:"A previous audio recording exists. If you continue it will be replaced.",confirmVideoOverwrite:"A previous video recording exists. If you continue it will be replaced.",continuelabel:"Continue",copy:"Copy",correctAnswer:"Correct answer",correctAnswers:"Correct answers",counterTemplate:"Beginning in {num} seconds...",cut:"Cut",distractorRationale:{incorrectTitle:"Incorrect",correctTitle:"Correct"},downloadAudio:"Download",downloadVideo:"Download video file",draggableItem:"Movable item",editorBoldIcon:"B",editorBoldTitle:"Bold",editorBulletdListTitle:"Bulleted list",editorItalicsIcon:"I",editorItalicsTitle:"Italics",editorNumberedListTitle:"Numbered list",editorRemoveFormatTitle:"Clear formatting",editorSubscriptTitle:"Subscript",editorSuperscriptTitle:"Superscript",editorUnderlineIcon:"U",editorUnderlineTitle:"Underline",error:"Error",fileUpload:{deleteFileMode:"Delete File Mode",fileDescriptionMode:"File Description Mode",fileLimit:"File Limit",characterLimit:"character limit",characterLimitReachedAriaLabel:"{{maxCharacters}} character limit has been reached.",fileFormatsSupported:"Supported file formats",fileDescriptionLabel:"Press {{icon}} to enter descriptions for the uploaded files ({{maxCharacters}} characters max).",fileDescriptionAriaLabel:"Tap to enter descriptions for the uploaded files ({{maxCharacters}} characters max).",fileDeleteDisclaimer:"File deletion cannot be undone. Any supporting descriptions will be lost.",notification:{couldNotUpload:"could not be uploaded. Please try again.",invalidFileType:"has an invalid file type. Allowed file extensions are:",maxFilesReached:"The maximum number of files have been selected.",tooLarge:"is too large. Please select files less than",tooManyFilesSelected:"Too many files selected, the maximum allowed is",alreadySelected:" has already been selected."},uploadFiles:"Upload files",uploadFailed:"upload failed",photoCapture:{launch:"Capture photo",accessToCamera:{title:"Waiting for camera access",description:"Before capturing, we will ask for access to the camera.",denied:"No camera found. Please check your browser settings or refresh the page to try again."},countdownCapturingIn:"Capturing in...",chooseName:"Name your photo",defaultFileName:"photo",confirmDelete:"Delete current image?",capture:"Capture",retake:"Retake",accept:"Accept",save:"Save",cancel:"Cancel",delete:"Delete",close:"Close"}},graphingTools:{move:"Move",point:"Point",line:"Line",ray:"Ray",segment:"Segment",vector:"Vector",circle:"Circle",parabola:"Parabola",sine:"Sine",polygon:"Polygon",delete:"Delete",label:"Label"},graphPlotter:{instructions1:"Use left and right arrows to navigate the toolbar. Space or Enter to select the tool.",instructions2:"Use Tab and Shift+Tab to navigate between the toolbar and graph plane.",instructions3:"Use arrow keys to navigate around the graph plane.",instructions4:"Use Space or Enter to execute the selected action.",instructionsButton:"Keyboard Instructions"},handwritingApiError:"Unable to recognise handwriting. Please try again later.",imageUpload:{deleteMode:"Delete Mode",addAnnotation:"Add Annotation",rotateImage:"Rotate Image",configureImage:"Configure Image",uploadNewImage:"Upload a new image",replaceImage:"Replace current image",uploadImage:"Upload an image",enterAnnotation:"Enter an annotation",noResponse:"No content entered",removeAllAnnotations:"Remove all annotations when uploading the image"},imageTool:"Image Tool",imageValidationArea:"Image validation area",incorrectAnswer:"Incorrect answer",incorrectAnswers:"Incorrect answers",itemPositionTemplate:"Item {num} of {length}",lineChartNewPointDefaultName:"New Point",lineReader:"Line Reader",lineReaderClose:"Close Line Reader",lineReaderDescription:"Show or hide the Line Reader, a visual assistive tool for showing one line of text and masking surrounding text.",lineReaderResizeMask:"Resize Line Reader mask",lineReaderResizeWindow:"Resize Line Reader window",listen:"Listen",loading:"Loading",loadingInfo:"<div class='lrn_spinner'><div class='lrn_bounce1'></div><div class='lrn_bounce2'></div><div class='lrn_bounce3'></div></div>",longTextV2:{invalidExternalImageWarning:"Invalid pasted image. Images can be inserted using the uploader in the toolbar.",invalidExternalMathWarning:"[Invalid pasted math]"},next:"Next",previous:"Previous",maxPlayAttempts:"You reached the playback limit",maxRecordAttempts:"You used all your recording attempts",maxResponseMessage:"Only 1 answer is allowed.",maxResponsesMessage:"Only {{maxSelection}} answers are allowed.",microphoneDeviceMissing:"Microphone device missing error.",microphoneDeviceNoAuth:"Microphone not authorised",minResponseMessage:"This question requires at least 1 answer.",minResponsesMessage:"This question requires at least {{minSelection}} answers.",noAudio:"No audio to playback",noCorrectAnswersSet:"No correct answers set",ok:"OK",onbeforeunload:"You have unsaved responses. If you continue you will lose these responses.",orderListChangeTemplate:"Item {start} moved to position {end}.",paste:"Paste",pause:"Pause",play:"Play",silenceDetected:"Recording stopped due to silence detected",paginationCountOf:"of",playback:"Playback",playbackPaused:"Playback paused",playbackUnavailable:"Playback unavailable",playconversation:"Play Conversation",playConversationTitle:"Playing Question ",playPrevious:"Play previous",playNext:"Play next",playing:"Playing",progress:"Progress",ratingInfoIcon:"i",ready:"Ready",record:"Record",recordAudioStatusLine:"Click to change microphone access settings.",recordAudioStatusTitle:"Audio Status",recordAuthRememberTitle:"Microphone permission",recordAuthRememberHtml:"Select <strong>remember</strong> before clicking <strong>allow</strong>. This will allow you to record audio and stop this pop-up box being shown again.",recordAuthRememberTroubleLink:'Having trouble? <a target="_blank" href="https://www.learnosity.com/guide/audioTroubleshooting.php">Click here</a>.',recordChromeAuthTitle:"Additional browser permissions",recordChromeAuth1st:"Click <strong>allow</strong> above, in the top right of your browser window:",recordChromeAuth1stB:"Click the <strong>allow</strong> button to enable microphone permissions.",recordChromeAuth2nd:"<strong>Close</strong> this window",recordChromeAuthTroubleLink:"If the button is not displayed, refer to <a target='_blank' href='https://www.learnosity.com/guide/audioTroubleshooting.php'>this guide</a>.",recordMobileTroubleLink:"If you're using a mobile device, refer to <a target='_blank' href='https://www.learnosity.com/guide/audioTroubleshooting.php'>this guide</a>.",recording:"Recording",recordingComplete:"Recording complete",recordingCounterPreload:"Recording will begin in ...",recordingPaused:"Recording paused",recordingTooLong:"Recording too long. The maximum recording length is {maxLength} seconds.",recordingUnavailable:"Recording unavailable",recordSwfErrorLine1:"We've been unable to access flash. Please ensure a blocker",recordSwfErrorLine2:"is not enabled and that you have the latest version of flash.",redo:"Redo",replay:"Replay",reset:"Reset",resume:"Resume",delete:"Delete",givenResponses:"Given responses",response:"Response",responseArea:"Response area",retry:"Retry",rightClickAudioDownload:"Click to save audio file.",saveButtonLabel:"Save Answers",saveComplete:"Saved",saveInProgress:"Saving...",seekTo:"Skip to",showAllResponses:"Show all responses",source:"Source",stimulus:"Stimulus",stop:"Stop",stopconversation:"Stop Conversation",submitButtonLabel:"Submit Answers",submitComplete:"Submitted",submitInProgress:"Submitting...",tapToStartPlayback:"Tap to start playback",target:"Target",uierrorfeedback:"A problem occurred. Please try again later. If the problem persists contact your administrator.",unableToPlayAsset:"Unable to play, asset not available.",unavailable:"Unavailable",undo:"Undo",unsupportedBrowser:"Sorry, this item cannot be displayed because your browser is not supported.",unsupportedCompatibilityMode:"Sorry, this item cannot be displayed because your browser is in an unsupported compatibility view.",videoplayerTextAlternativeCaption:"Captions",videoOptimizing:"Optimizing your video",videoOptimizingSubheader:"You can continue authoring during this process.",videoNotReady:"Video playback is not yet ready",videoNotReadySubheader:"Save your work and refresh your browser, or come back later.",videoPlaybackError:"Playback error",videoFormatUnsupported:"Your browser does not support this video format.",video:{recordingInstructionsBefore:"Before recording, we will ask for access to the camera and microphone.",recordingInstructionsAgain:'Then select the "Take Video" option',recordingInstructionsStart:"Press record to start",timeWarningLimit:"limit is almost up!",maxDuration:"Maximum duration"},volume:"volume",word:"Word(s)",wordLength:"Word Limit",fontSizeTitle:"Font Size",fontSize:{small:"Small",normal:"Normal",large:"Large",xlarge:"Extra large",xxlarge:"Huge"},editor:{toolbar:{bold:"Bold",italic:"Italic",underline:"Underline",removeFormat:"Clear formatting",codeInline:"Code Inline",codeEditor:"Code Editor",orderedList:"Numbered list",unorderedList:"Bullet list",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",alignJustify:"Align justify",indentIncrease:"Increase indent",indentDecrease:"Decrease indent",insertHorizontalRule:"Insert horizontal rule",subscript:"Subscript",superscript:"Superscript",textDirectionLtr:"Text direction left to right",textDirectionRtl:"Text direction right to left",charactermap:"Character map",specialCharacterMap:"Special characters",mathCharacterMap:"Math characters",table:"Table",image:"Image (12 image limit)",blockquote:"Block quote",undo:"Undo",redo:"Redo",editImage:"Edit image",previewImage:"View image",deleteImage:"Delete image",selectFontSize:"Select text size. {{title}} selected.",selectColor:"Select color"},modals:{tableTitle:"Table",editTableTitle:"Edit table",apply:"Apply",upload:"Upload",cancel:"Cancel",close:"Close",columns:"Columns",rows:"Rows",insertColumnBefore:"Insert before",insertColumnAfter:"Insert after",insertRowAbove:"Insert above",insertRowBelow:"Insert below",deleteTable:"Delete table",deleteColumn:"Delete column",deleteRow:"Delete row",imageTitle:"Image",uploadText:"Click to add image",imageReplace:"Replace",imageRotate:"Rotate",imagePreviewText:"Image size: {{width}}px × {{height}}px",imageSize:{title:"Image display size",small:"Small - {{width}} × {{height}}",medium:"Medium - {{width}} × {{height}}",large:"Large - {{width}} × {{height}}",fullSize:"Full size - {{width}} × {{height}}"},zoomIn:"Zoom in",zoomOut:"Zoom out",openImageURL:"Open in a new tab"},messages:{failedLoadingImage:"Error processing image. Try again or contact your system administrator.",imageHasBeenOptimized:"Image has been optimized for size."},inputAriaLabel:"Enter your response to the question here",editTable:"Edit table"},drawing:{toolbar:{straightedge:"Line",scribble:"Scribble",compass:"Compass",text:"Text",eraser:"Eraser",clear:"Clear",undo:"Undo",redo:"Redo"},textEditor:{placeholder:"Enter text here...",addTextButton:"Add Text"}},mathKeyboardSymbols:{empty:"",x:"x",y:"y",z:"z",a:"a",b:"b",c:"c",d:"d",f:"f",abc:"abc",prime:"Prime/Arcminute",doubleprime:"Double Prime/Arcsecond",dollars:"Dollars",plus:"Plus",minus:"Minus",times:"Multiply",div:"Divide",pm:"Plus or minus",equals:"Equals",greater:"Greater than",less:"Less than",ge:"Greater than or equal to",le:"Less than or equal to",ne:"Not equal to",approx:"Approximately equal to",perp:"Perpendicular to",nsim:"Not similar to",ncong:"Not congruent to",circ:"Composition",propto:"Proportional to",mid:"Vertical line",ngtr:"Not greater than",nless:"Not less than",parentheses:"Group in parentheses",brackets:"Group in brackets",curlybraces:"Group in curly braces",leftbraces:"Group in odd braces",rightbraces:"Group in odd braces",leftbracket:"Left square bracket",rightbracket:"Right square bracket",exponent:"Exponent",square:"Square",subscript:"Subscript",frac:"Fraction using previous expression as numerator",fraction:"Fraction",ratio:"Ratio",percentage:"Percentage",abs:"Absolute value",sqrt:"Square root",cube:"Cube root",nthroot:"Nth root",int:"Integral",sum:"Summation",because:"Because",nabla:"Nabla",isimpliedby:"Is implied by",muchlesserthan:"Much lesser than",muchgreaterthan:"Much greater than",standardbasisK:"Standard basis K",standardbasisJ:"Standard basis J",standardbasisI:"Standard basis I",partial:"Partial Derivative",limit:"Limit x to",vector:"Vector",mathbb:"Real number set",mathbbq:"Q",mathbbn:"N",mathbbz:"Z",mathbbi:"I",mathbbc:"C",imaginary:"Imaginary Number",euler:"Euler Number",alpha:"Alpha",beta:"Beta",gamma:"Gamma",delta:"Delta",epsilon:"Epsilon",zeta:"Zeta",eta:"Eta",theta:"Theta",iota:"Iota",kappa:"Kappa",lambda:"Lambda",mu:"Mu",nu:"Nu",xi:"Xi",omicron:"Omicron",pi:"Pi",rho:"Rho",sigma:"Sigma",tau:"Tau",upsilon:"Upsilon",phi:"Phi",chi:"Chi",psi:"Psi",omega:"Omega",ALPHA:"Alpha (uppercase)",BETA:"Beta (uppercase)",GAMMA:"Gamma (uppercase)",DELTA:"Delta (uppercase)",EPSILON:"Epsilon (uppercase)",ZETA:"Zeta (uppercase)",ETA:"Eta (uppercase)",THETA:"Theta (uppercase)",IOTA:"Iota (uppercase)",KAPPA:"Kappa (uppercase)",LAMBDA:"Lambda (uppercase)",MU:"Mu (uppercase)",NU:"Nu (uppercase)",XI:"Xi (uppercase)",OMICRON:"Omicron (uppercase)",PI:"Pi (uppercase)",RHO:"Rho (uppercase)",SIGMA:"Sigma (uppercase)",TAU:"Tau (uppercase)",UPI:"Upsilon (uppercase)",PHI:"Phi (uppercase)",CHI:"Chi (uppercase)",PSI:"Psi (uppercase)",OMEGA:"Omega (uppercase)",sin:"Sine",cos:"Cosine",tan:"Tangent",arcsin:"Inverse sine",arccos:"Inverse cosine",arctan:"Inverse tangent",cap:"Intersection",union:"Union",in:"Member of",notin:"Not member of",ni:"Contains",subseteq:"Subset",supseteq:"Superset",subset:"Subset (strict)",supset:"Superset (strict)",notsubset:"Not subset (strict)",notsupset:"Not superset (strict)",notsubseteq:"Not subset",notsupseteq:"Not superset",notni:"Does not contain",backslash:"Backslash",slash:"Forward slash",factorial:"Factorial",angle:"Angle",measuredangle:"Measure of angle",parallel:"Parallel to",nparallel:"Not parallel to",sim:"Similar to",cong:"Congruent to",degree:"Degree symbol",triangle:"Triangle",circledot:"Circle",parallelogram:"Parallelogram",overarc:"Arc",leftarrow:"Leftwards arrow",rightarrow:"Rightwards arrow",leftrightarrow:"Left/right arrow",longleftrightarrow:"Long left/right arrow",rightdoublearrow:"Implies equivalence",leftrightdoublearrow:"Material equivalence",overrightarrow:"Ray",overleftarrow:"Left ray",overleftrightarrow:"Line",overline:"Line segment",dot:"Recurring Decimal",longdiv:"Long division",overset:"Oxidation",therefore:"Therefore",infty:"Infinity",matrix:"Matrix",pmatrix:"Matrix bounded by parentheses",bmatrix:"2 x 2 Matrix bounded by brackets",threebmatrix:"3 x 3 Matrix bounded by brackets",inequalities:"System of equations/inequalities",singlebmatrix:"Single Matrix bounded by brackets",Bmatrix:"Matrix bounded by braces",vmatrix:"Matrix bounded by vertical lines",Vmatrix:"Matrix bounded by double vertical lines",ldots:"Horizontal dots (baseline)",cdots:"Horizontal dots (centered)",ddots:"Diagonal dots",vdots:"Vertical dots",cdot:"Dot multiplier",cdotp:"Center dot (punctuation)",response:"Editable {{response}} area",addmatrixcol:"Insert column",addmatrixrow:"Insert row",gram:"Gram",cg:"Centigram",kg:"Kilogram",mg:"Milligram",ng:"Nanogram",meter:"Meter",cm:"Centimeter",km:"Kilometer",mm:"Millimeter",nm:"Nanometer",second:"Second",cs:"Centisecond",ks:"Kilosecond",ms:"Millisecond",ns:"Nanosecond",liter:"Liter",ml:"Millitliter",ug:"Microgram",inch:"Inch",ft:"Foot",mi:"Mile",fl:"Fluid Ounce",cup:"Cup",pt:"Pint",qt:"Quart",gal:"Gallon",oz:"Ounce",lb:"Pound",mug:"Microgram",mus:"Microsecond",mum:"Micrometer",mul:"Microlitre",mol:"Mole",atomic:"Atomic symbol",polyatomic:"Polyatomic ion",superscript:"Superscript",molar:"Molar mass",rightleftharpoons:"Right / left harpoons",leftrightharpoons:"Left / right harpoons",singlebond:"Single bond",doublebond:"Double bond",triplebond:"Triple bond",threedotbond:"Three dot bond",fourdotbond:"Four dot bond",rightarrowbond:"Right arrow bond",leftarrowbond:"Left arrow bond",xrightarrow:"Arrow with superscript and subscript",lfloor:"Left floor",rfloor:"Right floor",lceil:"Left ceiling",rceil:"Right ceiling",uparrow:"Up arrow",downarrow:"Down arrow",equiv:"Equivalence",and:"And",not:"Not",or:"Or",exist:"Exist",exists:"Exists",forall:"Forall",oplus:"Circled plus",zero:"Zero",one:"One",two:"Two",three:"Three",four:"Four",five:"Five",six:"Six",seven:"Seven",eight:"Eight",nine:"Nine",divide:"Divided by",multiply:"Multiplied by",decimal:"Decimal",comma:"Comma",left:"Left",right:"Right",backspace:"Backspace",responseContainerIcon:"Response Container"},mathKeyboardHelp:{title:"Keyboard Shortcuts",shortcuts:"You can always use ctrl + \\ (backslash) to reopen the Math Keyboard.",disclaimer:"Keyboard shortcut combinations may differ from one region to another. These were created using an English: United States keyboard."},mathKeyboardTitle:{handwriting:"Handwriting",qwerty:"Keyboard",basic:"Basic",basic_junior:"Basic Junior",basic_author:"Basic",algebra:"Algebra",comparison:"Comparison",geometry:"Geometry",matrices:"Matrices",trigonometry:"Trigonometry",sets:"Sets",units_si:"Units (SI)",units_us:"Units (US Customary)",greek:"Greek letters",chemistry:"Chemistry",chemistry_author:"Chemistry",grouping:"Grouping Symbols",calculus:"Calculus",misc:"Miscellaneous",discrete:"Discrete",general:"General"},ariaLabel:{stemEnumerationItem:"Item {{index}}",classification:{cell:"Drop response in row {{row}} of column {{column}}",instructions:"Put responses in the correct input to answer the question. Select a response, navigate to the desired input and insert the response. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging with a mouse."},association:{draggableItemContainer:"Container for movable item",draggableItem:"Movable item. {{item}}",instructions:"Put responses in the correct input to answer the question. Select a response, navigate to the desired input and insert the response. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging with a mouse."},audioAdv:{transcriptContent:"Transcript: {{transcript}}"},clozeAssociation:{instructions:"Put responses in the correct input to answer the question. Select a response, navigate to the desired input and insert the response. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging with a mouse."},drawing:{highlight:"To highlight the image, hold space and use your arrow keys.",keyboardPaintable:"Use the arrow keys to move the cursor and hold down the space or enter key to draw.",textEditorMove:"Use the arrow keys to move the text editor."},orderList:{instructions:"Arrange responses in the correct order to answer the question. Select a response, navigate to the desired position and insert response at that position. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can be moved using the up and down arrow keys or by dragging with a mouse."},longTextV2:{toolbar:"Text controls"},mathKeyboard:{title:"Formula keypad",help:"Formula keypad help",close:"Close Formula keypad",symbolGroupRole:"Dropdown",selectSymbolGroup:"Select the symbol group to use",currentSymbolGroup:"The current symbol groups is {{title}}. You can use this dropdown to select a new symbol group or continue to navigate the keyboard using arrow keys"},fileUpload:{title:"File upload question type"},graphPlotting:{title:"Graph Plotting Question",keyboardInstructionsButton:"Keyboard Instructions, press enter or space to display instructions on how to navigate the graph.",keyboardInstructionsCloseButton:"Keyboard instructions, close button",graph:"You have entered the graph.",toolbar:"You are in a toolbar, press tab to enter it and then use the arrows to move around the tools.",plotted:"You have plotted {{shape}}",point:"Point with coordinates {{point}}",circle:"Circle with origin on {{origin}} and passing through {{point}}",segment:"Segment from {{startPoint}} to {{endPoint}}",vector:"Vector from {{startPoint}} to {{endPoint}}",line:"Line passing through {{pointA}} and {{pointB}}",sine:"Sine passing through {{pointA}} and {{pointB}}",ray:"Ray starting on {{pointA}} passing through {{pointB}}",parabola:"Parabola with vertex on {{vertex}} and passing through {{point}}",polygon:"Polygon with coordinates: {{points}}",labelled:"labelled: {{label}}",axisHeading:"Initial graph state",horizontalAxisInfo:"The horizontal axis goes from {{min}} to {{max}} with ticks spaced every {{step}} unit(s).",verticalAxisInfo:"The vertical axis goes from {{min}} to {{max}} with ticks spaced every {{step}} unit(s).",questionResponseShapesHeading:"Created graph shapes"},griddedText:{decimalPointInput:"Enter a decimal point",rangeInput:"enter a value between {{range1}} and {{range2}} .",disclaimer:"Enter either plus or minus for positive or negative value",decimal:"decimal point"},imageUpload:{title:"Image upload question type",toolbar:"Image upload toolbar"},numberLinePlot:{title:"Number Line Plot question"},plainText:{answer:"Answer for {{stimulus}}"},simpleChart:{title:"Simple Chart question"},simpleShading:{title:"Simple Shading Question - Press tab to enter question",cell:"Cell: row {{row}}, column {{column}}"},sortList:{instructions:"To answer, arrange responses in the correct order. Select a response, navigate to the desired position and insert response at that position. Responses can be selected and inserted using the space bar, enter key, left mouse button or touchpad. Responses can also be moved by dragging or by using the up and down arrow keys.",draggableItemContainer:"Container for movable item",draggableItem:"Movable item. {{item}}",direction:{toSource:"Move selected option to highest {{source}} position",toTarget:"Move selected option to highest {{target}} position",moveUpInTarget:"Move selected option up one position",moveDownInTarget:"Move selected option down one position"}},textHighlight:{title:"Text Highlight question"},calculator:{calculatorHeading:"Calculator",closeButton:"Close calculator",inputLabel:"Calculator",toggleUnit:"Angle unit is {{currentUnit}}, click to change to {{newUnit}}",clearEntireInput:"C (Clear the entire input)",clearLastSymbol:"CE (Clear the last symbol entered)",percent:"Percent",squareRoot:"Square root",division:"Division",multiplication:"Multiplication",subtraction:"Subtraction",decimalPoint:"Decimal point",evaluate:"Evaluate equation",addition:"Addition",memoryClear:"MC (Memory Clear)",recallValue:"MR (Recall the value from the calculator's memory)",addToMemory:"M+ (Add the current value to memory)",substractFromMemory:"M- (Subtract the current value from the value in memory)",pi:"Pi",plusOrMinus:"Plus or Minus",leftParenthesis:"Left parenthesis",rightParenthesis:"Right parenthesis",showAdvanced:"Show advanced trigonometric functions",reciprocal:"Reciprocal (1 over x)",exponent:"Exponent (x to the y)",square:"Square (x squared)",naturalLogarithm:"Natural logarithm (logn)",cubicRoot:"Cubic root",nthRoot:"Nth root",eulersNumber:"e (Euler's number)",sine:"Sine",inverseSine:"Inverse sine",cosine:"Cosine",inverseCosine:"Inverse cosine",tangent:"Tangent",inverseTangent:"Inverse Tangent",permutations:"nPr (Permutations)",combinations:"nCr (Combinations)",hyperbolicSine:"Hyperbolic sine",hyperbolicInverseSine:"Hyperbolic inverse sine",hyperbolicCosine:"Hyperbolic cosine",hyperbolicInverseCosine:"Hyperbolic inverse cosine",hyperbolicTangent:"Hyperbolic tangent",hyperbolicInverseTangent:"Hyperbolic inverse tangent",factorial:"Factorial",randomNumber:"Random number"},compass:{moveCenter:"Use the arrow keys to move the compass center",adjustRadius:"Use the arrow keys to adjust radius size",rotateRadius:"Use the arrow keys to rotate the radius arm",draw:"Hold down the space bar and use the arrow keys to draw"},distractorRationale:{distractorRationale:"distractor rationale",perQuestion:"distractor rationale per question",perResponseIncorrect:"distractor rationale per response incorrect",perResponseCorrect:"distractor rationale per response correct"},imagecloze:{text:"Add your responses in the text fields to answer the question. Navigate to the desired text input and type in your response.",dropdown:"Select responses from the drop down fields to answer the question. Navigate to the desired drop down and select your response.",dropdownSelectionOption:"Please select an option - "},imageclozeassociationV2:{dropZonesContainer:"Drop targets"},mcq:{responses:"Responses"},dragDrop:{possibleResponses:"Possible responses",responseZone:"Press a button below to begin moving the response to the drop targets or drop your response here to return it to possible responses pool."},clozeDropdown:{selectOption:"Please select an option - "}},ariaLiveText:{correctResponse:"response - correct",incorrectResponse:"response - incorrect",numberOfCorrectAnswers:"{{number}} correct answers: ",oneCorrectAnswer:"correct answer: ",numberOfIncorrectAnswers:"{{number}} incorrect answers: ",oneIncorrectAnswer:"incorrect answer: ",numberOfExpectedAnswers:"{{number}} expected answers: ",oneExpectedAnswer:"expected answer: ",correct:"{{prefix}}correct",incorrect:"{{prefix}}incorrect",selected:"selected",missed:"{{prefix}} not selected, this is the correct answer",noResponseGiven:"{{prefix}}no response given",minResponseMessage:"{{prefix}} this question requires at least 1 answer",minResponsesMessage:"{{prefix}} this question requires at least {{minSelection}} answers",maxResponseMessage:"{{prefix}} only 1 answer is allowed",maxResponsesMessage:"{{prefix}} only {{maxSelection}} answers are allowed",choiceMatrix:{correctResponse:"Correct response",incorrectResponse:"Incorrect response",expectedResponse:"Expected response",group:"Group: {{group}} - ",noResponse:"no response given. "},classification:{row:"Row {{number}}",col:"Column {{number}}",correct:"correct",incorrect:"incorrect"},graphPlotting:{positionUpdated:"x {{x}}, y {{y}}, is your current position",movingPoint:"You are moving the point at x={{x}}, y={{y}}",pointMoved:"The point has been moved to x={{x}}, y={{y}}"},imageclozeassociationV2:{correctAnswer:"correct answer",incorrectAnswer:"incorrect answer",expectedAnswer:"expected answer",dropTarget:"Drop target: {{target}}. "},orderList:{itemValidity:"Item {{index}}: {{response}} - {{validity}}. ",correctAnswer:"Correct answer for item {{index}}: {{text}}. "},tokenHighlight:{correctAnswers:"correct answers: {{answers}} ",incorrectAnswers:"incorrect answers: {{answers}} ",expectedAnswers:"expected answers: {{answers}} ",explanation:"To interact with this question use tab to move through the text tokens. Use space or enter to select or deselect the relevant tokens"},clozeAssociation:{activatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',activatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected from position {{dropzoneNumber}} of {{totalDropzones}}. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',deactivatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been deselected.',deactivatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been deselected and is back in position {{dropzoneNumber}} of {{totalDropzones}}.',droppedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted in position {{dropzoneNumber}} of {{totalDropzones}}.',droppedResponseBackInList:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted back into the option list.'},association:{activatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',activatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been selected from position {{dropzoneNumber}} of {{totalDropzones}}. Press tab to choose a response area, and spacebar to insert it. Press escape to cancel.',deactivatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been deselected.',deactivatedResponseInDropzone:'The operation has been cancelled. The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been released back into position {{dropzoneNumber}} of {{totalDropzones}} which corresponds to "{{dropzoneLabel}}". You are no longer moving any option.',droppedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted in position {{dropzoneNumber}} of {{totalDropzones}}.',droppedResponseBackInList:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been inserted back into the option list.'},mathKeyboard:{mathKeyboardOpened:"Formula keypad has been opened. Press TAB to use it and then navigate using the arrows.",mathKeyboardClosed:"Formula keypad has been closed. Press Control + Backslash to open it again."}},ariaRoleDescription:{clozeAssociation:{dropzone:"Insert option in position {{dropzoneNumber}} of {{totalDropzones}}.",dropzoneWithResponse:'Insert option in position {{dropzoneNumber}} of {{totalDropzones}}, which currently contains the option "{{response}}" ({{responseNumber}} of {{totalResponses}}).',dropzoneReadOnly:"Empty response in position {{dropzoneNumber}} of {{totalDropzones}}.",dropzoneReadOnlyWithResponse:'Option "{{response}}" ({{responseNumber}} of {{totalResponses}}) in position {{dropzoneNumber}} of {{totalDropzones}}.'},association:{dropzone:'"{{dropzoneLabel}}"',dropzoneWithResponse:'"{{dropzoneLabel}}", which currently contains the option "{{response}}".',dropzoneReadOnly:'Empty response in "{{dropzoneLabel}}".',dropzoneReadOnlyWithResponse:'Option "{{response}}" in "{{dropzoneLabel}}".'}},masking:{ariaLabelMask:"Mask",ariaLabelUnmask:"Unmask"}}},function(t,n,i){"use strict";var u="http://www.w3.org/2000/svg",l={},d={isCanvasSupported:function isCanvasSupported(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},isHtml5AudioSupported:function isHtml5AudioSupported(){return!!document.createElement("audio").canPlayType},isTouchDevice:function isTouchDevice(){return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof DocumentTouch},isTouchScalable:function isTouchScalable(){var t,n=document.querySelector('meta[name="viewport"]'),i=!1;return n&&(i="string"==typeof(t=n.getAttribute("content"))&&t.indexOf("user-scalable=no")>=0),this.isTouchDevice()&&!i},isPointerEventsSupported:function isPointerEventsSupported(){return!!window.PointerEvent},isPassiveEventListenersSupported:function isPassiveEventListenersSupported(){var t=!1;function noop(){}try{window.addEventListener("scroll",noop,{get passive(){return t=!0,!0}}),window.removeEventListener("scroll",noop)}catch(t){}return t},isSvgSupported:function isSvgSupported(){return!!document.createElementNS&&!!document.createElementNS(u,"svg").createSVGRect},isJsonStringifyBroken:function isJsonStringifyBroken(){return!window.JSON||'{"u":"ó"}'!==window.JSON.stringify({u:"ó"})},isPlaceholderSupported:function isPlaceholderSupported(){return"placeholder"in document.createElement("input")},getOs:function getOs(){var t=navigator.appVersion,n="unknown";return-1!==t.indexOf("Win")&&(n="windows"),-1!==t.indexOf("Mac")&&(n="osx"),-1!==t.indexOf("X11")&&(n="unix"),-1!==t.indexOf("Linux")&&(n="linux"),n},getRecorderMediaType:function getRecorderMediaType(t){var n;if("undefined"!=typeof MediaRecorder)for(var i=0;i<t.length;i++)if(MediaRecorder.isTypeSupported(t[i])){n=t[i];break}return n},isTextareaMaxlengthSupported:function isTextareaMaxlengthSupported(){return void 0===document.createElement("textarea").maxLength},isDropzoneSupported:function isDropzoneSupported(){var t=document.createElement("span");return"webkitdropzone"in t||"mozdropzone"in t||"msdropzone"in t||"odropzone"in t},hasLayout:function hasLayout(){return!0===(document.body.currentStyle&&document.body.currentStyle.hasLayout)},isGetUserMediaSupported:function isGetUserMediaSupported(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices},isMediaCaptureSupported:function isMediaCaptureSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}};function getSupport(t,n){return function(){var i=t;return n&&(i+=JSON.stringify(arguments)),l.hasOwnProperty(i)?l[i]:!!d[t]&&(l[i]=d[t].apply(this,arguments),l[i])}}n.a={isCanvasSupported:getSupport("isCanvasSupported"),isHtml5AudioSupported:getSupport("isHtml5AudioSupported"),isTouchDevice:getSupport("isTouchDevice"),isTouchScalable:getSupport("isTouchScalable"),isPointerEventsSupported:getSupport("isPointerEventsSupported"),isPassiveEventListenersSupported:getSupport("isPassiveEventListenersSupported"),isJsonStringifyBroken:getSupport("isJsonStringifyBroken"),isSvgSupported:getSupport("isSvgSupported"),isPlaceholderSupported:getSupport("isPlaceholderSupported"),isGetUserMediaSupported:getSupport("isGetUserMediaSupported"),isMediaCaptureSupported:getSupport("isMediaCaptureSupported"),getOs:getSupport("getOs"),isTextareaMaxlengthSupported:getSupport("isTextareaMaxlengthSupported"),isDropzoneSupported:getSupport("isDropzoneSupported"),hasLayout:getSupport("hasLayout"),getRecorderMediaType:getSupport("getRecorderMediaType",!0)}},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(8);n.a=d.a.extend({initialize:function initialize(){return this.scorer=null,d.a.prototype.initialize.apply(this,arguments)},updateFeedbackAttemptsCount:function updateFeedbackAttemptsCount(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.get("response");n&&(n.feedbackAttemptsCount=t)},processActivityFlags:function processActivityFlags(){this._updateQuestionBasedOnActivity(this.get("question"))},_updateQuestionBasedOnActivity:function _updateQuestionBasedOnActivity(t){var n=this.activity.get("allow_negative_scores");return!l.a.isEmpty(t.validation)&&l.a.isBoolean(n)&&(t.validation.allow_negative_scores=n),t},getJsonToCapture:function getJsonToCapture(){var t=d.a.prototype.getJsonToCapture.apply(this,arguments);return t.question=this._updateQuestionBasedOnActivity(t.question),t},getScorerClass:function getScorerClass(){throw new Error("getScorerClass method not implemented")},canValidateResponse:function canValidateResponse(){return this.getScorer().canValidateResponse()},isResponseValid:function isResponseValid(){return this.getScorer().isValid()},getResponseValidDetailed:function getResponseValidDetailed(){var t={correct:this.isResponseValid()},n=this.getPartialValidation();return l.a.isNull(n)||(t.partial=n),t},getPartialValidation:function getPartialValidation(){var t=this.getScorer();return l.a.isFunction(t.validateIndividualResponses)?t.validateIndividualResponses():null},getPartialScoring:function getPartialScoring(){var t=this.get("question");return!l.a.isObject(t.validation)||!l.a.isBoolean(t.validation.partial_scoring)||t.validation.partial_scoring},getShowPartialValidationUI:function getShowPartialValidationUI(){var t=this.get("question").validation||{};return!!t.scoring_type||(t.show_partial_ui?t.show_partial_ui:void 0)},getShowGlobalValidationUi:function getShowGlobalValidationUi(){var t=this.get("question").validation||{};return t.scoring_type?"exactMatch"===t.scoring_type&&this.showsGlobalValUiForExactMatch():!this.getPartialScoring()},getMappableResponses:function getMappableResponses(){return this.getResponseValue()},getMappableValidation:function getMappableValidation(){return this.getResponseValidDetailed().partial},mapValidationMetadata:function mapValidationMetadata(t){var n,i=this.getMetadata()&&this.getMetadata()[t],u=this.getMappableValidation(),d=this.getMappableResponses(),p=l.a.isArray(i),h=l.a.isArray(d),g=l.a.isArray(u);return!!(p&&h&&g)&&(n={correct:[],incorrect:[],unattempted:[]},l.a.each(l.a.keys(n),(function(t){n[t]=this.mapValidationMetadataToResponseState({targetState:t,metadata:i})}),this),n)},mapValidationMetadataToResponseState:function mapValidationMetadataToResponseState(t){var n=this.getMappableValidation(),i=this.getMappableResponses(),u=[];return l.a.each(i,(function(i,d){(function isTargetResponse(i,u){var d;return"unattempted"===t.targetState?l.a.isNull(i):(d="correct"===t.targetState,l.a.exists(i)&&n[u]===d)})(i,d)&&u.push({value:i,metadata:t.metadata[d],index:d})})),u},showsGlobalValUiForExactMatch:function showsGlobalValUiForExactMatch(){var t=!l.a.contains(["shorttext","formula","formulaV2"],this.get("type"));return"mcq"===this.get("type")&&(t=!!this.get("question").multiple_responses),t},callValidate:function callValidate(t){this.canValidateResponse()&&this.trigger(this.EVENT.CALLVALIDATE,t)},getValidResponse:function getValidResponse(){var t,n,i,u;return this.canValidateResponse()&&((i=(n=this.get("question")).valid_responses||n.validation.valid_responses)?t=(u=l.a.map(i,l.a.first)).length&&u[0]?{value:u}:{value:l.a.pluck(i,"value")}:(this.getScorer().suggestedResponse&&(t=this.getScorer().suggestedResponse()),!t&&n.validation.valid_response&&((t=n.validation.valid_response).value||(t={value:t})))),t||{}}})},function(t,n,i){"use strict";var u=i(1),l=i.n(u),d=i(0),p=i.n(d),h=i(22),g=i(43),v=(i(5),i(20)),y=i(16),S=v.a.extend({SELECTORS:{RESPONSE_WRAPPER:".lrn-response-validate-wrapper"},initialize:function initialize(){this.$responseWrapper=this.view.$(this.SELECTORS.RESPONSE_WRAPPER)},apply:function apply(){y.a.setReviewAriaLabel({$el:this.$responseWrapper,ariaLabel:this.getGlobalWrapperAriaLabel(this.$responseWrapper),keepChildrenVisible:!0})},restore:function restore(){y.a.unsetReviewAriaLabel(this.$responseWrapper)},getGlobalWrapperAriaLabel:function getGlobalWrapperAriaLabel(t){var n="lrn_correct",i="lrn_incorrect",u="response - correct",l="response - incorrect";return t.hasClass(n)?u:t.hasClass(i)?l:""}}),E=v.a.extend({SELECTORS:{ACCESSIBILITY_DEST:"[data-lrn-access-review-dest]"},initialize:function initialize(t,n){this.getTextFn=!!p.a.isFunction(n.getSourceText)&&n.getSourceText},apply:function apply(){this.setAriaLabelsOnDest()},restore:function restore(){this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){y.a.unsetReviewAriaLabel(l()(this))}))},setAriaLabelsOnDest:function setAriaLabelsOnDest(){var t=this;this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){var n=l()(this),i=y.a.getSourceElement(n);y.a.setReviewAriaLabel({$el:n,ariaLabel:t.getReviewAriaLabel(i,t.getTextFn),onLabelClick:function onLabelClick(){var i,u,l,d=[".lrn_draggable","input","select"];for(l=0;l<d.length&&(i=d[l],!(u=n.find(i)).length);l++);n.trigger("click"),u&&u.length?u.is("input")||u.is("select")?u.focus():u.trigger("click"):t.view.clearValidationUI()}})}))},getReviewAriaLabel:function getReviewAriaLabel(t,n){t=t.clone();var i=y.a.getResponseData(t,n);return p.a.toArray(i).filter((function(t){return t})).join(" - ")}}),w={STATE:{INITIAL:"initial",REVIEW:"review"},events:{"blur .lrn_validate:not([disabled])":"clearAnnouncedCheckAnswers"},accessibility:{helperTypes:{global:S,live:g.a,label:E}},processAccessibility:function processAccessibility(t){var n=(t=t||{})?t.state:this.STATE.INITIAL,i=this.getAccessibilityHelpers(t);n===this.STATE.REVIEW?p.a.invoke(i,"apply"):p.a.invoke(i,"restore")},getAccessibilityHelpers:function getAccessibilityHelpers(t){return this._a11yHelpers||(this._a11yHelpers=[],p.a.each(this.accessibility.helperTypes,(function(n){this._a11yHelpers.push(new n(this,t))}),this)),this._a11yHelpers},clearAnnouncedCheckAnswers:function clearAnnouncedCheckAnswers(){this.$el.find(".lrn-accessibility-arialive").text("")}},A=i(11),T=h.a.extend({showMasking:!1,events:{"click .lrn_validate:not([disabled])":"validateResponse"},initialize:function initialize(){h.a.prototype.initialize.call(this);var t=this.model,n=t.get("question"),i=t.get("response");this.validationAttempts=i&&i.feedbackAttemptsCount||0,this.validationAttemptsLimit=0,n.feedback_attempts&&(p.a.isString(n.feedback_attempts)&&("unlimited"===n.feedback_attempts.toLowerCase()?n.feedback_attempts=0:n.feedback_attempts=parseInt(n.feedback_attempts,10)),p.a.isNumber(n.feedback_attempts)&&(this.validationAttemptsLimit=n.feedback_attempts))},addRenderingLogic:function addRenderingLogic(){var t=this.model.get("question"),n=this.activity.get("state")===this.activity.STATE.REVIEW,i=this.activity.get("showCorrectAnswers");t.ui_style&&p.a.isString(t.ui_style.validation_stem_numeration)&&(this.displayLogic.validation_stem_numeration=t.ui_style.validation_stem_numeration),this.displayLogic.isReviewState=this.activity.get("state")===this.activity.STATE.REVIEW,this.displayLogic.isPreviewState=this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic.showValidationButton=!n&&t.instant_feedback&&!t.validation_group&&this.model.canValidateResponse(),this.displayLogic.showValidation=!!this.model.canValidateResponse(),this.displayLogic.displayCorrectAnswer=p.a.isUndefined(i)&&n&&this.displayLogic.showValidation||!!i},renderViewContent:function renderViewContent(){h.a.prototype.renderViewContent.apply(this,arguments),this.updateCheckAnswerButtonState()},renderValidatableUI:function renderValidatableUI(){this.displayLogic.showValidation&&this.showValidationUI(),this.displayLogic.displayCorrectAnswer&&this.showCorrectAnswer(),this.processAccessibility({state:this.STATE.REVIEW})},validateResponse:function validateResponse(t,n){var i,u=this.activity.get("state")===this.activity.STATE.REVIEW;if(!u&&this.model.isAttempted()&&(this.getFacade().trigger("beforeValidate",{preventDefault:function preventDefault(){return i=!0}}),i))return;this.model.canValidateResponse()&&(this.showingValidationUI&&this.clearValidationUI(),(this.isValidationAllowed()||n)&&(this.model.hasResponse()||this.displayLogic.displayCorrectAnswer&&u)&&(this.renderValidatableUI(),n||this.incrementValidationAttempts(),this.updateCheckAnswerButtonState(),this.getFacade().trigger("validated")))},isValidationAllowed:function isValidationAllowed(){return 0===this.validationAttemptsLimit||this.validationAttempts<this.validationAttemptsLimit},updateCheckAnswerButtonState:function updateCheckAnswerButtonState(){this.isValidationAllowed()||this.$(".lrn_btn.lrn_validate").attr("disabled","disabled")},incrementValidationAttempts:function incrementValidationAttempts(){var t=this.model,n=t.getResponseValue();p.a.isEqual(n,this.previousResponseValue)||(this.previousResponseValue=p.a.clone(n),this.validationAttempts++,t.updateFeedbackAttemptsCount(this.validationAttempts))},clearValidationUI:function clearValidationUI(){this.$el.removeClass("lrn_display_correct_answer_enabled"),this._restoreDisplayCorrectAnswer(),this.processAccessibility()},showCorrectAnswer:function showCorrectAnswer(){throw new Error("Unimplemented function showCorrectAnswer for question type:"+this.model.get("type"))},callValidateHandler:function callValidateHandler(t){this.clearValidationUI(),this._defaultDisplayCorrectAnswer=this.displayLogic.displayCorrectAnswer;var n=!(!t||!t.showCorrectAnswer&&!t.showCorrectAnswers),i=p.a.isBoolean(t.feedbackAttempts)?t.feedbackAttempts:!!t.feedback_attempts;t&&(this.displayLogic.displayCorrectAnswer=n,this.validateResponse(void 0,!i)),n&&this.showCorrectAnswer()},showValidationUI:function showValidationUI(){var t=this.model.validateResponse();return this.showingValidationUI=!0,!(this.model.getShowGlobalValidationUi()&&(this.model.hasResponse()&&this.$(".lrn-response-validate-wrapper").removeClass("lrn_correct lrn_incorrect").addClass(this.model.isResponseValid()?"lrn_correct":"lrn_incorrect"),!this.model.getShowPartialValidationUI()))&&t},initialisationCompleted:function initialisationCompleted(){h.a.prototype.initialisationCompleted.apply(this,arguments),this.model.canValidateResponse()&&this.model.on(this.model.EVENT.CALLVALIDATE,this.callValidateHandler,this)},masking:function masking(t){this.showMasking=t,this.showMasking?this.enableMaskingUI():this.disableMaskingUI()},createMaskingSVG:function createMaskingSVG(t,n){for(var i="",u=15;u<t+n;u+=15)i+='<line class="lrn-line1" x1="0" y1='.concat(u," x2=").concat(u,' y2="0"></line>');return'\n            <svg class="lrn-mask" xmlns="http://www.w3.org/2000/svg">\n                <rect x="0" y="0" width="100%" height="100%" fill="transparent"/>\n                '.concat(i,"\n            </svg>\n        ")},toggleMasking:function toggleMasking(){if(this.showMasking){var t=arguments[0].currentTarget?l()(arguments[0].currentTarget):arguments[0],n=t.find(".lrn-mask"),i=t[0].clientWidth,u=t[0].clientHeight;this.maskingSVG=this.createMaskingSVG(i,u),n.length?n.remove():t.is(":empty")||(t.append(l()(this.maskingSVG)),this.questionFacade.trigger(this.model.EVENT.MASKED,this.model.get("response_id")))}},enableMaskingUI:function enableMaskingUI(){this.$el.addClass("lrn-masking")},disableMaskingUI:function disableMaskingUI(){this.$el.removeClass("lrn-masking")},clearMaskingUI:function clearMaskingUI(){this.$(".lrn-mask").remove(),this.$(".lrn-mask-strike-through :only-child").unwrap()},getCorrectResponseTextByIndex:function getCorrectResponseTextByIndex(t){throw new Error("Unimplemented function getCorrectResponseTextByIndex for question type: ".concat(this.model.get("type")))},shouldDisplayCorrectAnswerList:function shouldDisplayCorrectAnswerList(){throw new Error("Unimplemented function shouldDisplayCorrectAnswerList for question type: ".concat(this.model.get("type")))},showCorrectAnswerList:function showCorrectAnswerList(){var t,n,i,u;if(this.displayLogic.displayCorrectAnswer&&!this.showingAnswer){if(i=this.displayLogic.isMath||this.model.get("question")&&this.model.get("question").is_math,u=this.model.get("question").type,this.$el.addClass("lrn_display_correct_answer_enabled"),this.$correctAnswerList||(this.$correctAnswerList=this.$(".lrn_correctAnswerList")),t="",n=this.getValidatedResponses(),p.a.contains(["formulaV2","chemistry"],u)){var l,d,showCorrectAnswerList=!1;if(p()(n).forEach((function(t,n){(p.a.isBoolean(t)?!1===t:this.shouldDisplayCorrectAnswerList(t,n))&&(showCorrectAnswerList=!0)}),this),showCorrectAnswerList&&(l=this.model.getValidResponse().value,p.a.isArray(l)&&l.length)){for(var h=0;h<l.length;h++){var g=l[h].value;if(p.a.isString(g)){d="\\("+p.a.escape(g)+"\\)";break}}d&&(t='\n                                <li>\n                                    <span class="lrn_responseIndex">0</span>\n                                    <span class="lrn_responseText">'.concat(d,"</span>\n                                </li>\n                            "))}}else p()(n).forEach((function(i,u){var l=p.a.isBoolean(i)?!1===i:this.shouldDisplayCorrectAnswerList(i,u),d=this.getCorrectResponseTextByIndex(u);if(l){var h="<li>";p.a.isEmpty(d)&&(d="&nbsp;"),n.length&&(h+='<span class="lrn_responseIndex">'.concat(this.getResponseIndexLabel(u),"</span>")),h+='<span class="lrn_responseText">'+d+"</span>",t+=h+="</li>"}}),this);t&&(this.$correctAnswerList.empty().append(t),this.$(".lrn_correctAnswers").removeClass("lrn_hide")),i&&(this.mathquillRendering()?this.renderMathquill():A.a&&A.a.render()),this.showingAnswer=!0}},getValidatedResponses:function getValidatedResponses(){var t,n,i=this.model.validateResponse();if(p.a.isBoolean(i)&&(i=[i]),(!i||!i.length)&&this.model.canValidateResponse()){n=0,t=this.model.getValidResponse(),p.a.isArray(t.value)?n=t.value.length:p.a.isArray(t)?n=t.length:p.a.isString(t)&&(n=1),i=[];for(var u=0;u<n;u++)i.push(!1)}return i},clearCorrectAnswers:function clearCorrectAnswers(){this.showingAnswer&&(this.$(".lrn_correctAnswers").addClass("lrn_hide"),this.$(".lrn_responseIndex").remove(),this.$correctAnswerList&&this.$correctAnswerList.empty(),this.$("[data-lrn-suggested-answer-template]").remove(),this.showingAnswer=!1,this.processAccessibility())},getResponseIndexLabel:function getResponseIndexLabel(t){var n=1;if(this.displayLogic.validation_stem_numeration)switch(this.displayLogic.validation_stem_numeration){case"number":break;case"lower-alpha":n="a";break;case"upper-alpha":n="A";break;default:delete this.displayLogic.validation_stem_numeration}return this.displayLogic.validation_stem_numeration&&"number"!==this.displayLogic.validation_stem_numeration?String.fromCharCode(n.charCodeAt(0)+t):n+t},_restoreDisplayCorrectAnswer:function _restoreDisplayCorrectAnswer(){p.a.isUndefined(this._defaultDisplayCorrectAnswer)||(this.displayLogic.displayCorrectAnswer=this._defaultDisplayCorrectAnswer,delete this._defaultDisplayCorrectAnswer)}});p.a.deepExtend(T.prototype,w);n.a=T},function(t,n){!function(t,n,i){"use strict";if(t.MutationObserver&&"undefined"!=typeof HTMLElement){var u,l=0,d=(u=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector,{matchesSelector:function(t,n){return t instanceof HTMLElement&&u.call(t,n)},addMethod:function(t,n,i){var u=t[n];t[n]=function(){return i.length==arguments.length?i.apply(this,arguments):"function"==typeof u?u.apply(this,arguments):void 0}},callCallbacks:function(t,n){n&&n.options.onceOnly&&1==n.firedElems.length&&(t=[t[0]]);for(var i,u=0;i=t[u];u++)i&&i.callback&&i.callback.call(i.elem,i.elem);n&&n.options.onceOnly&&1==n.firedElems.length&&n.me.unbindEventWithSelectorAndCallback.call(n.target,n.selector,n.callback)},checkChildNodesRecursively:function(t,n,i,u){for(var l,p=0;l=t[p];p++)i(l,n,u)&&u.push({callback:n.callback,elem:l}),l.childNodes.length>0&&d.checkChildNodesRecursively(l.childNodes,n,i,u)},mergeArrays:function(t,n){var i,u={};for(i in t)t.hasOwnProperty(i)&&(u[i]=t[i]);for(i in n)n.hasOwnProperty(i)&&(u[i]=n[i]);return u},toElementsArray:function(n){return void 0===n||"number"==typeof n.length&&n!==t||(n=[n]),n}}),p=function(){var EventsBucket=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return EventsBucket.prototype.addEvent=function(t,n,i,u){var l={target:t,selector:n,options:i,callback:u,firedElems:[]};return this._beforeAdding&&this._beforeAdding(l),this._eventsBucket.push(l),l},EventsBucket.prototype.removeEvent=function(t){for(var n,i=this._eventsBucket.length-1;n=this._eventsBucket[i];i--)if(t(n)){this._beforeRemoving&&this._beforeRemoving(n);var u=this._eventsBucket.splice(i,1);u&&u.length&&(u[0].callback=null)}},EventsBucket.prototype.beforeAdding=function(t){this._beforeAdding=t},EventsBucket.prototype.beforeRemoving=function(t){this._beforeRemoving=t},EventsBucket}(),MutationEvents=function(n,u){var l=new p,h=this,g={fireOnAttributesModification:!1};return l.beforeAdding((function(i){var l,d=i.target;d!==t.document&&d!==t||(d=document.getElementsByTagName("html")[0]),l=new MutationObserver((function(t){u.call(this,t,i)}));var p=n(i.options);l.observe(d,p),i.observer=l,i.me=h})),l.beforeRemoving((function(t){t.observer.disconnect()})),this.bindEvent=function(t,n,i){n=d.mergeArrays(g,n);for(var u=d.toElementsArray(this),p=0;p<u.length;p++)l.addEvent(u[p],t,n,i)},this.unbindEvent=function(){var t=d.toElementsArray(this);l.removeEvent((function(n){for(var u=0;u<t.length;u++)if(this===i||n.target===t[u])return!0;return!1}))},this.unbindEventWithSelectorOrCallback=function(t){var n,u=d.toElementsArray(this),p=t;n="function"==typeof t?function(t){for(var n=0;n<u.length;n++)if((this===i||t.target===u[n])&&t.callback===p)return!0;return!1}:function(n){for(var l=0;l<u.length;l++)if((this===i||n.target===u[l])&&n.selector===t)return!0;return!1},l.removeEvent(n)},this.unbindEventWithSelectorAndCallback=function(t,n){var u=d.toElementsArray(this);l.removeEvent((function(l){for(var d=0;d<u.length;d++)if((this===i||l.target===u[d])&&l.selector===t&&l.callback===n)return!0;return!1}))},this},h=new function(){var t={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function nodeMatchFunc(t,n,u){return!(!d.matchesSelector(t,n.selector)||(t._id===i&&(t._id=l++),-1!=n.firedElems.indexOf(t._id)))&&(n.firedElems.push(t._id),!0)}var n=(h=new MutationEvents((function getArriveObserverConfig(t){var n={attributes:!1,childList:!0,subtree:!0};return t.fireOnAttributesModification&&(n.attributes=!0),n}),(function onArriveMutation(t,n){t.forEach((function(t){var i=t.addedNodes,u=t.target,l=[];null!==i&&i.length>0?d.checkChildNodesRecursively(i,n,nodeMatchFunc,l):"attributes"===t.type&&nodeMatchFunc(u,n,l)&&l.push({callback:n.callback,elem:u}),d.callCallbacks(l,n)}))}))).bindEvent;return h.bindEvent=function(i,u,l){void 0===l?(l=u,u=t):u=d.mergeArrays(t,u);var p=d.toElementsArray(this);if(u.existing){for(var h=[],g=0;g<p.length;g++)for(var v=p[g].querySelectorAll(i),y=0;y<v.length;y++)h.push({callback:l,elem:v[y]});if(u.onceOnly&&h.length)return l.call(h[0].elem,h[0].elem);setTimeout(d.callCallbacks,1,h)}n.call(this,i,u,l)},h},g=new function(){var t={};function nodeMatchFunc(t,n){return d.matchesSelector(t,n.selector)}var n=(g=new MutationEvents((function getLeaveObserverConfig(){return{childList:!0,subtree:!0}}),(function onLeaveMutation(t,n){t.forEach((function(t){var i=t.removedNodes,u=[];null!==i&&i.length>0&&d.checkChildNodesRecursively(i,n,nodeMatchFunc,u),d.callCallbacks(u,n)}))}))).bindEvent;return g.bindEvent=function(i,u,l){void 0===l?(l=u,u=t):u=d.mergeArrays(t,u),n.call(this,i,u,l)},g};n&&exposeApi(n.fn),exposeApi(HTMLElement.prototype),exposeApi(NodeList.prototype),exposeApi(HTMLCollection.prototype),exposeApi(HTMLDocument.prototype),exposeApi(Window.prototype);var v={};return exposeUnbindApi(h,v,"unbindAllArrive"),exposeUnbindApi(g,v,"unbindAllLeave"),v}function exposeUnbindApi(t,n,i){d.addMethod(n,i,t.unbindEvent),d.addMethod(n,i,t.unbindEventWithSelectorOrCallback),d.addMethod(n,i,t.unbindEventWithSelectorAndCallback)}function exposeApi(t){t.arrive=h.bindEvent,exposeUnbindApi(h,t,"unbindArrive"),t.leave=g.bindEvent,exposeUnbindApi(g,t,"unbindLeave")}}(window,"undefined"==typeof jQuery?null:jQuery,void 0)},function(t,n,i){"use strict";var u,l=i(0),d=i.n(l),p=i(21),h=i(25);function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var g=p.a.actionTypes,v=(_defineProperty(u={},g.QUESTION_TOGGLE_DISABLED,(function(t,n){return{disabled:n.disabled}})),_defineProperty(u,g.QUESTION_SET_MASKING_STATE,(function(t,n){return{inMaskingState:n.inMaskingState,maskingMode:n.maskingMode}})),_defineProperty(u,g.QUESTION_TOGGLE_COMPONENT_MASK,(function(t,n){var i=n.maskId,u=t.maskIds||[],l=u.indexOf(i);return l>=0?u.splice(l,1):u.push(i),{maskIds:u}})),_defineProperty(u,g.QUESTION_UPDATE_RESPONSE_VALUE,(function(){return{isAttempted:!0}})),_defineProperty(u,g.QUESTION_NOTIFY_MATH_RENDERED,(function(t,n){return{cacheRenderedMath:n.cacheRenderedMath}})),_defineProperty(u,g.SET_LEGACY_ATTRIBUTES,(function(t,n){var i={};return d.a.isObject(n.attributes)&&(i.__legacyAttributes=n.attributes),d()({}).assign(t,i)})),u);n.a=Object(h.a)(v,{inMaskingState:!1,disabled:!1})},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(27),p=i(14);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function _get(t,n,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,n,i){var u=function _superPropBase(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=_getPrototypeOf(t)););return t}(t,n);if(u){var l=Object.getOwnPropertyDescriptor(u,n);return l.get?l.get.call(i):l.value}})(t,n,i||t)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,u=_getPrototypeOf(t);if(n){var l=_getPrototypeOf(this).constructor;i=Reflect.construct(u,arguments,l)}else i=u.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,n){if(n&&("object"===_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ValidatableDataService,t);var n=_createSuper(ValidatableDataService);function ValidatableDataService(){var t;_classCallCheck(this,ValidatableDataService);for(var i=arguments.length,u=new Array(i),l=0;l<i;l++)u[l]=arguments[l];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(u))),"VALIDATION_STATES",{CORRECT:"correct",INCORRECT:"incorrect"}),t}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(ValidatableDataService,[{key:"getInitialState",value:function getInitialState(){var t=_get(_getPrototypeOf(ValidatableDataService.prototype),"getInitialState",this).call(this),n=this.canCheckAnswer,i=this.canShowCorrectAnswers,u=this.canShowGlobalValidationUI,d=this.feedbackAttemptsCount,h=this.feedbackAttemptsLimit,g=this.isReviewState,v=this.questionLevelDistractorRationale,y=this.validationState,S=this.validationStemNumeration,E=this.getActivityShowDistractorRationale(),w=E.perResponse!==p.d?this.getResponseLevelDistractorRationale():null;return l.a.extend({},t,{validatable:{ariaGlobal:{visible:!1},ariaLive:{visible:!1},canCheckAnswer:n,canShowCorrectAnswers:i,canShowGlobalValidationUI:u,feedbackAttemptsCount:d,feedbackAttemptsLimit:h,isShowingCorrectAnswers:g&&i,questionLevelDistractorRationale:v,responseLevelDistractorRationale:w,showDistractorRationale:E,suggestedResponses:g?this.getSuggestedResponses():null,validatedEventRequestCount:0,validatedResponses:g&&this.canValidateResponse()?this.getValidatedResponses():null,validationState:y,validationStemNumeration:S}})}},{key:"getValidatedResponses",value:function getValidatedResponses(){}},{key:"getMappedValidatedResponsesData",value:function getMappedValidatedResponsesData(t){}},{key:"getMappedSuggestedResponsesData",value:function getMappedSuggestedResponsesData(t){}},{key:"getAriaLiveMessage",value:function getAriaLiveMessage(t){}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var t,n,i,u=this.model;if(!this.canValidateResponse())return{};var d=this.question;return(n=d.valid_responses||l.a.getNested(d,"validation.valid_responses"))?(i=l.a.first(n))&&(t={value:i}):(u.getScorer().suggestedResponse&&(t=u.getScorer().suggestedResponse()),!t&&d.validation&&d.validation.valid_response&&((t=d.validation.valid_response).value||(t={value:t}))),t||{}}},{key:"getActivityShowDistractorRationale",value:function getActivityShowDistractorRationale(){var t=this.activity.get("show_distractor_rationale");return l.a.isObject(t)?Object(p.g)({perQuestion:t.per_question,perResponse:t.per_response}):Object(p.g)(t)}},{key:"getResponseLevelDistractorRationale",value:function getResponseLevelDistractorRationale(){var t=this.questionFacade;return t&&t.mapValidationMetadata("distractor_rationale_response_level")||null}},{key:"updateFeedbackAttemptsCount",value:function updateFeedbackAttemptsCount(t){this.model.updateFeedbackAttemptsCount(t)}},{key:"feedbackAttemptsCount",get:function get(){var t=this.model.get("response");return t&&t.feedbackAttemptsCount||0}},{key:"feedbackAttemptsLimit",get:function get(){if(l.a.isUndefined(this.data.feedbackAttempts)){var t=this.question.feedback_attempts||0;l.a.isString(t)&&(t="unlimited"===t.toLowerCase()?1/0:parseInt(t,10)),this.data.feedbackAttempts=t||1/0}return this.data.feedbackAttempts}},{key:"canCheckAnswer",get:function get(){var t=this.question,n=!!this.canValidateResponse();return!this.isReviewState&&t.instant_feedback&&!t.validation_group&&n}},{key:"canShowCorrectAnswers",get:function get(){if(l.a.isUndefined(this.data.canShowCorrectAnswers)){var t=this.activity.get("showCorrectAnswers"),n=this.canValidateResponse(),i=this.isReviewState;if(l.a.isBoolean(t))return t;this.data.canShowCorrectAnswers=!!(l.a.isUndefined(t)&&i&&n)}return this.data.canShowCorrectAnswers}},{key:"validationState",get:function get(){var t=this.isReviewState,n=this.canShowGlobalValidationUI,i=this.VALIDATION_STATES,u=i.CORRECT,d=i.INCORRECT;if(t&&n){var p=this.isResponseValid();if(l.a.isBoolean(p))return p?u:d}return null}},{key:"validationStemNumeration",get:function get(){var t=this.data;if(l.a.isUndefined(t.validationStemNumeration)){var n=this.question.validation_stem_numeration||l.a.getNested(this.question,"ui_style.validation_stem_numeration");l.a.contains(["number","lower-alpha","upper-alpha"],n)||(n="number"),t.validationStemNumeration=n}return t.validationStemNumeration}},{key:"canShowGlobalValidationUI",get:function get(){if(!this.canValidateResponse())return!1;var t=this.question,n=this.scoringType;if(n){var i=function(t){var n=!l.a.contains(["formula","formulaV2"],t.type);return"mcq"===t.type?!!t.multiple_responses:n}(t);return"exactMatch"===n&&i}return!this.model.getPartialScoring()}},{key:"scoringType",get:function get(){return(this.question.validation||{}).scoring_type}},{key:"questionLevelDistractorRationale",get:function get(){return l.a.getNested(this.question,"metadata.distractor_rationale")||null}}]),ValidatableDataService}(d.a);h.prototype.EXPOSED_METHODS=d.a.prototype.EXPOSED_METHODS.concat(["getActivityShowDistractorRationale","getAriaLiveMessage","getMappedSuggestedResponsesData","getMappedValidatedResponsesData","getResponseLevelDistractorRationale","getSuggestedResponses","getValidatedResponses","updateFeedbackAttemptsCount"]),n.a=h},function(t,n,i){"use strict";var u=i(0),l=i.n(u),d=i(5),p=i.n(d),h=i(23),g=i(21);function legacyTriggerEmbeddedFeaturesAction(t,n){t.getStore().dispatch(g.a.legacyTriggerEmbeddedFeaturesAction(n))}var v=i(4);function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var y=function(){function QuestionFacade(t){!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,QuestionFacade);var n=t.model;this.view=t,this.model=n,t.simpleFeatureFacades=t.simpleFeatureFacades||{},n.on(n.EVENT.MODIFIED,(function(){this.facade.trigger("change changed")}),this)}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(QuestionFacade,[{key:"facade",get:function get(){var t=this;if(this._facade)return this._facade;var n=this.view,i=this.model,u=i.activity.get("type");if(this._facade={on:p.a.Events.on,off:p.a.Events.off,once:p.a.Events.once,trigger:p.a.Events.trigger,response:{getMetadata:function getMetadata(){return i.getResponseMetadata()},setMetadata:function setMetadata(t){return i.setResponseMetadata(t)}},enable:function enable(){return n.setDisabled(!1)},disable:function disable(){return n.setDisabled(!0)},isEnabled:function isEnabled(){return!n.getStore().getState().base.disabled||!1},getAttemptedStatus:function getAttemptedStatus(){return{hasReachedMinLimit:i.hasReachedMinLimit()}},getMetadata:function getMetadata(){return i.getMetadataForClient()},getQuestion:function getQuestion(){return i.getQuestionJsonForClient()},getResponse:function getResponse(){return i.getResponseJsonForClient()},getScore:function getScore(){return l.a.isFunction(i.getScore)?i.getScore():null},isAttempted:function isAttempted(){return i.isAttempted()},isValid:function isValid(t){if(l.a.isFunction(i.canValidateResponse)&&i.canValidateResponse()&&i.hasResponse())return t?i.getResponseValidDetailed():i.isResponseValid()},validate:function validate(){l.a.isFunction(n.callValidate)&&n.callValidate.apply(n,arguments)},mapValidationMetadata:function mapValidationMetadata(){var t=i.mapValidationMetadata;return t.apply(i,arguments)},checkImages:function checkImages(){if(n.imageLoader)return n.imageLoader.checkImages()},checkValidation:function checkValidation(){var t=i.canValidateResponse;return{has_validation:!!l.a.isFunction(t)&&!!t.apply(i)}},begin:function begin(){(function legacyBeginEmbeddedFeatures(t){var n=t.getDataService(),i=n.isReviewState;return!(l.a.isEmpty(n.get("legacyFeatures"))||i)&&(t.getStore().dispatch(g.a.legacyBeginEmbeddedFeatures()),!0)})(n)?"begin"===i.get("question").begin_response_on&&n.beginResponse():n.beginResponse()},pause:function pause(){l.a.each(n.simpleFeatureFacades,(function(t){return t.pause&&t.pause()})),legacyTriggerEmbeddedFeaturesAction(n,"pause"),n.pauseResponse()},stop:function stop(){l.a.each(n.simpleFeatureFacades,(function(t){return t.stop&&t.stop()})),legacyTriggerEmbeddedFeaturesAction(n,"stop"),n.stopResponse()},masking:function masking(){if(this.isMaskable())return n.masking.apply(n,arguments)},isMaskable:function isMaskable(){return n.maskable||!1},resetValidationUI:function resetValidationUI(){n.getStore().dispatch(h.a.clearValidationUI())},retryLoadImages:function retryLoadImages(){n.imageLoader&&n.imageLoader.loadImages()},simpleFeatures:function simpleFeatures(){return l.a.clone(n.simpleFeatureFacades)},simpleFeature:function simpleFeature(t){return n.simpleFeatureFacades[t]}},"local_practice"===u&&(this._facade.update=function(n){var u=i.get("question").type;if(n.type!==u)return v.a.exception({code:10030,detail:'type: "'.concat(n.type,"\" does not match current question instance's type")});n.response_id=i.get("response_id"),i.setOriginalQuestion(n),t.updateInstance(n)}),i.get("isDynamicContent")){var d=i.dynamic;this._facade.dynamic={nextAttempt:function nextAttempt(){return t.updateInstance(d.nextAttempt())},previousAttempt:function previousAttempt(){return t.updateInstance(d.previousAttempt())},currentAttemptIndex:function currentAttemptIndex(){return d.currentAttemptIndex()},totalAttempts:function totalAttempts(){return d.totalAttempts()}}}return this._facade}},{key:"updateInstance",value:function updateInstance(t){this.view.update()}}]),QuestionFacade}();n.a=y},function(t,n,i){"use strict";var u,l=i(0),d=i.n(l),p=i(23),h=i(25);function _defineProperty(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}var g=p.a.actionTypes,v={ariaGlobal:{},ariaLive:{},isShowingCorrectAnswers:null,responseLevelDistractorRationale:null,suggestedResponses:null,validatedEventRequestCount:0,validatedResponses:null,validationState:null},y=(_defineProperty(u={},g.SET_LEGACY_ATTRIBUTES,(function(t,n){var i={};return d.a.isObject(n.attributes)&&(i.__legacyAttributes=n.attributes),d()({}).assign(t,i)})),_defineProperty(u,g.VALIDATABLE_CHECK_ANSWER,(function(t,n){var i=n.isResponseValid,u=n.responseLevelDistractorRationale,l=n.showDistractorRationale,p=n.canShowGlobalValidationUI,h=n.validatedResponses,g={responseLevelDistractorRationale:u,showDistractorRationale:l,validatedEventRequestCount:(t||v).validatedEventRequestCount+1,validatedResponses:h,validationState:p&&d.a.isBoolean(i)?i?"correct":"incorrect":null};return d.a.isBoolean(i)&&d()(g).assign({ariaGlobal:{visible:!0,label:i?"correct":"incorrect"}}),g})),_defineProperty(u,g.VALIDATABLE_SHOW_SUGGESTED_ANSWERS,(function(t,n){return{suggestedResponses:n.suggestedResponses,isShowingCorrectAnswers:n.isShowingCorrectAnswers}})),_defineProperty(u,g.VALIDATABLE_CLEAR_VALIDATION_UI,(function(){return v})),_defineProperty(u,g.VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT,(function(t){return{feedbackAttemptsCount:t.feedbackAttemptsCount+1}})),_defineProperty(u,g.VALIDATABLE_UPDATE_ARIA_LIVE_DATA,(function(t,n){var i=n.message,u=n.mappedValidatedResponses,l=n.mappedSuggestedResponses,p=n.isShowingCorrectAnswers;return{ariaLive:{visible:!0,message:i,correct:d.a.filter(u,(function(t){return!0===t.validatedValue})),incorrect:d.a.filter(u,(function(t){return!1===t.validatedValue})),suggestedResponses:!!p&&l}}})),_defineProperty(u,g.VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE,(function(){return{ariaLive:{visible:!1}}})),u);n.a=Object(h.a)(y,v)},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ATTR_WHITESPACE=n.URI_SAFE_ATTRIBUTES=n.DATA_URI_UNSAFE_ATTRIBUTES=n.DATA_URI_SAFE_TAGS=void 0;var u=["audio","video","img","source","image","track"];n.DATA_URI_SAFE_TAGS=u;var l=["href","xlink:href","src","data"];n.DATA_URI_UNSAFE_ATTRIBUTES=l;var d=["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"];n.URI_SAFE_ATTRIBUTES=d;var p=Object.seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);n.ATTR_WHITESPACE=p;var h={mimeType:"text/html",imageText:" - image - ",imageWithAltText:" - image with description: ",blackListedTags:["script","style","textarea"],blackListedAttributes:["seeksegmenttime","fscommand","display"],blackListedRegex:/^on/i,blackListedContent:{javascript_keyword:["javascript:","javascript&colon;"]},ATTR_WHITESPACE:p,URI_SAFE_ATTRIBUTES:d,DATA_URI_SAFE_TAGS:u,DATA_URI_UNSAFE_ATTRIBUTES:l};n.default=h},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}(i(0));function getHeadHTML(t){var n=t.parentElement.querySelector("head").childNodes,i="";return n.length&&u.default.each(n,(function(t){3===t.nodeType&&(i+=t.textContent),1===t.nodeType&&"META"!==t.tagName&&(i+=t.innerHTML)})),i}var l={removeElement:function removeElement(t){t.parentNode.removeChild(t)},getElementAttributes:function getElementAttributes(t){for(var n=t.attributes,i=n.length,u=[],l=0;l<i;l++)u.push(n[l].name);return u},processElements:function processElements(t,n){u.default.forEach(t,(function(t){return n(t),t}))},getParsableData:function getParsableData(t,n){var i=(new DOMParser).parseFromString(t,"text/html"),l=u.default.isString(n)?n:"*",d=i.querySelectorAll(l);return!(function hasParserErrors(t){return t.getElementsByTagName("parsererror").length>0}(i)||!function hasHtmlContent(t){return t.length>0}(d))&&{elements:d,dom:i}},mergeTempDomContent:function mergeTempDomContent(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n?getHeadHTML(t.head)+t.body.innerHTML:t.head.innerText+t.body.innerText}};n.default=l},function(t,n,i){"use strict";i.r(n);var u=i(0),l=i.n(u);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pad(t){return("0000"+t).slice(-"0000".length)}function getLength(t){return null==t?void 0:t.length}l.a.mixin({getNested:function getNested(t,n){if(l.a.isObject(t)){var i=n.match(/(.+?)\.(.*)/);return i?this.getNested(t[i[1]],i[2]):t[n]}},cancellableThrottle:function cancellableThrottle(t,n,i){var u,l,d,p,h=n,g=0,v=0;if("function"!=typeof t)throw new TypeError("Expected a function");function invokeFunc(n){var i=u,p=l;return u=l=void 0,v=n,d=t.apply(p,i)}function leadingEdge(t){return v=t,p=setTimeout(timerExpired,n),i?invokeFunc(t):d}function shouldInvoke(t){var i=t-g;return!g||i>=n||i<0||t-v>=h}function timerExpired(){var t=Date.now();if(shouldInvoke(t))return trailingEdge(t);p=setTimeout(timerExpired,function remainingWait(t){var i=t-v,u=n-(t-g);return Math.min(u,h-i)}(t))}function trailingEdge(t){return clearTimeout(p),p=void 0,u?invokeFunc(t):(u=l=void 0,d)}function throttled(){var t=Date.now(),i=shouldInvoke(t);return u=arguments,l=this,g=t,i?void 0===p?leadingEdge(g):(clearTimeout(p),p=setTimeout(timerExpired,n),invokeFunc(g)):(void 0===p&&(p=setTimeout(timerExpired,n)),d)}return throttled.cancel=function cancel(){void 0!==p&&clearTimeout(p),g=v=0,u=l=p=void 0},throttled.flush=function flush(){return void 0===p?d:trailingEdge(Date.now())},throttled},deepClone:function deepClone(t){if(!t||"object"!==_typeof(t))return t;if(l.a.isString(t))return String.prototype.slice.call(t);if(l.a.isDate(t))return new Date(t.valueOf());if(l.a.isFunction(t.clone))return t.clone();var n,i;if(l.a.isArray(t))n=Array.prototype.slice.call(t);else{if(t.constructor!=={}.constructor)return t;n={}}for(i in t)t.hasOwnProperty(i)&&(n[i]=l.a.deepClone(t[i]));return n},deepExtend:function deepExtend(){var t,n,i,u,d,p,h=arguments[0]||{},g=1,v=getLength(arguments);if("object"===_typeof(h)||l.a.isFunction(h)||(h={}),1===v)return h;for(;g<v;g++)if(null!=(d=arguments[g]))for(u in d)if(d.hasOwnProperty(u)){if(t=h[u],h===(i=d[u]))continue;i&&((n=l.a.isArray(i))||l.a.isObject(i)&&!l.a.isFunction(i))?(n?(n=!1,p=[]):p=t&&l.a.isObject(t)?t:{},h[u]=l.a.deepExtend(p,i)):void 0!==i&&(h[u]=i)}return h},getDayOfYear:function getDayOfYear(t){var n=new Date(t.getFullYear(),0,1);return Math.ceil((new Date(t)-n)/864e5)},getISOString:function getISOString(){var t=new Date;return Date.prototype.toISOString?t.toISOString():t.getUTCFullYear()+"-"+pad(t.getUTCMonth()+1)+"-"+pad(t.getUTCDate())+"T"+pad(t.getUTCHours())+":"+pad(t.getUTCMinutes())+":"+pad(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},deferWithContext:function deferWithContext(t,n){return function(){var i=Array.prototype.slice.call(arguments);setTimeout((function(){t.apply(n,i)}),1)}},exists:function exists(t){return null!=t},hasProperty:function hasProperty(t,n){var i=n.indexOf(".");return""===n||"[object Object]"===Object.prototype.toString.call(t)&&(-1===i?t.hasOwnProperty(n):t.hasOwnProperty(n.substr(0,i))&&this.hasProperty(t[n.substr(0,i)],n.substring(i+1,getLength(n))))},trim:function trim(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},capitalize:function capitalize(t){return t.charAt(0).toUpperCase()+t.substring(1)},insertCharacters:function insertCharacters(t,n,i,u){var l=u-i,d=t.split("");return d.splice(i,l,n),d.join("")},conditionallyBuildString:function conditionallyBuildString(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return l()(t).reduce((function(t,i,u){return i?t+n+u:t}),"")}});var d,p=l.a,h=i(5),g=i.n(h);d=g.a.View,g.a.View=function(t){this.options=t||{},d.apply(this,arguments),this.delegateEvents()},g.a.View.prototype=d.prototype,g.a.View.extend=d.extend;g.a;var v=i(1),y=i.n(v),S=i(13),E=i(6),w=i(4),A=i(8),T=i(10),R={isQuestionCorrect:function isQuestionCorrect(t){return l.a.isNumber(t.score)&&t.score===t.max_score},isQuestionUnmarked:function isQuestionUnmarked(t){return l.a.isObject(t)&&l.a.isNull(t.score)&&t.attempted&&!t.automarkable}};function _defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function dichotomous_scoring_defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function dependent_scoring_defineProperties(t,n){for(var i=0;i<n.length;i++){var u=n[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var x={"per-question":function(){function PerQuestionScorer(t){!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,PerQuestionScorer),this.questions=t}return function _createClass(t,n,i){return n&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),t}(PerQuestionScorer,[{key:"score",value:function score(){return T.a.sumNullableNumbers(l.a.pluck(this.questions,"score"))}},{key:"maxScore",value:function maxScore(){return T.a.sumNullableNumbers(l.a.pluck(this.questions,"max_score"))}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,t=0;t<this.questions.length;t++)this.questions[t].attempted&&(maxScoreOfAttempted=T.a.sumNullableNumbers([maxScoreOfAttempted,this.questions[t].max_score]));return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=0,t=0;t<this.questions.length;t++)R.isQuestionUnmarked(this.questions[t])&&(maxScoreOfUnmarked=T.a.sumNullableNumbers([maxScoreOfUnmarked,this.questions[t].max_score]));return maxScoreOfUnmarked}}]),PerQuestionScorer}(),dichotomous:function(){function DichotomousScorer(t){!function dichotomous_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,DichotomousScorer),this.questions=t}return function dichotomous_scoring_createClass(t,n,i){return n&&dichotomous_scoring_defineProperties(t.prototype,n),i&&dichotomous_scoring_defineProperties(t,i),t}(DichotomousScorer,[{key:"score",value:function score(){var score=T.a.sumNullableNumbers(l.a.pluck(this.questions,"score")),t=this.maxScore();return null===score?null:score<t?0:t}},{key:"maxScore",value:function maxScore(){return T.a.sumNullableNumbers(l.a.pluck(this.questions,"max_score"))}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,t=0;t<this.questions.length;t++)if(this.questions[t].attempted){maxScoreOfAttempted=T.a.sumNullableNumbers(l.a.pluck(this.questions,"max_score"));break}return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=0,t=0;t<this.questions.length;t++)if(R.isQuestionUnmarked(this.questions[t])){maxScoreOfUnmarked=T.a.sumNullableNumbers(l.a.pluck(this.questions,"max_score"));break}return maxScoreOfUnmarked}}]),DichotomousScorer}(),dependent:function(){function DependentScorer(t){!function dependent_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,DependentScorer),this.questions=t}return function dependent_scoring_createClass(t,n,i){return n&&dependent_scoring_defineProperties(t.prototype,n),i&&dependent_scoring_defineProperties(t,i),t}(DependentScorer,[{key:"score",value:function score(){var score;score=l.a.isNumber(T.a.sumNullableNumbers(l.a.pluck(this.questions,"score")))?0:null;for(var t=0;t<this.questions.length&&(score=T.a.sumNullableNumbers([score,this.questions[t].score]),l.a.isNumber(this.questions[t].score)&&!(this.questions[t].score<this.questions[t].max_score));t++);return score}},{key:"maxScore",value:function maxScore(){for(var maxScore=null,t=0;t<this.questions.length&&(maxScore=T.a.sumNullableNumbers([maxScore,this.questions[t].max_score]),l.a.isNumber(this.questions[t].max_score));t++);return maxScore}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,t=0;t<this.questions.length;t++)this.questions[t].attempted&&(maxScoreOfAttempted=T.a.sumNullableNumbers([maxScoreOfAttempted,this.questions[t].max_score]));return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=null,t=0;t<this.questions.length&&this.questions[t].attempted;t++)if(R.isQuestionUnmarked(this.questions[t])||l.a.isNumber(maxScoreOfUnmarked))maxScoreOfUnmarked=T.a.sumNullableNumbers([maxScoreOfUnmarked,this.questions[t].max_score]);else if(!R.isQuestionCorrect(this.questions[t]))break;return l.a.isNumber(maxScoreOfUnmarked)||(maxScoreOfUnmarked=0),maxScoreOfUnmarked}}]),DependentScorer}()};function round(t,n){if(!l.a.isNumber(t))return t;var i=Math.pow(10,n);return Math.round(t*i)/i}var C=function GroupScorer(t){if(!t.type)throw"Scoring type is required";if(!l.a.contains(l.a.keys(x),t.type))throw"Scoring type is invalid.";if(!t.questions||!l.a.isArray(t.questions)||!t.questions.length)throw"An array of at least one question score is required";t.questions=l.a.map(t.questions,(function(t){return l.a.isObject(t)?t:{}}));var n=new x[t.type](t.questions);this.score=function(){return round(n.score(),2)},this.maxScore=function(){return round(n.maxScore(),2)},this.maxScoreOfAttempted=function(){return round(n.maxScoreOfAttempted(),2)},this.maxScoreOfUnmarked=function(){return round(n.maxScoreOfUnmarked(),2)},this.attempted=function(){var n=!1;return l.a.forEach(t.questions,(function(t){t.attempted&&(n=!0)})),n},this.unmarked=function(){var n=!1;return l.a.forEach(t.questions,(function(t){R.isQuestionUnmarked(t)&&(n=!0)})),n}},I=g.a.Collection.extend({model:A.a,RESPONSE_ID_MAX_CHAR:100,EVENT:{MODIFIED:A.a.prototype.EVENT.MODIFIED},getModelsValidState:function getModelsValidState(){var t=[];return this.each((function(n){n.validState.valid||(t=t.concat(n.validState.errors))})),{valid:0===t.length,errors:t}},getInvalidQuestionResponses:function getInvalidQuestionResponses(){return this.filter((function(t){return!t.hasAllowedResponse()}))},getResponseIds:function getResponseIds(t){var n=this,i=[];return l.a.each(t,(function(t){i.push(n.get(t).get("response_id"))})),i},getAttemptedResponseIds:function getAttemptedResponseIds(){var t=[];return this.each((function(n){n.isAttempted()&&t.push(n.get("response_id"))})),t},getValidResponseIds:function getValidResponseIds(){var t=[];return this.each((function(n){l.a.isFunction(n.isResponseValid)&&n.isResponseValid()&&t.push(n.get("response_id"))})),t},getValidResponses:function getValidResponses(){var t={};return this.each((function(n){l.a.isFunction(n.canValidateResponse)&&n.canValidateResponse()&&n.hasResponse()&&(t[n.get("response_id")]=n.isResponseValid())})),t},getValidResponsesDetailed:function getValidResponsesDetailed(){var t={};return this.each((function(n){l.a.isFunction(n.canValidateResponse)&&n.canValidateResponse()&&n.hasResponse()&&(t[n.get("response_id")]=n.getResponseValidDetailed())})),t},getToBeCapturedQuestionResponseJson:function getToBeCapturedQuestionResponseJson(){var t=[];return this.each((function(n){n.isCaptured()||n.has("error")||t.push(n.getJsonToCapture())})),t},getToBeSavedQuestionResponseJson:function getToBeSavedQuestionResponseJson(){var t=[];return this.each((function(n){n.toBeSaved()&&!n.has("error")&&t.push(n.getJsonToSave())})),t},getQuestionResponseIdsForReScore:function getQuestionResponseIdsForReScore(){var t=[];return this.each((function(n){n.toBeSaved()||n.has("error")||t.push(n.get("id"))})),t},getResponsesForClient:function getResponsesForClient(){var t={};return this.each((function(n){n.hasResponse()&&(t[n.get("response_id")]=n.getResponseJsonForClient())})),t},getQuestionsJson:function getQuestionsJson(){var t={};return this.each((function(n){t[n.get("response_id")]=n.getQuestionJsonForClient()})),t},getQuestionsMetadata:function getQuestionsMetadata(){var t={};return this.each((function(n){var i=n.getMetadataForClient();i&&(t[n.get("response_id")]=i)})),t},getScores:function getScores(){var t={};return this.each((function(n){var i=l.a.isFunction(n.getScore)?n.getScore():null;l.a.isEmpty(i)||(t[n.get("response_id")]=i)})),t},getGroupScore:function getGroupScore(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.a.isString(t.type)||(t.type="per-question");var n=[];if(l.a.each(t.response_ids,(function(t){var i=l.a.first(this.where({response_id:t}));i?n.push(l.a.isFunction(i.getScore)?i.getScore():null):w.a.log("Response ID not found: "+t)}),this),!l.a.isArray(t.response_ids)||n.length!==t.response_ids.length)return!1;try{var i=new C({type:t.type,questions:n});return{type:t.type,score:i.score(),max_score:i.maxScore(),question_scores:n}}catch(t){return w.a.log("Group scoring error: "+t),!1}},getQuestionResponsesModificationTimes:function getQuestionResponsesModificationTimes(){var t={};return this.each((function(n){t[n.id]=n.getLastModifiedTime()})),t},areThereQuestionsModified:function areThereQuestionsModified(){return this.any((function(t){return t.isModified()}))},areThereQuestionsAnswered:function areThereQuestionsAnswered(){return this.any((function(t){return!l.a.isUndefined(t.getResponseValue())}))},areAllQuestionsSaved:function areAllQuestionsSaved(){return this.every((function(t){return t.isSaved()}))},markAsSavedIfModified:function markAsSavedIfModified(t,n){l.a.each(t,(function(t){var i=this.get(t);i.getLastModifiedTime()===n[i.id]&&i.setAsSaved()}),this)},markAsCaptured:function markAsCaptured(t){l.a.each(t,(function(t){this.get(t).setAsCaptured()}),this)}}),M=i(15),O=g.a.Collection.extend({model:M.a,getFeaturesJson:function getFeaturesJson(){var t={};return this.each((function(n){t[n.get("feature_id")]=n.getFeatureJsonForClient()})),t}}),P=g.a.Collection.extend({EVENT:{MODIFIED:A.a.prototype.EVENT.MODIFIED},model:A.a,jsonAttribute:void 0,groupId:void 0,viewClass:void 0,initialize:function initialize(t,n){this.jsonAttribute=n.jsonAttribute,this.groupId=n.groupId,this.viewClass=n.viewClass,this.id=this.jsonAttribute+"-"+this.groupId},areAllQuestionsAttempted:function areAllQuestionsAttempted(){return this.all((function(t){return t.isAttempted()}))}}),N=i(46),L=i.n(N),D=g.a.View.extend({template:L.a,events:{"click .lrn_btn":"validateQuestions"},initialize:function initialize(){this.setElement(".learnosity-validation.group-"+this.collection.groupId),this.activity=this.options.activity,this.i18n=this.activity.get("i18n"),this.render()},render:function render(){var t=this.$el,n=y()(this.template({id:this.collection.id,labels:this.i18n.labels}));return this.setElement(n),t.replaceWith(n),this},validateQuestions:function validateQuestions(){this.collection.each((function(t,n){t.callValidate&&t.callValidate({feedback_attempts:!0})}))}}),q=i(17),V=i.n(q),U=i(18);function validationError_typeof(t){return(validationError_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,u=_getPrototypeOf(t);if(n){var l=_getPrototypeOf(this).constructor;i=Reflect.construct(u,arguments,l)}else i=u.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,n){if(n&&("object"===validationError_typeof(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ValidationError,t);var n=_createSuper(ValidationError);function ValidationError(t){var i;return function validationError_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,ValidationError),(i=n.call(this)).name="ValidationError",i.message=t,i}return ValidationError}(function _extendableBuiltin(t){function ExtendableBuiltin(){t.apply(this,arguments)}return ExtendableBuiltin.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,t):ExtendableBuiltin.__proto__=t,ExtendableBuiltin}(Error)),B=i(14),H=g.a.Model.extend({TYPE:{LOCAL_PRACTICE:"local_practice",OFFLINE_APP:"offline_app",SUBMIT_PRACTICE:"submit_practice",TEST:"test"},STATE:{INITIAL:"initial",RESUME:"resume",REVIEW:"review",PREVIEW:"preview"},EVENT:{READY:"ready",SAVE:"save",SAVE_PROGRESSING:"save:progressing",SAVED:"saved",SUBMITTED:"submitted",DISCARDED:"discarded"},ValidationError:j,defaults:{domain:E.a.domain,type:"local_practice",state:"initial",beta_flags:{}},initialize:function initialize(){var t={id:U.a.v4()};l.a.isNumber(this.get("initTime"))?(t.time=this.get("initTime"),t.deviceTime=!1):(t.time=Math.floor(Date.now()/1e3),t.deviceTime=!0),this.questionResponsesReady=!1,this.featuresReady=!1,this.set({initMetadata:t,questionResponses:new I([]),featureModels:new O([]),hasQuestions:l.a.isArray(this.get("questions"))&&this.get("questions").length>0,hasFeatures:l.a.isArray(this.get("features"))&&this.get("features").length>0},{silent:!0}),this.qrGroupFeatureViewsMap={validation_group:D},this.qrGroupFeatures=[],this.hooks={reset:[],unload:[],saveProgress:[]}},init:function init(){var t=this.get("hasQuestions"),n=this.get("hasFeatures");try{this.validateActivity(),t&&this.validateQuestionsJson(this.get("questions")),n&&this.validateFeaturesJson(this.get("features")),this.has("description")&&this.set({description:V.a.sanitizeHTML(this.get("description"))},{silent:!0}),t?(this.initialiseQuestionResponses(this.get("questions")),this.unset("questions",{silent:!0})):this.initialisationCompleted("questionResponses"),n?(this.intialiseFeatures(this.get("features")),this.unset("features",{silent:!0})):this.initialisationCompleted("features")}catch(t){if(!(t instanceof j))throw t;w.a.exception({code:10001,detail:"Activity JSON Poorly formed. "+t,i18n:this.get("i18n")})}},loadFeatureBundles:function loadFeatureBundles(t,n){var i=S.a.getBundleOptions(this.get("beta_flags"));return S.a.requireBundlesForFeatureTypes(t,n,i)},validateActivity:function validateActivity(){if(!l.a.include(this.TYPE,this.get("type")))throw new j('Invalid "type" attribute provided: '+this.get("type"));if(!l.a.include(this.STATE,this.get("state")))throw new j('Invalid "state" attribute provided: '+this.get("state"));var t=this.get("show_distractor_rationale");if(l.a.isObject(t)){var n=t.per_question,i=t.per_response;if(!l.a.isUndefined(n)&&!Object(B.i)(n))throw new j('Invalid show_distractor_rationale.per_question value provided. Must be one of: "'+B.a.join('", "')+'".');if(!l.a.isUndefined(i)&&!Object(B.j)(i))throw new j('Invalid show_distractor_rationale.per_response value provided. Must be one of: "'+B.b.join('", "')+'".')}else if(!l.a.isUndefined(t)&&!l.a.isBoolean(t))throw new j("Invalid show_distractor_rationale value provided. Must be a boolean or object.")},validateQuestionsJson:function validateQuestionsJson(t){for(var n=0;n<t.length;n++){var i=t[n]||{};if(!i.hasOwnProperty("response_id"))throw new j("The question object at index "+n+' is missing the "response_id" attribute');if(!A.a.prototype.VALID_RESPONSE_ID_RE.test(i.response_id))throw new j("The question object at index "+n+' has a "response_id" attribute with invalid characters: '+i.response_id);if(0===y()(".learnosity-response.question-"+i.response_id).length)throw new j("The question object at index "+n+' with "response_id": '+i.response_id+" has no matching DOM element");if(l.a.keys(i).length>1){if(!i.hasOwnProperty("type")&&this.get("consumer").get("requireQuestionType"))throw new j("The question object at index "+n+' is missing the "type" attribute');if(i.hasOwnProperty("type")||(i.type=A.a.prototype.TYPE.AUDIOADV),!l.a.include(A.a.prototype.TYPE,i.type))throw new j("The question object at index "+n+' has an invalid "type" attribute: '+i.type)}else if(this.get("state")!==this.STATE.RESUME&&this.get("state")!==this.STATE.REVIEW)throw new j("The question object at index "+n+' has no attributes, but the activity "state" is not "resume" or "review"')}},validateFeaturesJson:function validateFeaturesJson(t){for(var n=0;n<t.length;n++){var i=t[n]||{};if(!i.hasOwnProperty("feature_id"))throw new j("The feature object at index "+n+' is missing the "feature_id" attribute');if(0===y()(".learnosity-feature.feature-"+i.feature_id).length)throw new j("The feature object at index "+n+' with "feature_id": '+i.feature_id+" has no matching DOM element");if(!i.hasOwnProperty("type")||!l.a.include(M.a.prototype.TYPE,i.type))throw new j("The feature object at index "+n+' has an invalid "type" attribute: '+i.type)}},initialiseQuestionResponses:function initialiseQuestionResponses(t,n){var i=this,u=[],d=S.a.getBundleOptions(this.get("beta_flags"));l.a.each(t,(function(t){t.type===A.a.prototype.TYPE.UNKNOWN||l.a.include(u,t.type)||u.push(t.type)})),S.a.requireBundlesForQuestionTypes(u,(function processLoadedBundles(n){if(l.a.isEmpty(n))w.a.log("No bundles were loaded for the required Question types: "+u.join(", "));else{i.initQuestionResponseModels(n,t);var d=i.get("questionResponses").getModelsValidState();d.valid?(i.initQuestionGroupFeatures(n),i.hasToLoadResponsesIntoQuestionResponses()?i.loadResponsesIntoQuestionResponses(l.a.bind((function(){this.initialisationCompleted("questionResponses")}),i)):i.initialisationCompleted("questionResponses")):w.a.exception({code:10001,detail:"Activity JSON Poorly formed. "+d.errors.join(" |\n"),i18n:i.get("i18n")})}}),d)},initQuestionResponseModels:function initQuestionResponseModels(t,n){var i=this,u=[];l.a.each(n,(function(n){var d={id:A.a.prototype.getIdForResponseId(n.response_id,this.get("user_id"),this.get("consumer").get("id")),response_id:n.response_id,user_id:this.get("user_id")};n.error&&(d.error=n.error,n.type||(n.type=A.a.prototype.TYPE.UNKNOWN)),d.question=n,d.type=n.type;var p=t[n.type],h=new p.Model(d,{state:i.get("state"),type:i.get("type"),attribute_overrides:i.attributes.attribute_overrides});h.setApiVersion(this.get("apiVersion")),p.hasOwnProperty("View")?h.viewClass=p.View:l.a.isFunction(p.getViewFor)?h.viewClass=p.getViewFor(n):w.a.log("Bundle for question: "+n.type+" does not contain View attribute or getViewFor function"),h.setActivity(this),u.push(h)}),this),this.get("questionResponses").add(u)},initQuestionGroupFeatures:function initQuestionGroupFeatures(t){l.a.each(t,(function(t){t.hasOwnProperty("featureViewsMapEntry")&&(this.qrGroupFeatureViewsMap[t.featureViewsMapEntry.jsonAttribute]=t.featureViewsMapEntry.viewClass)}),this),this.get("questionResponses").each((function(t){var n=t.getGroupJsonAttributes();l.a.each(n,(function(n){var i=l.a.find(this.qrGroupFeatures,(function(t){return t.jsonAttribute===n.name&&t.groupId===n.value}));l.a.isUndefined(i)&&(i=new P(null,{jsonAttribute:n.name,groupId:n.value,viewClass:this.qrGroupFeatureViewsMap[n.name]}),this.qrGroupFeatures.push(i)),i.add(t)}),this)}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return!1},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(t){t()},intialiseFeatures:function intialiseFeatures(t){var n=[];l.a.each(t,(function(t){t.type===M.a.prototype.TYPE.UNKNOWN||l.a.include(n,t.type)||n.push(t.type)})),this.loadFeatureBundles(n,l.a.bind((function(i){if(l.a.isEmpty(i))w.a.log("No bundles were loaded for the required Feature types:"+n.join(", "));else{var u=[],d=this;l.a.each(t,(function(t){var n=l.a.first(d.get("featureModels").where({feature_id:t.feature_id}));if(n)n.trigger(n.EVENT.RE_INIT);else{var p=i[t.type],h=new p.Model(t);p.hasOwnProperty("View")?h.viewClass=p.View:l.a.isFunction(p.getViewFor)?h.viewClass=p.getViewFor(t):w.a.log("Bundle for feature: "+t.type+" does not contain View attribute or getViewFor function"),h.activity=d,u.push(h)}})),this.get("featureModels").add(u),this.initialisationCompleted("features")}}),this))},initialisationCompleted:function initialisationCompleted(t){if("questionResponses"===t){var n=this.get("questionResponses").models;this.questionResponsesReady=!0,n&&l.a.each(n,(function(t){return t.trigger(t.EVENT.READY)}))}else"features"===t&&(this.featuresReady=!0);this.questionResponsesReady&&this.featuresReady&&this.trigger(this.EVENT.READY)},append:function append(t){var n,i;try{if(!l.a.isObject(t))throw new j("First parameter must be an object");if(n=l.a.isArray(t.questions)&&t.questions.length>0,i=l.a.isArray(t.features)&&t.features.length>0,!n&&!i)throw new j("Either questions or features must be provided");n&&(this.validateQuestionsJson(t.questions),this.questionResponsesReady=!1),i&&(this.validateFeaturesJson(t.features),this.featuresReady=!1),n&&this.initialiseQuestionResponses(t.questions,!0),i&&this.intialiseFeatures(t.features)}catch(t){if(!(t instanceof j))throw t;w.a.exception({code:10020,detail:t.message,i18n:this.get("i18n")})}},showQuestionNumbers:function showQuestionNumbers(){return this.get("number_questions")&&this.get("questionResponses").length>1},captureQuestionResponses:function captureQuestionResponses(){},save:function save(t){},discard:function discard(t){},getAttemptedResponseIds:function getAttemptedResponseIds(){return this.get("questionResponses").getAttemptedResponseIds()},safeToUnload:function safeToUnload(){if(this.get("type")!==this.TYPE.LOCAL_PRACTICE){if(this.has("questionResponses")&&this.get("questionResponses").areThereQuestionsModified())return!1;var safeToUnload=!l.a.any(this.hooks.unload,(function(t){return!t()}));return safeToUnload&&!this.saving}return!0},validateQuestionsResponses:function validateQuestionsResponses(t){t=t||{},this.get("questionResponses").each((function(n){l.a.isFunction(n.callValidate)&&n.callValidate(t)}))},getValidResponseIds:function getValidResponseIds(){return this.get("questionResponses").getValidResponseIds()}}),Q=H.extend({initialize:function initialize(){H.prototype.initialize.call(this),this.responsesToSet={},this.has("responses")&&(this.responsesToSet=this.get("responses"))},validateActivity:function validateActivity(){if(H.prototype.validateActivity.call(this),this.has("responses")&&this.get("state")!==this.STATE.RESUME&&this.get("state")!==this.STATE.REVIEW)throw new this.ValidationError('"responses" attribute can only be provided if "type" is "'+this.STATE.RESUME+'" or "'+this.STATE.REVIEW+'"');if(this.has("responses")&&!this.get("hasQuestions"))throw new this.ValidationError('"responses" attribute can only be provided if "questions" are provided');l.a.each(this.get("responses"),(function(t,n){var i=l.a.find(this.get("questions"),(function(t){return n===t.response_id}));if(l.a.isUndefined(i))throw new this.ValidationError('The response object provided for "response_id": '+n+" has no matching question object")}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return(this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW)&&!l.a.isEmpty(this.responsesToSet)},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(t){l.a.isEmpty(this.responsesToSet)||l.a.each(this.responsesToSet,(function(t,n){this.get("questionResponses").find((function(t){return n===t.get("response_id")})).update({response:t}),delete this.responsesToSet[n]}),this),t()},append:function append(t){t&&l.a.isObject(t.responses)&&l.a.extend(this.responsesToSet,t.responses),H.prototype.append.call(this,t)},captureQuestionResponses:function captureQuestionResponses(){throw new Error("captureQuestionResponses function not supported for Local Practice activities")},save:function save(){throw new Error("save function not supported for Local Practice activities")},discard:function discard(){throw new Error("discard function not supported for Local Practice activities")}}),z=i(9),G=i(2),W=function IndexedStorage(t){if(!window.indexedDB)throw new Error("Storage Error: IndexedDB is not supported");if(l.a.isEmpty(t)||!l.a.isString(t.name)||!l.a.isNumber(t.version)||t.version<1||!l.a.isArray(t.stores)||0===t.stores.length)throw new Error("Storage Error: incorrect database configuration passed");this.name=t.name,this.version=t.version,this.storeDefinitions=t.stores,this.databasePromise=null};function doObjectStoreAction(t,n,i,u){return l.a.isUndefined(u)||l.a.isNull(u)?t[n](i):t[n](i,u)}l.a.extend(W.prototype,{get:function get(t,n){return this._execute("get",(function(i,u,l){var d=i.transaction(t,"readonly").objectStore(t).get(n);d.onsuccess=function(){u(d.result)}}))},set:function set(t,n,i){return this._execute("set",(function(u,l,d){doObjectStoreAction(u.transaction(t,"readwrite").objectStore(t),"put",n,i).onsuccess=l}))},update:function update(t,n,i,u){return this._execute("set",(function(d,p,h){var g=d.transaction(t,"readwrite").objectStore(t),v=g.get(l.a.isEmpty(i)?n[g.keyPath]:i);v.onsuccess=function(){if(!v.result&&u)return h("Storage Error running update: missing object"),void g.transaction.abort();var t,d=l.a.deepExtend({},v.result,n);l.a.isEmpty(i)||(t=i),doObjectStoreAction(g,"put",d,t).onsuccess=p}}))},add:function add(t,n,i){return this._execute("add",(function(u,l,d){doObjectStoreAction(u.transaction(t,"readwrite").objectStore(t),"add",n,i).onsuccess=l}))},remove:function remove(t,n){return this._execute("remove",(function(i,u,l){i.transaction(t,"readwrite").objectStore(t).delete(n).onsuccess=u}))},clear:function clear(t){return this._execute("clear",(function(n,i,u){n.transaction(t,"readwrite").objectStore(t).clear().onsuccess=i}))},getAll:function getAll(t,n){return this._execute("getAll",(function(i,u,d){if(0!==n.length){var p=0,h=[];n=l.a.sortBy(n),i.transaction(t,"readonly").objectStore(t).openCursor().onsuccess=function(t){var i=t.target.result;if(i){for(var l=i.key;l>n[p];)if((p+=1)===n.length)return void u(h);l===n[p]?(h.push(i.value),i.continue()):i.continue(n[p])}else u(h)}}else u([])}))},setAll:function setAll(t,n,i){return this._execute("setAll",(function(u,d,p){if(l.a.isArray(i)&&n.length!==i.length)p("Storage Error running setAll: keys array provided with different length to values array");else{var h=u.transaction(t,"readwrite").objectStore(t),g=-1;!function insertObject(){var t;(g+=1)<n.length?(l.a.isArray(i)&&(t=i[g]),doObjectStoreAction(h,"put",n[g],t).onsuccess=insertObject):d()}()}}))},addAll:function addAll(t,n,i){return this._execute("addAll",(function(u,d,p){if(l.a.isArray(i)&&n.length!==i.length)p("Storage Error running addAll: keys array provided with different length to values array");else{var h=u.transaction(t,"readwrite").objectStore(t),g=-1;!function insertObject(){var t;(g+=1)<n.length?(l.a.isArray(i)&&(t=i[g]),doObjectStoreAction(h,"add",n[g],t).onsuccess=insertObject):d()}()}}))},updateAll:function updateAll(t,n,i,u){return this._execute("setPartials",(function(d,p,h){var g,v=d.transaction(t,"readwrite").objectStore(t);l.a.isArray(i)&&n.length!==i.length?h("Storage Error running updateAll: keys array provided with different length to partialValues array"):!l.a.isArray(i)||l.a.isEmpty(v.keyPath)?l.a.isArray(i)||!l.a.isEmpty(v.keyPath)?(g=-1,function updateObject(){if((g+=1)<n.length){var t=n[g],d=l.a.isArray(i)?i[g]:t[v.keyPath],y=v.get(d);y.onsuccess=function(){if(!y.result)return h("Storage Error running updateAll: missing object for key: "+d),void v.transaction.abort();var n,p=y.result;l.a.isArray(i)&&(n=d),l.a.isString(u)&&t[u]!==p[u]?updateObject():(p=l.a.deepExtend({},p,t),doObjectStoreAction(v,"put",p,n).onsuccess=updateObject)}}else p()}()):h("Storage Error running updateAll: no keys provided and storage doesn't have keyPath"):h("Storage Error running updateAll: keys array provided but storage is defined with keyPath")}))},getAllByIndex:function getAllByIndex(t,n){return this._execute("getAllByIndex",(function(i,u,l){var d=i.transaction(t,"readonly").objectStore(t).index(n),p=[];d.openCursor().onsuccess=function(){var t=event.target.result;t?(p.push(t.value),t.continue()):u(p)}}))},getWithValue:function getWithValue(t,n){return this._execute("getWithValue",(function(i,u,l){var d=i.transaction(t,"readonly").objectStore(t).get(n);d.onsuccess=function(t){u(t.target.result)},d.onerror=function(t){l(t)}}))},getAllByIndexWithValue:function getAllByIndexWithValue(t,n,i,u){return u=u||"==",this._execute("getAllByIndexWithValue",(function(l,d,p){var h,g=l.transaction(t,"readonly").objectStore(t).index(n),v=[];switch(u){case">":h=window.IDBKeyRange.lowerBound(i,!0);break;case">=":h=window.IDBKeyRange.lowerBound(i);break;case"<":h=window.IDBKeyRange.upperBound(i,!0);break;case"<=":h=window.IDBKeyRange.upperBound(i);break;case"==":default:h=window.IDBKeyRange.only(i)}g.openCursor(h).onsuccess=function(){var t=event.target.result;t?(v.push(t.value),t.continue()):d(v)}}))},getAllByIndexBetweenValues:function getAllByIndexBetweenValues(t,n,i,u,l){return l=!!l,this._execute("getAllByIndexWithValue",(function(d,p,h){var g=d.transaction(t,"readonly").objectStore(t).index(n),v=window.IDBKeyRange.bound(i,u,l,l),y=[];g.openCursor(v).onsuccess=function(){var t=event.target.result;t?(y.push(t.value),t.continue()):p(y)}}))},_execute:function _execute(t,n){return this._openDatabase().then((function(i){return new G.default((function(u,l){i.onerror=function(n){l("Storage Error running "+t+": "+(n.target?n.target.error.name+" "+n.target.error.message:n.message))},n(i,u,l)}))}))},_openDatabase:function _openDatabase(){if(!this.databasePromise){var t=this;this.databasePromise=new G.default((function(n,i){try{var u=window.indexedDB.open(t.name,t.version);u.onerror=function(t){i("Storage Error: database open error: "+(t.target?t.target.error:t.toString()))},u.onsuccess=function(t){n(t.target.result)},u.onupgradeneeded=function(n){var u=n.target.result,d=n.target.transaction,p=l.a.difference(u.objectStoreNames,l.a.pluck(t.storeDefinitions,"name"));try{l.a.each(t.storeDefinitions,(function(t){var n,i;n=l.a.contains(u.objectStoreNames,t.name)?d.objectStore(t.name):u.createObjectStore(t.name,t.optionalParameters),i=l.a.difference(n.indexNames,l.a.pluck(t.indices,"name")),l.a.each(t.indices,(function(t){l.a.contains(n.indexNames,t.name)||n.createIndex(t.name,t.keyPath,{unique:!0===t.unique})})),l.a.each(i,(function(t){n.deleteIndex(t)}))})),l.a.each(p,(function(t){u.deleteObjectStore(t)}))}catch(t){i("Storage Error: database create/upgrade error: "+t.toString())}}}catch(t){i("Storage Error: database open error: "+t.toString())}}))}return this.databasePromise}});var $=W,Y="questionresponses",J="sessions",X={init:function init(){if(!this.storage)try{this.storage=new $({name:"LrnQuestionsApi",version:1,stores:[{name:Y,optionalParameters:{keyPath:"id"},indices:[{name:"needs_pushing",keyPath:"needs_pushing"},{name:"session_id",keyPath:"session_id"}]},{name:J,optionalParameters:{keyPath:"session_id"},indices:[{name:"needs_pushing",keyPath:"needs_pushing"}]}]})}catch(t){this.initError=t}if(this.initError)throw this.initError;return this},formatQuestionResponses:function formatQuestionResponses(t,n){var i=l.a.filter(t,(function(t){return t.consumer_key===n.consumer_key&&t.user_id===n.user_id}));return{qrsData:l.a.map(i,(function(t){var n,i,u,d;if(t.pushed_once)n={id:t.id,response:t.response,pushed_once:t.pushed_once};else{var p=(n=t).question.metadata;p&&p.prepackaged_question&&delete n.question.metadata.prepackaged_question}return i=l.a.getNested(t.question.metadata,"offline.assets"),n.question&&i&&(delete n.question.metadata.offline,u=JSON.stringify(n.question),l.a.map(i,(function(t){return u=u.replace(new RegExp(t.replacement,"g"),t.url)})),n.question=JSON.parse(u)),n.response&&i&&(d=JSON.stringify(n.response),l.a.map(i,(function(t){return d=d.replace(new RegExp(t.replacement,"g"),t.url)})),n.response=JSON.parse(d)),n})),toBePushed:i,security:n}},getQuestionResponses:function getQuestionResponses(t){return this.storage?this.storage.getAll(Y,t):G.default.reject(this.initError?this.initError:"Offline storage not initialised")},saveQuestionResponses:function saveQuestionResponses(t,n,i){if(!this.storage)return G.default.reject(this.initError?this.initError:"Offline storage not initialised");var u=this,d=[],p=[],h=[],g=(new Date).getTime(),v=this.getDateString();return l.a.each(t,(function(t,u){var l;t.isCaptured()?(l={id:t.get("id"),response:t.get("response"),mod_date:v,needs_pushing:"true"},n&&(l.session_id=n),h.push(l)):(l={id:t.get("id"),type:t.get("type"),response_id:t.get("response_id"),user_id:t.get("user_id"),question:t.get("question"),response:t.get("response"),creation_date:v,consumer_key:i,order:g+"_"+u,mod_date:v,needs_pushing:"true",pushed_once:!1},n&&(l.session_id=n),p.push(l),d.push(t))})),this.storage.addAll(Y,p).then((function(){return l.a.each(d,(function(t){t.set({creation_date:v},{silent:!0}),t.setAsCaptured()})),u.storage.updateAll(Y,h)}))},getSession:function getSession(t){var n=this;return this.validateStorage().then((function(){return n.storage.get(J,t)}))},saveSession:function saveSession(t){if(!this.storage)return G.default.reject(this.initError?this.initError:"Offline storage not initialised");var n=this;return this.storage.get(J,t.session_id).then((function(i){return i&&("true"===i.needs_pushing&&(t.questions=l.a.union(i.questions,t.questions)),t=l.a.deepExtend({},i,t)),t.mod_date=n.getDateString(),t.needs_pushing="true",n.storage.set(J,t)}))},submitQuestionResponses:function submitQuestionResponses(t){var n=t.qrsData,i=t.toBePushed,u=t.security,d=this;return 0===n.length?G.default.resolve():new G.default((function(t,i){z.a.request({url:"/push/questionresponses",action:z.a.ACTION.UPDATE,security:u,data:{questionResponses:n},success:function success(n){t()},failure:function failure(t){var n="Failed pushing sessions: "+(t.status>0?t.status+" - ":"");l.a.isObject(t.response)&&t.response.meta?n+=t.response.meta.message:n+=t.response,i(n)}})})).then((function(){var t=l.a.map(i,(function(t){return{id:t.id,mod_date:t.mod_date,needs_pushing:"false"}}));return d.storage.updateAll(Y,t,null,"mod_date")})).then((function(){var t=[];if(l.a.each(i,(function(n){n.pushed_once||t.push({id:n.id,pushed_once:!0})})),t.length>0)return d.storage.updateAll(Y,t)}))},needsPushing:function needsPushing(t){return G.default.all([this.storage.getAllByIndexWithValue(J,"needs_pushing","true"),this.storage.getAllByIndexWithValue(Y,"needs_pushing","true")]).then((function(n){return{sessions:l.a.pluck(l.a.filter(n[0],(function(n){return n.consumer_key===t.consumer_key&&n.user_id===t.user_id})),"session_id"),questions:l.a.pluck(l.a.filter(n[1],(function(n){return n.consumer_key===t.consumer_key&&n.user_id===t.user_id})),"response_id")}}))},pushBySessionId:function pushBySessionId(t,n){var i=this;return this.validateStorage().then((function(){return i.pushQuestionResponses(t,"session_id",n)})).then((function(){return i.pushSession(t,n)}))},pushAll:function pushAll(t){var n=this;return this.validateStorage().then((function(){return n.pushQuestionResponses(t)})).then((function(){return n.pushSessions(t)}))},pushQuestionResponses:function pushQuestionResponses(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"needs_pushing",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"true";return this.storage.getAllByIndexWithValue(Y,i,u).then((function(i){return n.formatQuestionResponses(i,t)})).then((function(t){return n.submitQuestionResponses(t)}))},requestToPushSession:function requestToPushSession(t,n){var i=this,u=l.a.filter(n,(function(n){return n.consumer_key===t.consumer_key&&n.user_id===t.user_id}));return 0===u.length?G.default.resolve():new G.default((function(n,i){z.a.request({url:"/push/sessions",action:z.a.ACTION.UPDATE,security:t,data:{sessions:u},success:function success(t){n()},failure:function failure(t){var n="Failed pushing sessions: "+(t.status>0?t.status+" - ":"");l.a.isObject(t.response)&&t.response.meta?n+=t.response.meta.message:n+=t.response,i(n)}})})).then((function(){var t=l.a.map(u,(function(t){return{session_id:t.session_id,mod_date:t.mod_date,needs_pushing:"false"}}));return i.storage.updateAll(J,t,null,"mod_date")}))},pushSession:function pushSession(t,n){var i=this;return this.storage.getWithValue(J,n).then((function(n){return i.requestToPushSession(t,[n])}))},pushSessions:function pushSessions(t){var n=this;return this.storage.getAllByIndexWithValue(J,"needs_pushing","true").then((function(i){return n.requestToPushSession(t,i)}))},getDateString:function getDateString(){var t,n=new Date;return t=n.getUTCFullYear(),t+="-"+(n.getUTCMonth()+1<10?"0":"")+(n.getUTCMonth()+1),t+="-"+(n.getUTCDate()<10?"0":"")+n.getUTCDate(),t+=" "+(n.getUTCHours()<10?"0":"")+n.getUTCHours(),t+=":"+(n.getUTCMinutes()<10?"0":"")+n.getUTCMinutes(),t+=":"+(n.getUTCSeconds()<10?"0":"")+n.getUTCSeconds()},validateStorage:function validateStorage(){return this.storage?G.default.resolve():G.default.reject(this.initError?this.initError:"Offline storage not initialised")}},K=H.extend({initialize:function initialize(){H.prototype.initialize.call(this),this.saving=!1,this.cachedSaveCallArguments=null,this.retrievedQuestionResponsesCache={}},validateActivity:function validateActivity(){H.prototype.validateActivity.call(this);try{X.init()}catch(t){throw new this.ValidationError("initialising an offline_app type but indexed db is not supported in this browser")}if(this.has("session_id")&&!U.a.check.test(this.get("session_id").toLowerCase()))throw new this.ValidationError('"session_id" attribute is not a valid UUID');if(this.get("renderSubmitButton")&&0===y()(".learnosity-submit-button").length)throw new this.ValidationError('"renderSubmitButton" attribute is true, but no DOM element was found to render');if(this.get("renderSaveButton")&&0===y()(".learnosity-save-button").length)throw new this.ValidationError('"renderSaveButton" attribute is true, but no DOM element was found to render');if(this.has("responses"))throw new this.ValidationError('"responses" attribute found in Activity, but not supported for type: '+this.get("type"))},initialiseQuestionResponses:function initialiseQuestionResponses(t,n){if(this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW){var i=this,u=l.a.map(t,(function(t){return A.a.prototype.getIdForResponseId(t.response_id,this.get("user_id"),this.get("consumer").get("id"))}),this);X.getQuestionResponses(u).then((function(d){return l.a.each(d,(function(t){i.retrievedQuestionResponsesCache[t.id]=t})),!i.has("session_id")&&d.length>0&&l.a.isString(d[0].session_id)&&i.set({session_id:d[0].session_id},{silent:!0}),l.a.map(u,(function(u,p){var h=t[p],g=l.a.findWhere(d,{id:u}),v=1===l.a.keys(h).length;return g?(v||"raw"!==i.get("questionSource"))&&(h=g.question):n||i.get("captureOnResumeError")&&!v||(h.error=10005),h}))}),(function(n){return i.get("captureOnResumeError")||l.a.each(t,(function(t){t.error=10005})),w.a.log(n),t})).then((function(t){H.prototype.initialiseQuestionResponses.call(i,t,n)}))}else H.prototype.initialiseQuestionResponses.call(this,t,n)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(t){l.a.each(this.retrievedQuestionResponsesCache,(function(t){if(l.a.isObject(t)){var n=this.get("questionResponses").get(t.id);this.retrievedQuestionResponsesCache[t.id]=!0,n.update({creation_date:t.creation_date,response:t.response,saved:!0})}}),this),t()},save:function save(t){if(this.saving)this.cacheSaveCall(Array.prototype.slice.call(arguments));else{this.saving=!0,this.trigger(this.EVENT.SAVE);var n,i=this.get("questionResponses").getInvalidQuestionResponses();if(i.length>0)return this.saving=!1,void this.saveFailedInvalidQuestions(t,i);var u=this.get("questionResponses").getQuestionResponsesModificationTimes(),l=this;t.submit&&!this.has("session_id")?(this.set({session_id:U.a.v4()},{silent:!0}),n=this.get("questionResponses").models):n=this.get("questionResponses").filter((function(t){return t.toBeSaved()})),X.saveQuestionResponses(n,this.get("session_id"),this.get("consumer").get("key")).then((function(){return l.saveSession(t,l.get("questionResponses").pluck("id"))})).then((function(){l.saving=!1,l.saveComplete(t,n,u)}),(function(n){l.saving=!1,l.saveFailed(t,n)})).then((function(){l.callCachedSaveCall()})),t.submit&&this.get("validateOnSubmit")&&this.validateQuestionsResponses()}},saveSession:function saveSession(t,n){if(t&&t.progress&&t.progress({state:"saving",percentage:90,bytesTotal:0,bytesUploaded:0}),!this.has("session_id")||!this.get("consumer").get("dashboardEnabled"))return G.default.resolve();if(!l.a.isString(this.get("id"))||this.get("id").length>36)return G.default.reject('must initialise with an "id" attribute that doesn\'t exceed 36 characters in length');if(!l.a.isString(this.get("name")))return G.default.reject('must initialise with a "name" attribute');if(this.has("description")&&(!l.a.isString(this.get("description"))||this.get("description").length>800))return G.default.reject('initialised with a "description" attribute that is not a valid string of less than 801 characters');var i={session_id:this.get("session_id"),user_id:this.get("user_id"),activity_id:this.get("id"),activity_name:this.get("name"),course_id:this.get("course_id"),consumer_key:this.get("consumer").get("key"),questions:n};return t.submit&&(i.submit=!0),this.has("description")&&(i.activity_description=this.get("description")),this.has("product_id")&&(i.product_id=this.get("product_id")),l.a.isObject(this.get("metadata"))||l.a.isObject(t.metadata)?i.metadata=l.a.extend({},this.get("metadata"),t.metadata):i.metadata={},i.metadata.user_agent=window.navigator.userAgent,X.saveSession(i)},saveComplete:function saveComplete(t,n,i){l.a.each(n,(function(t){t.getLastModifiedTime()===i[t.id]&&t.setAsSaved()})),t&&t.progress&&t.progress({state:"saving",percentage:100,bytesTotal:0,bytesUploaded:0}),t&&(t.submit?this.trigger(this.EVENT.SUBMITTED):this.trigger(this.EVENT.SAVED),t.success&&t.success(l.a.map(n,(function(t){return t.get("response_id")}))))},saveFailed:function saveFailed(t,n){var i={i18n:this.get("i18n")};l.a.isString(n)&&-1!==n.indexOf("ConstraintError")?(i.code=10002,i.detail="At least one of the response_id has been previously provided"):(i.code=10004,i.detail="Save responses failed"+(n?": "+n.toString():"")),w.a.exception(i,t?t.error:null)},saveFailedInvalidQuestions:function saveFailedInvalidQuestions(t,n){var i=[],u=[];l.a.each(n,(function(t){i.push('Question "'+t.get("response_id")+'" of type "'+t.get("type")+'" has an invalid response'),u.push(t.get("response_id"))})),w.a.exception({code:10013,detail:i.join(", "),response_id:u,i18n:this.get("i18n")},t?t.error:null)},discard:function discard(t){throw new Error('"discard" public method is not supported on type: offline_app')},callCachedSaveCall:function callCachedSaveCall(){if(l.a.isArray(this.cachedSaveCallArguments)){var t=this.cachedSaveCallArguments;this.clearCachedSaveCall(),this.save.apply(this,t)}},cacheSaveCall:function cacheSaveCall(t){this.cachedSaveCallArguments=t},clearCachedSaveCall:function clearCachedSaveCall(){this.cachedSaveCallArguments=null}}),Z=H.extend({initialize:function initialize(){H.prototype.initialize.call(this),this.questionsBeingCaptured={},this.questionsToCaptureIfResumeFailed={},this.questionResponseIdsToFetch={},this.fetchedQuestionResponses={},this.saving=!1,this.cachedSaveCallArguments=null,this.on(this.EVENT.READY,(function(){this.get("state")!==this.STATE.INITIAL&&this.get("state")!==this.STATE.RESUME||this.captureQuestionResponses()}),this),this.has("consumer")&&this.get("consumer").has("syncMsgFrequencyOnSave")&&(this.throttlingSessionDataSync=!0,this.lastSessionDataSyncTimeMs=0)},validateActivity:function validateActivity(){if(H.prototype.validateActivity.call(this),this.get("consumer").get("dashboardEnabled")){if(!l.a.isString(this.get("id")))throw new this.ValidationError('Valid "id" attribute missing from Activity');if(this.get("id").length>36)throw new this.ValidationError('"id" attribute should not exceed 36 characters');if(this.get("user_id").length>50)throw new this.ValidationError('"user_id" attribute should not exceed 50 characters');if(!l.a.isString(this.get("name")))throw new this.ValidationError('Valid "name" attribute missing from Activity');if(!l.a.isString(this.get("course_id")))throw new this.ValidationError('Valid "course_id" attribute missing from Activity');if(this.has("description")&&(!l.a.isString(this.get("description"))||this.get("description").length>800))throw new this.ValidationError('Provided "description" attribute is not a valid string of less than 801 characters');if(this.has("session_id")&&!U.a.check.test(this.get("session_id").toLowerCase()))throw new this.ValidationError('"session_id" attribute is not a valid UUID')}if(this.get("renderSubmitButton")&&0===y()(".learnosity-submit-button").length)throw new this.ValidationError('"renderSubmitButton" attribute is true, but no DOM element was found to render');if(this.get("renderSaveButton")&&0===y()(".learnosity-save-button").length)throw new this.ValidationError('"renderSaveButton" attribute is true, but no DOM element was found to render');if(this.has("responses"))throw new this.ValidationError('"responses" attribute found in Activity, but not supported for type: '+this.get("type"))},initialiseQuestionResponses:function initialiseQuestionResponses(t,n){var i=this,u=this.makeQuestionResponseIds(l.a.pluck(t,"response_id")),d=this.haveToFetchQuestionResponses(),p=d&&("raw"!==this.get("questionSource")||l.a.some(t,(function(t){return 1===l.a.keys(t).length})));l.a.each(u,(function(t){d&&(i.questionResponseIdsToFetch[t]=!0),(n||d&&i.get("captureOnResumeError"))&&(i.questionsToCaptureIfResumeFailed[t]=!0)})),p?this.getQuestionResponses(u,(function(){var u=[];l.a.each(i.fetchedQuestionResponses,(function(n){if(l.a.isObject(n)){if(!n.hasOwnProperty("question")){var d=A.a.prototype.getResponseId(n.id,i.get("user_id"),i.get("consumer").get("id")),p=l.a.findWhere(t,{response_id:d});10005===n.error&&i.questionsToCaptureIfResumeFailed[n.id]&&l.a.isObject(p)&&l.a.keys(p).length>1?n.question=p:n.question={response_id:d,error:n.error}}u.push(n.question)}})),H.prototype.initialiseQuestionResponses.call(i,u,n)})):H.prototype.initialiseQuestionResponses.call(this,t,n)},makeQuestionResponseIds:function makeQuestionResponseIds(t){return l.a.map(t,(function(t){return A.a.prototype.getIdForResponseId(t,this.get("user_id"),this.get("consumer").get("id"))}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return l.a.some(this.questionResponseIdsToFetch)&&this.haveToFetchQuestionResponses()},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(t){var n=this.get("questionResponses").filter((function(t){return l.a.isUndefined(this.fetchedQuestionResponses[t.get("id")])}),this);if(n.length){var i=l.a.pluck(n,"id");this.getQuestionResponses(i,l.a.bind((function(){this.setResponsesFromQuestionResponsesCache(),t()}),this))}else this.setResponsesFromQuestionResponsesCache(),t()},haveToFetchQuestionResponses:function haveToFetchQuestionResponses(){return this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW},setResponsesFromQuestionResponsesCache:function setResponsesFromQuestionResponsesCache(){l.a.each(this.fetchedQuestionResponses,(function(t){if(l.a.isObject(t)){var n=this.get("questionResponses").get(t.id);this.fetchedQuestionResponses[t.id]=!0,this.questionResponseIdsToFetch[t.id]=!1,n.has("question")&&(delete t.question,delete t.type),10005===t.error&&this.questionsToCaptureIfResumeFailed[t.id]&&n.has("question")&&delete t.error,n.update(t)}}),this)},isCapturingQuestions:function isCapturingQuestions(){return!l.a.isEmpty(this.questionsBeingCaptured)},allQuestionsCaptured:function allQuestionsCaptured(){return this.get("questionResponses").every((function(t){return t.isCaptured()}))},captureQuestionResponses:function captureQuestionResponses(){if(this.questionResponsesReady){var t=this.get("questionResponses").getToBeCapturedQuestionResponseJson();if(0!==(t=l.a.filter(t,(function(t){return!this.questionsBeingCaptured[t.id]}),this)).length){var n=this;l.a.each(t,(function(t){this.questionsBeingCaptured[t.id]=!0}),this);var i=function clearCapturingQuestions(){l.a.each(t,(function(t){delete n.questionsBeingCaptured[t.id]}))};z.a.request({url:"/questionresponses",action:z.a.ACTION.SET,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id")},data:{questionResponses:t},success:function success(t){n.get("questionResponses").markAsCaptured(t.response.data),i(),n.callCachedSaveCall()},failure:function failure(t){var u,d;l.a.isArray(n.cachedSaveCallArguments)&&n.cachedSaveCallArguments.length>0&&l.a.isFunction(n.cachedSaveCallArguments[0].error)&&(d=n.cachedSaveCallArguments[0].error),i(),n.clearCachedSaveCall(),t&&409===t.status?u={code:10002,detail:"At least one of the response_id has been previously provided",i18n:n.get("i18n")}:(u={code:10016,detail:"There was an error trying to capture the questions",i18n:n.get("i18n")},t&&(u.detail+=": "+t.status+" - ",l.a.isObject(t.response)&&t.response.meta?u.detail+=t.response.meta.message:u.detail+=t.response),n.get("uiErrorOnCaptureFailure")||(u.errorUI="none")),w.a.exception(u,d)}})}}},getQuestionResponses:function getQuestionResponses(t,n){var i=this;l.a.each(t,(function(t){this.fetchedQuestionResponses[t]=!0}),this),z.a.request({url:"/questionresponses",action:z.a.ACTION.GET,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id")},data:{questionResponseIds:t,questionSource:this.get("questionSource")},success:function success(t){l.a.each(t.response.data,(function(t){i.fetchedQuestionResponses[t.id]=t})),n()},failure:function failure(t){w.a.exception({code:10025,detail:"Status: "+t.status+(-1===t.status?", "+t.response:""),i18n:i.get("i18n")})}})},persistQuestionResponses:function persistQuestionResponses(t,n){var i=this,u={},d=function savedSuccessfully(u){var l=i.EVENT,d={state:"saving",percentage:100,bytesTotal:n.totalBytes,bytesUploaded:n.bytesUploaded};if(t&&t.progress&&t.progress(d),i.trigger(l.SAVE_PROGRESSING,d),t){var p=t.submit;p?i.trigger(l.SUBMITTED,{responseIds:u,submit:p}):i.trigger(l.SAVED,{responseIds:u,submit:p}),t.success&&t.success(u)}i.callCachedSaveCall()},p=this.shouldSendSessionDataToSync(t);if(p&&(u.submit=t.submit,u.state=this.get("state"),u.user_id=this.get("user_id"),u.activity_id=this.get("id"),u.activity_name=this.get("name"),this.has("description")&&(u.activity_description=this.get("description")),u.course_id=this.get("course_id"),this.has("product_id")&&(u.product_id=this.get("product_id")),this.has("session_id")&&(u.session_id=this.get("session_id")),l.a.isObject(this.get("metadata"))||l.a.isObject(t.metadata)?u.metadata=l.a.extend({},this.get("metadata"),t.metadata):u.metadata={},u.metadata.user_agent=window.navigator.userAgent,u.init_metadata=this.get("initMetadata")),u.questionResponses=this.get("questionResponses").getToBeSavedQuestionResponseJson(),u.submit&&(u.questionResponseIdsForReScore=this.get("questionResponses").getQuestionResponseIdsForReScore()),u.questionResponses.length>0||p){var h=this.get("questionResponses").getQuestionResponsesModificationTimes();z.a.request({url:"/questionresponses",action:z.a.ACTION.UPDATE,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id")},data:u,success:function success(t){var n=t.response.data;i.saving=!1,i.get("questionResponses").markAsSavedIfModified(n,h),p&&i.throttlingSessionDataSync&&(i.lastSessionDataSyncTimeMs=Date.now()),d(i.get("questionResponses").getResponseIds(n))},failure:function failure(n){i.saving=!1;var u=t?t.error:void 0,d={code:10004,detail:"Save responses failed",i18n:i.get("i18n")};n&&(d.detail+=": "+n.status,l.a.isObject(n.response)&&n.response.meta?d.detail+=" - "+n.response.meta.message:d.detail+=" - "+n.response),w.a.exception(d,u),i.callCachedSaveCall()}})}else i.saving=!1,d([])},shouldSendSessionDataToSync:function shouldSendSessionDataToSync(t){if(t.submit)return!0;if(this.has("session_id")){if(!this.throttlingSessionDataSync)return!0;if((Date.now()-this.lastSessionDataSyncTimeMs)/1e3>=this.get("consumer").get("syncMsgFrequencyOnSave"))return!0}return!1},checkSaveProgressThenPersistQuestionResponses:function checkSaveProgressThenPersistQuestionResponses(t){var n=this.EVENT.SAVE_PROGRESSING,i=!0,u=0,d=0;if(l.a.each(this.hooks.saveProgress,(function(t){if(l.a.isFunction(t)){var n=t();i=i&&n.uploadComplete,u+=n.bytesUploaded,d+=n.totalBytes}})),i){var p={state:"saving",percentage:90,bytesTotal:d,bytesUploaded:u};t.progress&&t.progress(p),this.trigger(n,p),this.persistQuestionResponses(t,{totalBytes:d,bytesUploaded:u})}else{var h=Math.round(u/d*85),g={state:d===u?"saving":"uploading",percentage:h,bytesTotal:d,bytesUploaded:u};t.progress&&t.progress(g),this.trigger(n,g),l.a.delay(l.a.bind(this.checkSaveProgressThenPersistQuestionResponses,this),500,t)}},save:function save(t){if(this.isCapturingQuestions()||this.saving)this.cacheSaveCall(Array.prototype.slice.call(arguments));else if(this.allQuestionsCaptured()){this.saving=!0,this.trigger(this.EVENT.SAVE,{submit:t.submit});var n=this.get("questionResponses").getInvalidQuestionResponses();if(n.length){this.saving=!1;var i=t?t.error:void 0,u=[],d=[];l.a.each(n,(function(t){u.push('Question "'+t.get("response_id")+'" of type "'+t.get("type")+'" has an invalid response'),d.push(t.get("response_id"))})),w.a.exception({code:10013,detail:u.join(", "),response_id:d},i)}else this.checkSaveProgressThenPersistQuestionResponses(t),t.submit&&this.get("validateOnSubmit")&&this.validateQuestionsResponses()}else this.cacheSaveCall(Array.prototype.slice.call(arguments)),this.captureQuestionResponses()},discard:function discard(t){var n=this;z.a.request({url:"/questionresponses",action:z.a.ACTION.DELETE,security:this.get("security").getRequestParameters(),analytics:{sessionId:this.get("session_id")},data:{activity_id:this.get("id"),activity_name:this.get("name"),course_id:this.get("course_id"),session_id:this.get("session_id")},success:function success(i){l.a.isFunction(t.success)&&t.success(i),n.trigger(n.EVENT.DISCARDED)},failure:function failure(i){var u=t?t.error:void 0,d={code:10021,detail:"Discard responses failed",i18n:n.get("i18n")};i&&(d.detail+=": "+i.status,l.a.isObject(i.response)&&i.response.meta?d.detail+=" - "+i.response.meta.message:d.detail+=" - "+i.response),w.a.exception(d,u)}})},callCachedSaveCall:function callCachedSaveCall(){if(l.a.isArray(this.cachedSaveCallArguments)){var t=this.cachedSaveCallArguments;this.clearCachedSaveCall(),this.save.apply(this,t)}},cacheSaveCall:function cacheSaveCall(t){this.cachedSaveCallArguments=t},clearCachedSaveCall:function clearCachedSaveCall(){this.cachedSaveCallArguments=null},validateQuestionsJson:function validateQuestionsJson(t){var n=this.get("questionResponses").RESPONSE_ID_MAX_CHAR;H.prototype.validateQuestionsJson.call(this,t),t.forEach((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.response_id&&t.response_id.length>n)throw new j("At least one of the response_id is invalid")}))}}),ee=Q.prototype.TYPE;var te={getActivity:function getActivity(t){var n;switch(t.type){case ee.OFFLINE_APP:n=new K(t);break;case ee.SUBMIT_PRACTICE:case ee.TEST:n=new Z(t);break;default:n=new Q(t)}return n}},ne=i(30),ie=g.a.Model.extend({defaults:{domain:E.a.domain},getRequestParameters:function getRequestParameters(){var t={consumer_key:this.get("consumer_key"),domain:this.get("domain"),timestamp:this.get("timestamp"),user_id:this.get("user_id"),signature:this.get("signature")};return this.has("expires")&&(t.expires=this.get("expires")),t},getTimestamp:function getTimestamp(){var t=this.get("timestamp");return Date.UTC(t.substr(0,4),parseInt(t.substr(4,2),10)-1,t.substr(6,2))}}),re=g.a.Model.extend({initialize:function initialize(){this.set({requireQuestionType:!l.a.contains(["0003","0005","0006","0007","0044","0045"],this.get("id"))})},hasPermissions:function hasPermissions(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.get("featureFlags")||{},i=n.video_student,u=!1;switch(t){case"fileupload_video":u=!!this.get("processVideo");break;case"video_student":u=l.a.isBoolean(i)&&i}return u}}),ae=i(47),se=i.n(ae),oe=g.a.View.extend({template:se.a,progressCalledFirstTime:!1,events:{"click .lrn_btn:not(:disabled)":"persistQuestions"},initialize:function initialize(){var t=this.options.activity,n=t.EVENT;this.activity=t,this.i18n=this.activity.get("i18n"),this.app=this.options.app;var i=".learnosity-save-button";this.options.submit&&(i=".learnosity-submit-button");var u=y()(i+".activity-"+this.activity.get("localActRef"));this.activity.has("localActRef")&&u.length>0?this.setElement(u[0]):this.setElement(l.a.find(y()(i),(function(t){for(var n=t.className.split(/\s+/),i=!1,u=0;u<n.length&&!i;u++)i=i||0===n[u].indexOf("activity-");return!i})));var d=this.activity.get("questionResponses");d.bind(d.EVENT.MODIFIED,this.questionModifiedHandler,this),this.progressHandler=this.progressHandler.bind(this),t.on(n.SAVE,this.persistControlInitialState,this),this.options.submit?t.on(n.SUBMITTED,this.activityPersistHandler,this):t.on(n.SAVED,this.activityPersistHandler,this),this.displayLogic={},this.addRenderingLogic(),this.render()},render:function render(){var t=(this.activity.id?this.activity.id:this.cid)+(this.options.submit?"-submit":"-save"),n=this.$el,i=y()(this.template({id:t,displayLogic:this.displayLogic}));return this.setElement(i),n.replaceWith(i),this},addRenderingLogic:function addRenderingLogic(){var t=this.i18n,n=this.activity,i=this.options.submit,u=n.get("questionResponses");this.displayLogic.submit=i,this.displayLogic.label=i?t.labels.submitButtonLabel:t.labels.saveButtonLabel,this.displayLogic.disabled=i&&"resume"===n.get("state")?!u.areThereQuestionsAnswered():!u.areThereQuestionsModified()},persistControlInitialState:function persistControlInitialState(t){if(this.options.submit===t.submit){var n=this.activity;this.$(".lrn_btn").attr("disabled","disabled"),n.off(n.EVENT.SAVE_PROGRESSING,this.progressHandler).on(n.EVENT.SAVE_PROGRESSING,this.progressHandler)}},questionModifiedHandler:function questionModifiedHandler(){!this.activity.saving&&this.$(".lrn_btn:disabled").length>0&&this.$(".lrn_btn").removeAttr("disabled").children("span").text(this.options.submit?this.i18n.labels.submitButtonLabel:this.i18n.labels.saveButtonLabel)},activityPersistHandler:function activityPersistHandler(t){var n=t.responseIds,i=t.submit,u=this.activity;this.options.submit===i&&this.$(".lrn_btn").attr("disabled","disabled"),u.off(u.EVENT.SAVE_PROGRESSING,this.progressHandler),this.successHandler(n)},persistQuestions:function persistQuestions(){this.options.submit?this.app.submit():this.app.save()},successHandler:function successHandler(t){this.$(".lrn_spinner").remove(),this.$(".lrn_btn span").text(this.options.submit?this.i18n.labels.submitComplete:this.i18n.labels.saveComplete),this.progressCalledFirstTime=!1,this.app.options&&this.app.options.saveSuccess&&this.app.options.saveSuccess(t)},progressHandler:function progressHandler(t){if(0===this.$(".lrn_spinner").length){var n=this.options.submit?this.i18n.labels.submitInProgress:this.i18n.labels.saveInProgress;!this.progressCalledFirstTime&&parseInt(t.percentage,10)>85?(this.$(".lrn_btn").prepend('<div class="lrn_spinner"></div>'),this.$(".lrn_btn span").text(n)):this.$(".lrn_btn span").text(n+" "+t.percentage+"%")}this.progressCalledFirstTime=!0,this.app.options&&this.app.options.saveProgress&&this.app.options.saveProgress(t)}}),ue=i(19),le=i(11),ce=i(12);function hasRequiredStringAttributes(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return t&&l.a.isString(n)&&n.length>0}))}function performanceTrackTimingStart(t,n){hasRequiredStringAttributes(t,n)&&ce.a.trackTimingStart(t,n)}function performanceTrackTimingEnd(t,n,i,u){l.a.isObject(t)&&hasRequiredStringAttributes(n,i)&&(l.a.isObject(t._internal)||(t._internal={}),l.a.isArray(t._internal.performanceMetrics)||(t._internal.performanceMetrics=[]),t._internal.performanceMetrics.push(ce.a.trackTimingEnd(n,i,null,null,u)))}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,u=new Array(n);i<n;i++)u[i]=t[i];return u}var de=function ActivityRenderer(){this.questionViews={},this.featureViews={},this.qrGroupFeatureViews={},this.submitButtonRendered=!1,this.saveButtonRendered=!1,this.pendingViews={}},pe="feature-",he="question-";l.a.extend(de.prototype,g.a.Events,{EVENT:{VIEWS_RENDERED:"viewsRendered",READY:"ready"},render:function render(t,n){var i,u,d,p,h=this,g=[],v=t.get("featureModels"),y=t.get("questionResponses"),S=t.qrGroupFeatures,E=new G.default((function(t,n){d=t,p=n})).catch(l.a.noop);if(this.app=n,v=v.filter((function(t){return l.a.isUndefined(this.featureViews[t.get("feature_id")])&&!this.pendingViews[pe+t.get("feature_id")]}),this),y=y.filter((function(t){return l.a.isUndefined(this.questionViews[t.id])&&!this.pendingViews[he+t.id]}),this),S=l.a.filter(S,(function(t){return l.a.isUndefined(this.qrGroupFeatureViews[t.get("groupId")])}),this),u="mathquill"===t.get("math_renderer"),i="mathquill"!==t.get("math_renderer")&&(l.a.any(y,(function(t){var n=t.get("question");return n.is_math&&"mathquill"!==n.math_renderer}))||l.a.any(v,(function(t){return t.get("is_math")&&"mathquill"!==t.get("math_renderer")}))),l.a.each(v,(function(t){this.pendingViews[pe+t.get("feature_id")]=!0}),this),l.a.each(y,(function(t){this.pendingViews[he+t.id]=!0}),this),this.once(this.EVENT.VIEWS_RENDERED,(function(){var t=this;u?(performanceTrackTimingStart("render","MathQuill render"),this.renderMathquill().then((function(){performanceTrackTimingEnd(n,"render","MathQuill render"),t.trigger(t.EVENT.READY),d()}))):i?(performanceTrackTimingStart("render","MathJax render"),le.a.once(le.a.EVENT.RENDERED,(function(){performanceTrackTimingEnd(n,"render","MathJax render"),this.trigger(this.EVENT.READY),d()}),this),le.a.isInitalised()?le.a.render():le.a.init()):(this.trigger(this.EVENT.READY),p())}),this),l.a.each(v,l.a.deferWithContext((function(i){var u=l.a.getNested(i,"attributes.type"),d=i.get("feature_id"),p={el:".learnosity-feature.feature-".concat(d),model:i,i18n:t.get("i18n"),activity:t,initialisationCallback:l.a.bind(h.viewIntialised,h,pe+i.get("feature_id"),u,d),mathRenderPromise:E};performanceTrackTimingStart("render","view:render ".concat(u," ").concat(d));var g=new i.viewClass(p);h.featureViews[i.get("feature_id")]=g,g.model.on("destroy",(function(){var t=i.get("feature_id");n.removeFeatureFacade(t),delete h.featureViews[t]})),n.addFeatureFacade(i.get("feature_id"),g.getFacade())}))),l.a.each(y,(function(i,u){if(l.a.defer((function(){var d=l.a.getNested(i,"attributes.type"),p=i.get("response_id"),g={el:".learnosity-response.question-".concat(p),model:i,activity:t,initialisationCallback:l.a.bind(h.viewIntialised,h,he+i.id,d,p),mathRenderPromise:E,questionNumber:u+1,services:{renderViewSimpleFeatures:function renderViewSimpleFeatures(t){h.simpleFeaturesRenderer&&t.renderSimpleFeatures(h.simpleFeaturesRenderer)}}},v=i.viewClass;performanceTrackTimingStart("render","view:render ".concat(d," ").concat(p));var y=new v(g);h.questionViews[i.id]=y,n.addQuestionFacade(i.get("response_id"),y.getFacade())})),i.has("error")){var d=i.get("response_id");switch(i.get("error")){case 10005:g.push({code:10005,detail:"Response id "+d+" not found.",response_id:d});break;case 10007:g.push({code:10007,detail:"Authorisation failed. User id did not match user id of creator for "+d,response_id:d});break;case 10010:g.push({code:10010,detail:"Audio asset expired. The asset for response_id "+d+" is no longer available.",response_id:d});break;default:w.a.log("Unknown error: "+i.get("error")+" on response_id: "+d)}}})),l.a.each(S,(function(n){var i=n.viewClass;if(l.a.isUndefined(i))w.a.log("Question group feature: "+n.id+" doesn`'t have a View defined");else{var u=new i({id:n.id,collection:n,activity:t});h.qrGroupFeatureViews[n.get("groupId")]=u}})),t.get("renderSubmitButton")&&!this.submitButtonRendered&&(new oe({submit:!0,activity:t,app:n}),this.submitButtonRendered=!0),t.get("renderSaveButton")&&!this.saveButtonRendered&&(new oe({submit:!1,activity:t,app:n}),this.saveButtonRendered=!0),g.length>0)for(var A=t.get("i18n"),T=0;T<g.length;T++)g[T].i18n=A,w.a.exception(g[T]);y.length+v.length===0&&this.trigger(this.EVENT.VIEWS_RENDERED)},renderMathquill:function renderMathquill(){return this.mathquillRenderer||(this.mathquillRenderer=new ue.a),this.mathquillRenderer.render()},viewIntialised:function viewIntialised(t,n,i){performanceTrackTimingEnd(this.app,"render","view:render ".concat(n," ").concat(i),!0),this.pendingViews[t]=!1,l.a.every(this.pendingViews,(function(t){return!t}))&&this.trigger(this.EVENT.VIEWS_RENDERED)},renderSimpleFeaturesInWidgets:function renderSimpleFeaturesInWidgets(t){var n=[].concat(_toConsumableArray(l.a.values(this.questionViews)),_toConsumableArray(l.a.values(this.featureViews)));return l()(n).map((function(n){return n.renderSimpleFeatures(t)}))},reset:function reset(){l.a.each(this.questionViews,(function(t){return t.reset&&t.reset()})),l.a.each(this.featureViews,(function(t){return t.reset&&t.reset()})),this.questionViews={},this.featureViews={},this.off()}});var fe=de,ge=i(7),me={namespace:"lrn_",dbName:"LrnKeyedStorage",dbVersion:1},ve=function LrnIndexedDB(t){this.options=l.a.extend({},me,t),this.initialised=!1},ye=function handleInitIndexedDBError(t){w.a.warning("Failed to persist Application state. IndexedDB, Local Storage, or Cookies might be disabled."),w.a.warning(t)};l.a.extend(ve.prototype,{get:function get(t){var n=this;return this._initIndexedDB().then((function(){return new G.default((function(i,u){n._indexedDBTransaction().then((function(l){var d=l.get(_wrapNamespace(t,n.options));d.onsuccess=function(){i(d.result)},d.onerror=function(t){u("INDEXEDDB_ERR: get error: "+(t.target?t.target.errorCode:t.message))}}))}))}))},set:function set(t,n){var i=this;return this._initIndexedDB().then((function(){return new G.default((function(u,l){i._indexedDBTransaction().then((function(d){var p=d.put(n,_wrapNamespace(t,i.options));p.onsuccess=u,p.onerror=function(t){l("INDEXEDDB_ERR: set error: "+(t.target?t.target.errorCode:t.message))}}))}))})).catch(ye)},remove:function remove(t){var n=this;return this._initIndexedDB().then((function(){return new G.default((function(i,u){n._indexedDBTransaction().then((function(l){var d=l.delete(_wrapNamespace(t,n.options));d.onsuccess=i,d.onerror=function(t){u("INDEXEDDB_ERR: remove error: "+(t.target?t.target.errorCode:t.message))}}))}))})).catch(ye)},clear:function clear(){var t=this;return this._initIndexedDB().then((function(){return new G.default((function(n,i){t._indexedDBTransaction().then((function(t){var u=t.clear();u.onsuccess=function(){n()},u.onerror=function(t){i("INDEXEDDB_ERR: clear error: "+(t.target?t.target.errorCode:t.message))}}))}))})).catch(ye)},_initIndexedDB:function _initIndexedDB(){var t=this;return this.initialised||(this.initialised=!0,this.status=new G.default((function(n,i){t.storage=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;var u=t.storage.open(t.options.dbName,t.options.dbVersion);u.onupgradeneeded=function(t){var n=t.target.result;try{n.createObjectStore("storage")}catch(n){"ConstraintError"!==n.name&&i("INDEXEDDB_ERR: database create/upgrade error: "+(t.target?t.target.errorCode:t.message))}},u.onerror=function(t){i("INDEXEDDB_ERR: database open error: "+(t.target?t.target.errorCode:t.message))},u.onsuccess=function(i){t.database=i.target.result,n()}}))),this.status},_indexedDBTransaction:function _indexedDBTransaction(){try{var t=this.database.transaction(["storage"],"readwrite").objectStore("storage");return G.default.resolve(t)}catch(t){return G.default.reject(t)}}});var be=function LrnLocalStorage(t){this.options=l.a.extend({},me,t),this.isIndexed=!1;try{this.storage=window.localStorage||{}}catch(t){this.storage=null}};function _wrapNamespace(t,n){return(n.namespace||"")+t}l.a.extend(be.prototype,{rejectUninitializedStorage:function rejectUninitializedStorage(){return G.default.reject("LOCALSTORAGE_ERR: "+this.options.notInitialisedMessage)},get:function get(t){if(!this.storage)return G.default.resolve();var n=this.storage.getItem(_wrapNamespace(t,this.options));return G.default.resolve(function _unserialize(t){if("string"!=typeof t)return;try{return JSON.parse(t)}catch(n){return t}}(n))},set:function set(t,n){if(!this.storage)return this.rejectUninitializedStorage();var i=this,u=function setValue(u,l){i.storage.setItem(_wrapNamespace(t,i.options),function _serialize(t){return JSON.stringify(t)}(n)),u()};return new G.default(u).then(null,(function(){return i.remove(t),new G.default(u)})).then(null,(function(){return i.rejectUninitializedStorage()}))},remove:function remove(t){return this.storage?(this.storage.removeItem(_wrapNamespace(t,this.options)),G.default.resolve()):G.default.resolve()},clear:function clear(){return this.storage?(this.storage.clear(),G.default.resolve()):G.default.resolve()}});var Se=function _supportsIndexedDB(){try{var t=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(t){var n=t.open(me.dbName+"_",me.dbVersion);return n.onsuccess=n.onerror=function(){t.deleteDatabase(me.dbName+"_")},!0}return!1}catch(t){return!1}}()?ve:be;var Ee={isValidURL:function isValidURL(t){return!!t&&new RegExp("^(http://www.|https://www.|http://|https://)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$","g").test(t)},DEFAULT_URL_SCHEME:"//",containsURLScheme:function containsURLScheme(t){return new RegExp("[/]{2}").test(t)},isExternalURL:function isExternalURL(t){return new RegExp(".*\\/.*\\.css").test(t)}};var we={loadClientCSS:function loadClientCSS(t){var n=Ee.isExternalURL(t);n?Ee.containsURLScheme(t)||(t=Ee.DEFAULT_URL_SCHEME+t):t="/stylesheets/css/clients/"+t,LearnosityApp._internal.loadCss(t,n)}},_e=i(28),Ae=i(32);function _isString(t){return"[object String]"===Object.prototype.toString.call(t)}function isValidConfig(t){return _isString(t)&&t.length>0&&-1===t.indexOf("{:")}function loadGTM(t,n){!window[n]&&t&&n&&function(t,n,i,u,l){t[u]=t[u]||[],t[u].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var d=n.getElementsByTagName(i)[0],p=n.createElement(i),h="dataLayer"!==u?"&l="+u:"";p.async=!0,p.src="https://www.googletagmanager.com/gtm.js?id="+l+h,d.parentNode.insertBefore(p,d)}(window,document,"script",n,t)}var Te={init:function analyticsPrimer_init(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.instance,i=t.config,u=void 0===i?{}:i,l=isValidConfig(t.gtmContainerID)?t.gtmContainerID:"",d=isValidConfig(t.gtmDataLayer)?t.gtmDataLayer:"";window.lrnAnalytics=window.lrnAnalytics||[],_isString(t.app)&&window.lrnAnalytics.push({application:t.app,event:"app_init",instance:n,gtmContainerID:l,dataLayerVariable:d,config:u}),t.disableGTM||loadGTM(l,d)}},Re=(i(22),i(53),i(52),i(27),i(21),i(55),i(57),i(31),i(56),i(23),i(58),function App(t,n,i,u,d,p){performanceTrackTimingStart("init","app.js init");var h,g,v=this;t&&(h=l.a.deepExtend({},t)),n&&(g=l.a.deepExtend({},n)),this.resetInstanceVariables(),this.isReset=!1,this.options=g,this.i18n=u;var S=new Se;ce.a.setActivity(h),this.options&&(this.options.saveSuccess&&(this.saveEventHandlers.success=this.options.saveSuccess),this.options.saveError&&(this.saveEventHandlers.error=this.options.saveError),this.options.saveProgress&&(this.saveEventHandlers.progress=this.options.saveProgress),this.options.discardSuccess&&(this.discardEventHanders.success=this.options.discardSuccess),this.options.discardError&&(this.discardEventHanders.error=this.options.discardError),this.options.context&&(ce.a.setContext(this.options.context),ce.a.setFullContext(this.options.analyticsContext),delete this.options.context,delete this.options.analyticsContext),this.options.metricsContext&&(z.a.setMetricsContext(this.options.metricsContext),delete this.options.metricsContext)),this.unloadHandler=new ne.a,this.unloadHandler.init({i18n:this.i18n,safeToUnload:this.safeToUnload.bind(this),customUnload:this.options&&this.options.customUnload});var A=function authenticateSuccess(t){if(v.trigger(v.EVENT.BEFORE_READY,v),!v.isReset){var n=t.consumerData,u=Ae.a.getTextDirection();if(l.a.isObject(n)&&l.a.isString(n.id)&&l.a.isString(n.name)){var g={id:n.id,name:n.name,key:h.consumer_key,dashboardEnabled:n.dashboardEnabled,assetMaxSize:n.assetMaxSize,processVideo:n.processVideo,featureFlags:n.featureFlags,audioBitDepth:n.audioBitDepth,audioSampleRate:n.audioSampleRate};l.a.isString(n.cssFile)&&(g.cssFile=n.cssFile),l.a.isNumber(n.syncMsgFrequencyOnSave)&&(g.syncMsgFrequencyOnSave=n.syncMsgFrequencyOnSave);var E=new re(g);v.consumer=E,ce.a.setConsumer(E),LearnosityApp._internal.rollbarInstance&&LearnosityApp._internal.rollbarInstance.configure({payload:{consumer:{featureFlags:E.get("featureFlags"),id:E.get("id"),key:E.get("key"),name:E.get("name")}}}),v.consumer.has("cssFile")&&we.loadClientCSS(E.get("cssFile"));var A={apiVersion:d,requestedApiVersion:p,state:h.state,type:h.type,user_id:h.user_id,number_questions:l.a.isBoolean(h.number_questions)&&h.number_questions,questions:h.questions,features:h.features,responses:h.responses,fontsize:h.fontsize,math_renderer:h.math_renderer,id:h.id,name:h.name,course_id:h.course_id||"none",renderSubmitButton:h.renderSubmitButton,renderSaveButton:h.renderSaveButton,validateOnSubmit:l.a.isBoolean(h.validateOnSubmit)&&h.validateOnSubmit,showCorrectAnswers:h.showCorrectAnswers,show_distractor_rationale:h.show_distractor_rationale,allow_negative_scores:h.allow_negative_scores,showInstructorStimulus:h.showInstructorStimulus,security:v.security,consumer:v.consumer,i18n:v.i18n,localActRef:i,htmlCleaner:!l.a.isBoolean(h.htmlCleaner)||h.htmlCleaner,uiErrorOnCaptureFailure:!0,captureOnResumeError:l.a.isBoolean(h.captureOnResumeError)&&h.captureOnResumeError,questionSource:h.question_source,beta_flags:l.a.isObject(h.beta_flags)?h.beta_flags:{},initTime:t.initTime,skipHighlightAnimation:l.a.isBoolean(h.skip_highlight_animation)&&h.skip_highlight_animation,skipReplayAnimation:l.a.isBoolean(h.skip_replay_animation)&&h.skip_replay_animation,attribute_overrides:h.attribute_overrides||{},disable_spokenmath_user_inputs:l.a.isBoolean(h.disable_spokenmath_user_inputs)&&h.disable_spokenmath_user_inputs,disable_spokenmath_distractors:l.a.isBoolean(h.disable_spokenmath_distractors)&&h.disable_spokenmath_distractors,custom_widget_options:h.custom_widget_options||{},disable_auto_link:l.a.isBoolean(h.disable_auto_link)&&h.disable_auto_link,mirror_visibility:l.a.isBoolean(h.mirror_visibility)&&h.mirror_visibility,enable_formula_keyboard_lazy_render:l.a.isBoolean(h.enable_formula_keyboard_lazy_render)&&h.enable_formula_keyboard_lazy_render};l.a.isUndefined(A.questionSource)&&(A.questionSource=l.a.isBoolean(h.render_with_captured_questions)&&h.render_with_captured_questions?"original":"raw"),h.hasOwnProperty("product_id")&&(A.product_id=h.product_id),h.hasOwnProperty("description")&&(A.description=h.description),h.hasOwnProperty("session_id")&&(A.session_id=h.session_id),l.a.isObject(h.metadata)&&(A.metadata=h.metadata),l.a.isBoolean(h.uiErrorOnCaptureFailure)?A.uiErrorOnCaptureFailure=h.uiErrorOnCaptureFailure:l.a.isBoolean(h.retryCaptureOnFailure)&&(A.uiErrorOnCaptureFailure=!h.retryCaptureOnFailure),v.activity=te.getActivity(A),v.activityRenderer=new fe,v.activity.once(v.activity.EVENT.READY,(function(){ce.a.trackPageview(),performanceTrackTimingStart("init","app.js render")})),v.activity.on(v.activity.EVENT.READY,(function(){v.activityRenderer&&v.activityRenderer.render(v.activity,v)})),v.activityRenderer.on(v.activityRenderer.EVENT.READY,(function(){"ie"===ge.a.browser&&(y()(".lrn_widget").addClass("lrn-ie"),8!==ge.a.version&&9!==ge.a.version||y()(".lrn_widget").addClass("lrn_ie"+ge.a.version)),l.a.isNull(u)||y()(".lrn_widget").attr("dir",Ae.a.getDirection()),performanceTrackTimingEnd(v,"init","app.js render"),performanceTrackTimingEnd(v,"init","app.js init"),v.trigger(v.EVENT.READY,v)})),S.set(LearnosityApp.version+"_"+h.consumer_key+"_auth_response",n),v.activity.init()}else w.a.exception({code:10003,detail:"Authentication failed: consumer retrieved is invalid: "+JSON.stringify(n),i18n:v.i18n})}};if(h&&(y()(".learnosity-response, .learnosity-feature").each((function(){"ie"!==ge.a.browser||8!==ge.a.version&&9!==ge.a.version||y()(this).addClass("lrn_ie".concat(ge.a.version)),y()(this).is(":empty")&&y()(this).html(v.i18n.labels.loadingInfo)})),this.security=new ie({consumer_key:h.consumer_key,timestamp:h.timestamp,user_id:h.user_id,signature:h.signature}),h.expires&&this.security.set("expires",h.expires),l.a.isObject(E.a.consumer)?l.a.defer((function(){A({consumerData:E.a.consumer})})):this.authenticateAndPreloadBundles(S,h).then(A).catch((function(t){w.a.exception({code:10003,detail:t,i18n:v.i18n,consumerKey:"*".concat(v.security.get("consumer_key"))})}))),l.a.isObject(E.a.analytics)){var T=E.a.disableGTM||E.a.analytics.disableGTM||!0===E.a.analytics.disable;Te.init({app:E.a.appContext,disableGTM:T,gtmContainerID:E.a.analytics.gtmContainerID,gtmDataLayer:E.a.analytics.gtmDataLayer,instance:this})}return this});l.a.extend(Re.prototype,{EXPOSED_METHODS:["append","attemptedQuestions","disable","discard","enable","feature","features","getFeatures","getGroupScore","getMetadata","getQuestions","getResponses","getScores","masking","needsPushing","on","once","off","push","question","questions","renderMath","reset","retryQuestionCapture","safeToUnload","save","setScrollablePassagesContextHeight","submit","stopAllSimpleFeatures","unsaveableQuestions","validateQuestions","validQuestions","_analyticsPush","_getPerformanceMetrics"],EVENT:{BEFORE_READY:"beforeReady",READY:"ready"},authenticateAndPreloadBundles:function authenticateAndPreloadBundles(t,n){var i=this,u=function authFromOfflineCache(i,u){t.get("".concat(LearnosityApp.version,"_").concat(n.consumer_key,"_auth_response")).then((function(t){t?i({consumerData:t}):u("Authentication failed: no connection and application not ready to run offline")}))},d=new G.default((function(t,d){n.type===H.prototype.TYPE.OFFLINE_APP?u(t,d):(performanceTrackTimingStart("init","app.js authenticate"),z.a.request({url:"/authenticate",security:i.security.getRequestParameters(),success:function success(n){performanceTrackTimingEnd(i,"init","app.js authenticate");var u={consumerData:n.response.data};l.a.isObject(n.response.meta)&&(u.initTime=n.response.meta.timestamp),t(u)},failure:function failure(n){if(n.status>=400&&n.status<600){var i="Authentication failed: ".concat(n.status);l.a.isObject(n.response)&&n.response.meta?i+=" - ".concat(n.response.meta.message):i+=" - ".concat(n.response),d(i)}else-1!==n.status?u(t,d):d("Authentication failed: ".concat(n.response))}}))})),p=function preloadBundlePromise(t){var u,d="features"===t?M.a.prototype.TYPE:A.a.prototype.TYPE,p="features"===t?S.a.requireBundlesForFeatureTypes:S.a.requireBundlesForQuestionTypes,h=S.a.getBundleOptions(n.beta_flags),g=[];if(l.a.isArray(n[t])&&n[t].length){var v=n[t];l.a.each(v,(function(t){t.type!==d.UNKNOWN&&!l.a.include(g,t.type)&&l.a.include(d,t.type)&&g.push(t.type)}))}var y=g&&g.length;return u=new G.default((function(n,i){y?(performanceTrackTimingStart("init","app.js preloadBundles:".concat(t)),p(g,n,h)):n()})),y&&u.then((function(){return performanceTrackTimingEnd(i,"init","app.js preloadBundles:".concat(t))})),u};return G.default.all([d,p("questions"),p("features")]).then((function(t){return t[0]}))},resetInstanceVariables:function resetInstanceVariables(){this.activity=null,this.options=null,this.security=null,this.consumer=null,this.i18n=null,this.saveEventHandlers={},this.discardEventHanders={},this.activityRenderer=null,this.unloadHandler=null,this.questionFacades={},this.featureFacades={}},getFacade:function getFacade(t){var n=this,i={};return this.cachedFacade?i=this.cachedFacade:(l.a.each(n.EXPOSED_METHODS,(function(t){i[t]=function(){return n.facadeCtx||(n.facadeCtx=this),l.a.isObject(n.options)&&l.a.isString(l.a.getNested(n,"options.appParent"))||Object(_e.a)({app:window.LearnosityApp._internal.config.appContext,name:"publicMethod",publicMethod:t,args:arguments}),n[t].apply(n,arguments)}})),this.cachedFacade=i),l.a.isObject(t)&&(i=l.a.extend(t,i)),i},_analyticsPush:function _analyticsPush(t){var n="(not set)",i="";if(t)switch(l.a.isString(t.application)&&(n=t.application),t.event&&(i=t.event),i){case"timing_start":t.timing&&t.timing.category&&t.timing.variable&&ce.a.trackTimingStart(t.timing.category,t.timing.variable,t.timing.timestamp);break;case"timing_end":t.timing&&t.timing.category&&t.timing.variable&&ce.a.trackTimingEnd(t.timing.category,t.timing.variable,t.timing.timestamp,n);break;default:ce.a.push(t)}},_getPerformanceMetrics:function _getPerformanceMetrics(){return this._internal.performanceMetrics},reset:function reset(){this.activity&&(l.a.each(this.activity.hooks.reset,(function(t){l.a.isFunction(t)&&t()})),this.activity.off()),this.activityRenderer&&this.activityRenderer.reset(),this.unloadHandler&&this.unloadHandler.reset(),this.resetInstanceVariables(),this.isReset=!0},save:l.a.cancellableThrottle((function(t,n){if(this.activity){var i=y.a.extend({},this.saveEventHandlers,t),u=this.activity.get("state");if(i.submit=!!n,this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&u!==this.activity.STATE.REVIEW&&u!==this.activity.STATE.PREVIEW)this.activity.save(i);else{var l="Save responses failed. Save called on an invalid activity type / state";i.submit&&(l="Submit responses failed. Submit called on an invalid activity type / state"),w.a.exception({code:10004,detail:l},i.error)}}else this.saveCallCached||(this.saveCallCached=!0,this.once(this.EVENT&&this.EVENT.INITIALISED,(function(){this.saveCallCached=!1,this.save(t,n)}),this))}),5e3,!0),setScrollablePassagesContextHeight:function setScrollablePassagesContextHeight(t){this.simpleFeaturesRenderer.setScrollablePassagesContextHeight(t)},submit:function submit(t){this.save.cancel&&this.save.cancel(),this.save(t,!0)},discard:function discard(t){var n=y.a.extend({},this.discardEventHanders,t),i=this.activity.get("state");this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&i!==this.activity.STATE.REVIEW&&i!==this.activity.STATE.PREVIEW?this.activity.discard(n):w.a.exception({code:10021,detail:"Discard responses failed. Discard called on an invalid activity type / state"},n.error)},push:function push(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l.a.isObject(t)||(t={}),this&&!t.security&&(t.security=this.security.getRequestParameters()),t.security){t.security.domain=E.a.domain;try{X.init()}catch(n){return void w.a.exception({code:10027,detail:n.toString()},t.error)}X.pushAll(t.security).then(t.success,(function(n){w.a.exception({code:10027,detail:n.toString()},t.error)}))}else w.a.exception({code:10027,detail:"Missing security object"},t.error)},needsPushing:function needsPushing(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l.a.isObject(t)||(t={}),this&&!t.security&&(t.security=this.security.getRequestParameters()),t.security)if(t.success){try{X.init()}catch(n){return void w.a.exception({code:10028,detail:n.toString()},t.error)}X.needsPushing(t.security).then(t.success,(function(n){w.a.exception({code:10028,detail:n.toString()},t.error)}))}else w.a.exception({code:10028,detail:"Missing success function"},t.error);else w.a.exception({code:10028,detail:"Missing security object"},t.error)},retryQuestionCapture:function retryQuestionCapture(){this.activity&&this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&this.activity.captureQuestionResponses()},safeToUnload:function safeToUnload(){return!this.activity||this.activity.safeToUnload()},attemptedQuestions:function attemptedQuestions(){return this.activity?this.activity.getAttemptedResponseIds():[]},renderMath:function renderMath(t){return"mathquill"===t||this.activity&&"mathquill"===this.activity.get("math_renderer")?(new ue.a).render():le.a.isInitalised()?le.a.render():le.a.init()},validateQuestions:function validateQuestions(t){this.activity.validateQuestionsResponses(t)},validQuestions:function validQuestions(t){var n;switch(t){case"detailed":n=this.activity.get("questionResponses").getValidResponses();break;case"detailedWithPartials":n=this.activity.get("questionResponses").getValidResponsesDetailed();break;default:n=this.activity.getValidResponseIds()}return n},unsaveableQuestions:function unsaveableQuestions(){return l.a.map(this.activity.get("questionResponses").getInvalidQuestionResponses(),(function(t){return t.get("response_id")}))},disable:function disable(){if(!this.disableEnableAllowed())return!1;var t=l.a.map(this.questionFacades,(function(t){return t.disable()}));return l.a.contains(t,!0)},enable:function enable(){if(!this.disableEnableAllowed())return!1;var t=l.a.map(this.questionFacades,(function(t){return t.enable()}));return l.a.contains(t,!0)},disableEnableAllowed:function disableEnableAllowed(){var t=this.activity.get("state");return t===this.activity.STATE.INITIAL||t===this.activity.STATE.RESUME},question:function question(t){return this.questionFacades[t]},questions:function questions(){return l.a.clone(this.questionFacades)},feature:function feature(t){return this.featureFacades[t]},features:function features(){return l.a.clone(this.featureFacades)},getResponses:function getResponses(){return!!this.activity&&this.activity.get("questionResponses").getResponsesForClient()},getFeatures:function getFeatures(){return!!this.activity&&this.activity.get("featureModels").getFeaturesJson()},getQuestions:function getQuestions(){return!!this.activity&&this.activity.get("questionResponses").getQuestionsJson()},getMetadata:function getMetadata(){return!!this.activity&&this.activity.get("questionResponses").getQuestionsMetadata()},getScores:function getScores(){return!!this.activity&&this.activity.get("questionResponses").getScores()},getGroupScore:function getGroupScore(t){return!!this.activity&&this.activity.get("questionResponses").getGroupScore(t)},append:function append(t){return this.activity&&this.activity.append(t)},masking:function masking(t){if(this.activity){var n,i=arguments[2];if(l.a.isUndefined(arguments[1]))n=l.a.keys(this.questionFacades);else if(l.a.isString(arguments[1]))n=[arguments[1]];else{if(!l.a.isArray(arguments[1]))return!1;n=arguments[1]}return l.a.each(n,(function(n){this.questionFacades[n].masking(t,i)}),this),!0}return!1},on:function on(){var t=Array.prototype.slice.call(arguments),n=t[0],i=t[1],u=t[2]||this.facadeCtx||window;return g.a.Events.on.apply(this,[n,i,u]),this.getFacade()},off:function off(){return g.a.Events.off.apply(this,arguments),this.getFacade()},once:function once(){var t=Array.prototype.slice.call(arguments),n=t[0],i=t[1],u=t[2]||this.facadeCtx||window;return g.a.Events.once.apply(this,[n,i,u]),this.getFacade()},trigger:function trigger(){g.a.Events.trigger.apply(this,arguments)},stopAllSimpleFeatures:function stopAllSimpleFeatures(){this.simpleFeaturesRenderer.stopHideAll()},addQuestionFacade:function addQuestionFacade(t,n){this.questionFacades[t]=n},addFeatureFacade:function addFeatureFacade(t,n){this.featureFacades[t]=n},removeFeatureFacade:function removeFeatureFacade(t){var n=this.featureFacades;n&&delete n[t]}});var xe=Re,Ce=function Tab(t){this.element=y()(t)},Ie=[];function eventHandler(t){var n=y()(this),i=n.data("lrn.tab");"click"!==t.type&&0!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),i||(i=new Ce(this),n.data("lrn.tab",i),Ie.push(i)),i.show())}Ce.prototype.show=function(){var t,n=this.element,i=n.closest("ul:not(.dropdown-menu)"),u=n.data("tab-target");u||(u=(u=n.attr("href"))&&u.replace(/.*(?=#[^\s]*$)/,"")),t=i.next(".tab-content").find(u),this.activate(n.parent("li"),i),this.activate(t,t.parent())},Ce.prototype.activate=function(t,n){var i=n.find("> .active");i.find("> .dropdown-menu > .active").addBack().removeClass("active"),t.addClass("active").removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i.removeClass("in")};var Me=function init(){y()("body").on("click.lrn.tab.data-api keypress.lrn.tab.data-api",'.lrn [data-toggle="tab"], .lrn [data-toggle="pill"]',eventHandler)},Oe=function reset(){for(var t=Ie.length-1;t>=0;t--)y()(Ie[t].element).removeData("lrn.tab");Ie=[],y()("body").off("click.lrn.tab.data-api")};function _slicedToArray(t,n){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,n){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var u,l,d=[],p=!0,h=!1;try{for(i=i.call(t);!(p=(u=i.next()).done)&&(d.push(u.value),!n||d.length!==n);p=!0);}catch(t){h=!0,l=t}finally{try{p||null==i.return||i.return()}finally{if(h)throw l}}return d}(t,n)||simpleFeaturesRenderer_unsupportedIterableToArray(t,n)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function simpleFeaturesRenderer_toConsumableArray(t){return function simpleFeaturesRenderer_arrayWithoutHoles(t){if(Array.isArray(t))return simpleFeaturesRenderer_arrayLikeToArray(t)}(t)||function simpleFeaturesRenderer_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||simpleFeaturesRenderer_unsupportedIterableToArray(t)||function simpleFeaturesRenderer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function simpleFeaturesRenderer_unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return simpleFeaturesRenderer_arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?simpleFeaturesRenderer_arrayLikeToArray(t,n):void 0}}function simpleFeaturesRenderer_arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,u=new Array(n);i<n;i++)u[i]=t[i];return u}var ke=[],Pe=/^data\-(.+)$/;function prepareFeatures(t){var n,i=[],u=l()(M.a.prototype.TYPE).without(M.a.prototype.TYPE.UNKNOWN),d=l()(t).map((function(t){var n,d,p=t.getAttribute("data-type");return l()(u).contains(p)?i.push(p):p=M.a.prototype.TYPE.UNKNOWN,{domNode:t,type:p,dataAttributes:(n=t,d={},l.a.each(n.attributes,(function(t){if(Pe.test(t.nodeName)){var n=t.nodeName.match(Pe)[1];d[n]=t.nodeValue}})),l.a.isUndefined(d.simplefeature_id)&&(d.simplefeature_id=U.a.v4()),d)}}));return(n=ke).push.apply(n,simpleFeaturesRenderer_toConsumableArray(t)),[d,l()(i).uniq()]}var Ne=function SimpleFeaturesRenderer(){this.initCalled=!1};l.a.extend(Ne.prototype,{i18n:null,init:function init(t){this.features=[],this.simpleFeatureFacades={},this.i18n=t,this.initCalled=!0,Me()},getSimpleFeatureNodes:function getSimpleFeatureNodes(t){return y()(".learnosity-feature",t.$scope).not((function(){return this.className.match(/(^|\s)feature-/)||t.excludeWidgets&&y()(this).closest(".lrn_widget").length})).get()},hasInitBeenCalled:function hasInitBeenCalled(){return this.initCalled},render:function render(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSimpleFeatureNodes({excludeWidgets:!0}),u=arguments.length>2?arguments[2]:void 0;t=t||{};var d=new G.default((function(d,p){var h=(i=l()(i).difference(ke)).length;if(h){var g=_slicedToArray(prepareFeatures(i),2),v=g[0],y=g[1],E={},w=S.a.getBundleOptions(t);S.a.requireBundlesForFeatureTypes(y,(function(t){l.a.isEmpty(t)?p("No bundles were loaded for the required Feature types: "+y.join(", ")):l()(v).each((function(i){var p=t[i.type],g=new p.View({model:new p.Model(i.dataAttributes),activity:u,el:i.domNode,i18n:n.i18n,initialisationCallback:function initialisationCallback(){--h||(ke=l()(ke).without(i.domNode),d(E))}});n.registerFacade(g,E),n.features.push(g)}))}),w)}else d()}));return d.catch(w.a.log),d},registerFacade:function registerFacade(t,n){var i=t.model.get("simplefeature_id");i&&(this.simpleFeatureFacades[i]=n[i]=t.getFacade())},reset:function reset(){l()(this.features).invoke("reset"),this.features=[],this.simpleFeatureFacades={},this.initCalled=!1,Oe()},setScrollablePassagesContextHeight:function setScrollablePassagesContextHeight(t){l.a.each(this.features,(function(n){"scrollablepassage"===n.model.get("type")&&n.setContextHeight(t)}))},onAppReady:function onAppReady(){l()(this.features).invoke("postAppReady")},stopHideAll:function stopHideAll(){l.a.each(this.features,(function(t){var n=t.getFacade();n.stop(),n.toggle(!1)}))},unregisterFacades:function unregisterFacades(t){var n=this;l.a.chain(t).keys().each((function(t){delete n.simpleFeatureFacades[t]}))}});var Le=Ne,De=i(50),Fe=i.n(De),qe=["recordAuthRememberHtml","recordAuthRememberTroubleLink"];var Ve=function exportLabels(t){(function sanitise(t){l.a.each(t,(function(n,i){l.a.isString(n)||l.a.isNumber(n)?l.a.contains(qe,i)?t[i]=V.a.sanitizeHTML(n):t[i]=l.a.escape(y()("<div>").append(n).text()):(y.a.isPlainObject(n)||l.a.isArray(n))&&sanitise(n)}))})(t=t||{}),this.labels=l.a.deepExtend({},Fe.a,t),this.sameLabels=function(t){return l.a.isEqual(this.labels,t)}};function initOfflineStorage(t){return new Promise((function(n,i){if(t){t.domain=E.a.domain;try{X.init(),n()}catch(t){i({event:{code:10027,detail:t.toString()}})}}else i({event:{code:10027,detail:"Missing security object"}})}))}function appController_toConsumableArray(t){return function appController_arrayWithoutHoles(t){if(Array.isArray(t))return appController_arrayLikeToArray(t)}(t)||function appController_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function appController_unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return appController_arrayLikeToArray(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return appController_arrayLikeToArray(t,n)}(t)||function appController_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function appController_arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,u=new Array(n);i<n;i++)u[i]=t[i];return u}function getAppStub(t){var n={};return t&&(n=t),l.a.each(xe.prototype.EXPOSED_METHODS,(function(t){n[t]=function(){throw new Error("You have called ".concat(t," on an App stub, please Init the API with an activity JSON object"))}})),n}function getLabelBundle(t,n){var i=n&&l.a.isObject(n.labelBundle)&&n.labelBundle,u=t&&l.a.isObject(t.labelBundle)&&t.labelBundle;return l.a.extend({},i,u)}function checkBrowserCompat(){var t,n;return!("ie"===ge.a.browser&&ge.a.version<8)||(ge.a.compatibilityMode?(n=10018,t="Detected browser is supported but currently running in an unsupported compatibility mode ".concat(ge.a.browser," version ").concat(ge.a.version)):(n=10015,t="Detected browser ".concat(ge.a.browser," version ").concat(ge.a.version)),w.a.exception({code:n,detail:t,i18n:new Ve}),!1)}function validateDocType(){ge.a.isValidDOCTYPE(document)||w.a.warning("This html file's DOCTYPE is invalid or missing. Learnosity's UI may be impacted until this is fixed.")}var Ue=new Le,je=[],Be={};function getDefaultApp(){return je.length>0?je[0]:getAppStub()}function executeCachedExposedMethodsCalls(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.app,i=t.appStub,u=t.allowedMethods,d=LearnosityApp._internal._cachedAppInstanceMethodCalls,p=function executeCall(t){return n[t.method].apply(n,appController_toConsumableArray(t.args))};d.forEach((function(t,n){t.appStub===i&&(u&&!l.a.contains(u,t.method)||(p(t),d[n]=null))})),LearnosityApp._internal._cachedAppInstanceMethodCalls=d.filter((function(t){return!!t}))}function whenReady(t,n,i){l.a.isFunction(i)&&G.default.all(t).then((function(){l.a.defer((function(){n.isReset||i()}))}))}var He={_internal:void 0,version:void 0,errors:[],init:function appController_init(){var t,n,i,u,d,p,h=[];if(!checkBrowserCompat())return!1;validateDocType(),l.a.each(arguments,(function(d){l.a.isString(d)?i=d:l.a.isObject(d)&&(d.hasOwnProperty("consumer_key")?t=d:d.hasOwnProperty("appStub")?u=d.appStub:n=d)})),u||(u={},window.LearnosityApp._internal.addCachedPublicMethodsHandler(window.LearnosityApp._internal.cacheableInstanceMethods,u)),0!==je.length||ge.a.isChromeApp||ce.a.init(E.a.analytics),w.a.setErrorListener(n&&n.errorListener);var g=n&&n.readyListener,v=getLabelBundle(t,n);Ue.hasInitBeenCalled()||(l.a.isUndefined(d)&&(d=new Ve(v)),Ue.init(d));var y=t&&t.beta_flags;return h.push(Ue.render(y)),t?(d=new Ve(v),p=new xe(t,n,i,d,this.version,this.requestedApiVersion),l.a.defer((function(){executeCachedExposedMethodsCalls({app:p,appStub:u,allowedMethods:["on","off","once"]})})),p.on(p.EVENT.BEFORE_READY,(function(){executeCachedExposedMethodsCalls({app:p,appStub:u,allowedMethods:["reset"]})})),p.on(p.EVENT.READY,(function(){var t=p.activityRenderer.renderSimpleFeaturesInWidgets(Ue);executeCachedExposedMethodsCalls({app:p,appStub:u}),p.getFacade(u),G.default.all(t).then((function(){Ue.onAppReady(),h.push(Ue.render(y)),whenReady(h,p,g),l.a.chain(je).without(p).each((function(t){var n=t&&t.activityRenderer;n&&n.renderSimpleFeaturesInWidgets(Ue)}))}))})),p.simpleFeaturesRenderer=Ue,je.push(p),i&&(Be[i]=p)):(p=getAppStub(u),whenReady(h,p,g)),u},reset:function appController_reset(){l.a.invoke(je,"reset"),w.a.reset();var t=LearnosityApp._internal.audioApi;t&&t.reset(),je=[],Be={},Ue.reset()},save:function appController_save(){xe.prototype.save.apply(getDefaultApp(),arguments)},submit:function appController_submit(){xe.prototype.submit.apply(getDefaultApp(),arguments)},safeToUnload:function appController_safeToUnload(){return xe.prototype.safeToUnload.apply(getDefaultApp(),arguments)},attemptedQuestions:function attemptedQuestions(){return xe.prototype.attemptedQuestions.apply(getDefaultApp(),arguments)},renderMath:function appController_renderMath(){return xe.prototype.renderMath.apply(getDefaultApp(),arguments)},simpleFeature:function simpleFeature(t){return Ue.simpleFeatureFacades[t]},simpleFeatures:function simpleFeatures(){return l.a.clone(Ue.simpleFeatureFacades)},push:function appController_push(){return xe.prototype.push.apply(null,arguments)},needsPushing:function appController_needsPushing(){return xe.prototype.needsPushing.apply(null,arguments)},offline:function offline(t){var n=function getOfflineFacade(){return{getSession:function getSession(t,n){return initOfflineStorage(t).then((function(){return X.getSession(n)}))},push:function push(t,n){return initOfflineStorage(t).then((function(){return X.pushBySessionId(t,n)}))}}}();return l.a.isFunction(t)?t(n):n}};i.p=window.LearnosityApp._internal.config.assetsHost+"/dist/",function init(){var t,n;if(window.LearnosityApp._internal._cachedInitCalls&&(t=window.LearnosityApp._internal._cachedInitCalls,delete window.LearnosityApp._internal._cachedInitCalls),window.LearnosityApp._internal._cachedGlobalApiMethodCalls&&(n=window.LearnosityApp._internal._cachedGlobalApiMethodCalls,delete window.LearnosityApp._internal._cachedGlobalApiMethodCalls),He._internal=window.LearnosityApp._internal,He.version=window.LearnosityApp.version,He.versions=window.LearnosityApp.versions,He.requestedApiVersion=window.LearnosityApp.requestedApiVersion,window.LearnosityApp=He,t&&p.each(t,(function(t){t.args.push({appStub:t.appStub}),window.LearnosityApp.init.apply(window.LearnosityApp,t.args)})),n)for(var i=0;i<n.length;i++)He[n[i].method].apply(He,n[i].args)}()}]);